#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..44"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 QuerySeasons
$CLI_EXE \
    --sn seasonpass \
    --op QuerySeasons \
    --namespace $AB_NAMESPACE \
    --limit '25' \
    --offset '93' \
    --status '["PUBLISHED", "RETIRED", "RETIRED"]' \
    > test.out 2>&1
eval_tap $? 2 'QuerySeasons' test.out

#- 3 CreateSeason
# body param: body
echo '{"autoClaim": true, "defaultLanguage": "jwr5UEiB", "defaultRequiredExp": 33, "draftStoreId": "cqEcqtOl", "end": "1981-09-26T00:00:00Z", "excessStrategy": {"currency": "Tesd9Bd7", "method": "NONE", "percentPerExp": 94}, "images": [{"as": "ciMFchKL", "caption": "2atjpRm7", "height": 91, "imageUrl": "UDMPLAxE", "smallImageUrl": "DvfWAPLE", "width": 96}, {"as": "HpTqIeGb", "caption": "JYNtp6Em", "height": 33, "imageUrl": "Snkv5DZm", "smallImageUrl": "dAUF7h2D", "width": 100}, {"as": "5szYjCLM", "caption": "1dS4xLrz", "height": 40, "imageUrl": "vr3gpCNH", "smallImageUrl": "6CB10CnS", "width": 88}], "localizations": {"4H7Con8i": {"description": "2QK70uPM", "title": "rmkOJ7N0"}, "k6NJWQ6L": {"description": "OSYRiIRj", "title": "LN8szQqs"}, "FXUCV2VY": {"description": "DAMHFnux", "title": "OFCmLROO"}}, "name": "0k6ARyib", "start": "1979-07-14T00:00:00Z", "tierItemId": "EgSgvFmg"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateSeason \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'CreateSeason' test.out

#- 4 GetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 4 'GetCurrentSeason' test.out

#- 5 BulkGetUserSeasonProgression
# body param: body
echo '{"userIds": ["hslrWUVz", "QxxpZiSn", "vyyXK6WP"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op BulkGetUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'BulkGetUserSeasonProgression' test.out

#- 6 GetSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'BiK6LN37' \
    > test.out 2>&1
eval_tap $? 6 'GetSeason' test.out

#- 7 DeleteSeason
$CLI_EXE \
    --sn seasonpass \
    --op DeleteSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'MxDjwOYs' \
    > test.out 2>&1
eval_tap $? 7 'DeleteSeason' test.out

#- 8 UpdateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "l0p1HslJ", "defaultRequiredExp": 22, "draftStoreId": "I5uNp4x6", "end": "1994-10-24T00:00:00Z", "excessStrategy": {"currency": "eTn5u8QK", "method": "CURRENCY", "percentPerExp": 51}, "images": [{"as": "L5kfFDCR", "caption": "yIMnlGml", "height": 29, "imageUrl": "g28RT3gk", "smallImageUrl": "6Y4lEtLb", "width": 16}, {"as": "0U4Knwkq", "caption": "xwEQ626s", "height": 87, "imageUrl": "Y1wVrj8A", "smallImageUrl": "Y7nVtPPn", "width": 31}, {"as": "Hmn05XjK", "caption": "4GO2CVre", "height": 83, "imageUrl": "yfr5TmyV", "smallImageUrl": "9PFYZ01K", "width": 75}], "localizations": {"1OUweOcr": {"description": "AwoQN1Yh", "title": "8kjNIkqM"}, "xPbkPYGl": {"description": "sJXxsEu0", "title": "6lLStxws"}, "3QD41UHE": {"description": "7lzJeffJ", "title": "HmpFDXyY"}}, "name": "7NZFtF7j", "start": "1987-01-05T00:00:00Z", "tierItemId": "OlfKjcVz"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'YHk7sCGU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'UpdateSeason' test.out

#- 9 CloneSeason
# body param: body
echo '{"end": "1971-05-30T00:00:00Z", "name": "TIhU3D3C", "start": "1980-03-10T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CloneSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'KsKeDaVZ' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'CloneSeason' test.out

#- 10 GetFullSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetFullSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'wUy3XLQ4' \
    > test.out 2>&1
eval_tap $? 10 'GetFullSeason' test.out

#- 11 QueryPasses
$CLI_EXE \
    --sn seasonpass \
    --op QueryPasses \
    --namespace $AB_NAMESPACE \
    --seasonId 's2a3dJsy' \
    > test.out 2>&1
eval_tap $? 11 'QueryPasses' test.out

#- 12 CreatePass
# body param: body
echo '{"autoEnroll": false, "code": "xbjCZA7O", "displayOrder": 49, "images": [{"as": "lE1qaCVp", "caption": "6Szj2zzd", "height": 1, "imageUrl": "FoDVo1TR", "smallImageUrl": "8dgf7zau", "width": 74}, {"as": "RQZ0bDqV", "caption": "oWZ4ELpb", "height": 16, "imageUrl": "FxWjbJKv", "smallImageUrl": "DI8YNbpt", "width": 12}, {"as": "OCNEwBgE", "caption": "seZ7pgsV", "height": 34, "imageUrl": "dHzfcqTT", "smallImageUrl": "oeorK28A", "width": 20}], "localizations": {"h5DMx4Au": {"description": "dYMGbLgM", "title": "hqapzhmv"}, "SPfP4BRj": {"description": "Zv2hQZZQ", "title": "H3QXmvD7"}, "S0lTJvDh": {"description": "1ajrbokV", "title": "ZhqBl4jM"}}, "passItemId": "0cP3mnfX"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreatePass \
    --namespace $AB_NAMESPACE \
    --seasonId 'kxuYAhhP' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreatePass' test.out

#- 13 GetPass
$CLI_EXE \
    --sn seasonpass \
    --op GetPass \
    --code 'sizTehnp' \
    --namespace $AB_NAMESPACE \
    --seasonId 'PDwh1NYy' \
    > test.out 2>&1
eval_tap $? 13 'GetPass' test.out

#- 14 DeletePass
$CLI_EXE \
    --sn seasonpass \
    --op DeletePass \
    --code '0FioDnvd' \
    --namespace $AB_NAMESPACE \
    --seasonId 'xoRO8UvH' \
    > test.out 2>&1
eval_tap $? 14 'DeletePass' test.out

#- 15 UpdatePass
# body param: body
echo '{"autoEnroll": true, "displayOrder": 80, "images": [{"as": "a021vpka", "caption": "z9EniZtG", "height": 54, "imageUrl": "pbcOBhv4", "smallImageUrl": "pIILsWJ8", "width": 88}, {"as": "YO5k9D8X", "caption": "c7dtbDvQ", "height": 67, "imageUrl": "yf1ku0fg", "smallImageUrl": "cdxa0MXw", "width": 80}, {"as": "aTOCLFS1", "caption": "4PtpwTyU", "height": 100, "imageUrl": "NNv62oWG", "smallImageUrl": "bTzn0lwn", "width": 46}], "localizations": {"RXLulykP": {"description": "VwnTCgZD", "title": "bMslwmli"}, "izVbcAzO": {"description": "VPNZZt1v", "title": "0S7n8CIg"}, "jGOZXnZI": {"description": "oMM3q2Ay", "title": "4NXyJYlw"}}, "passItemId": "V4KnqgaE"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdatePass \
    --code 'TbLcUjOj' \
    --namespace $AB_NAMESPACE \
    --seasonId 'F9uIHyK5' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 15 'UpdatePass' test.out

#- 16 PublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'IzDRrj33' \
    > test.out 2>&1
eval_tap $? 16 'PublishSeason' test.out

#- 17 RetireSeason
$CLI_EXE \
    --sn seasonpass \
    --op RetireSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'dNPhv9pc' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 17 'RetireSeason' test.out

#- 18 QueryRewards
$CLI_EXE \
    --sn seasonpass \
    --op QueryRewards \
    --namespace $AB_NAMESPACE \
    --seasonId '5XHXDz3F' \
    --q 'DUkgNI0F' \
    > test.out 2>&1
eval_tap $? 18 'QueryRewards' test.out

#- 19 CreateReward
# body param: body
echo '{"code": "m6smoXCb", "currency": {"currencyCode": "voDxcHuE", "namespace": "bXvIcyI2"}, "image": {"as": "tVBvZ6ZG", "caption": "vlyw2yGh", "height": 52, "imageUrl": "khFFrXBZ", "smallImageUrl": "XuDEjTbU", "width": 27}, "itemId": "Ml1hbzxb", "quantity": 23, "type": "CURRENCY"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateReward \
    --namespace $AB_NAMESPACE \
    --seasonId '4SSZnBdh' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'CreateReward' test.out

#- 20 GetReward
$CLI_EXE \
    --sn seasonpass \
    --op GetReward \
    --code '4FY15GZJ' \
    --namespace $AB_NAMESPACE \
    --seasonId 'gqAKqkKG' \
    > test.out 2>&1
eval_tap $? 20 'GetReward' test.out

#- 21 DeleteReward
$CLI_EXE \
    --sn seasonpass \
    --op DeleteReward \
    --code 'pNaI5Pql' \
    --namespace $AB_NAMESPACE \
    --seasonId 'RyLirjXx' \
    > test.out 2>&1
eval_tap $? 21 'DeleteReward' test.out

#- 22 UpdateReward
# body param: body
echo '{"currency": {"currencyCode": "yrF4miIM", "namespace": "ZjKLxVAv"}, "image": {"as": "CFNjB6fZ", "caption": "QyCWZBef", "height": 54, "imageUrl": "DF4xRV0J", "smallImageUrl": "Tpfqrklt", "width": 55}, "itemId": "VBzgvrVz", "nullFields": ["XIOJYHOH", "LtUAveFh", "t27zB3bS"], "quantity": 52, "type": "CURRENCY"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateReward \
    --code 'dosWvswY' \
    --namespace $AB_NAMESPACE \
    --seasonId 'eWcxQtWU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'UpdateReward' test.out

#- 23 QueryTiers
$CLI_EXE \
    --sn seasonpass \
    --op QueryTiers \
    --namespace $AB_NAMESPACE \
    --seasonId 'Decln2eA' \
    --limit '6' \
    --offset '91' \
    > test.out 2>&1
eval_tap $? 23 'QueryTiers' test.out

#- 24 CreateTier
# body param: body
echo '{"index": 84, "quantity": 29, "tier": {"requiredExp": 99, "rewards": {"9Q8PuXOa": ["YyBtYaKL", "RyPkCKgZ", "of9sXB1O"], "23z1XuNZ": ["4uZ17F8O", "hOkrv8vS", "ghjD68Kt"], "hTMHHEIY": ["NPkfXkQf", "B3TCHJQJ", "JkdjqGsK"]}}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateTier \
    --namespace $AB_NAMESPACE \
    --seasonId 'lqK7oepm' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'CreateTier' test.out

#- 25 UpdateTier
# body param: body
echo '{"requiredExp": 54, "rewards": {"CmzONeHj": ["HnYqV2N5", "j0Pf5Aw4", "zphQwewi"], "haX67wVL": ["ccwMbD9m", "tVo0aJa8", "igA8TZav"], "TH44AaMk": ["YAm3lPc3", "APsnHEt8", "263e8NTo"]}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateTier \
    --id 'uxR7PtkO' \
    --namespace $AB_NAMESPACE \
    --seasonId 'Fymvzf30' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'UpdateTier' test.out

#- 26 DeleteTier
$CLI_EXE \
    --sn seasonpass \
    --op DeleteTier \
    --id 'fVQPVZo5' \
    --namespace $AB_NAMESPACE \
    --seasonId 'qiwpscWH' \
    > test.out 2>&1
eval_tap $? 26 'DeleteTier' test.out

#- 27 ReorderTier
# body param: body
echo '{"newIndex": 70}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op ReorderTier \
    --id 'TahDCf37' \
    --namespace $AB_NAMESPACE \
    --seasonId 'IuB96uQL' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 27 'ReorderTier' test.out

#- 28 UnpublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op UnpublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'iNQlzURz' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 28 'UnpublishSeason' test.out

#- 29 GetUserParticipatedSeasons
$CLI_EXE \
    --sn seasonpass \
    --op GetUserParticipatedSeasons \
    --namespace $AB_NAMESPACE \
    --userId 'sulBKKBi' \
    --limit '85' \
    --offset '50' \
    > test.out 2>&1
eval_tap $? 29 'GetUserParticipatedSeasons' test.out

#- 30 GrantUserExp
# body param: body
echo '{"exp": 11, "source": "SWEAT", "tags": ["w28AdwDc", "EyvHM4Z0", "BoXwcv7h"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserExp \
    --namespace $AB_NAMESPACE \
    --userId 'eUoJgo8K' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'GrantUserExp' test.out

#- 31 GrantUserPass
# body param: body
echo '{"passCode": "cPfyv4Wk", "passItemId": "jQDoel5C"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserPass \
    --namespace $AB_NAMESPACE \
    --userId 'lL5QliTh' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'GrantUserPass' test.out

#- 32 ExistsAnyPassByPassCodes
$CLI_EXE \
    --sn seasonpass \
    --op ExistsAnyPassByPassCodes \
    --namespace $AB_NAMESPACE \
    --userId 'GaT6Qsym' \
    --passCodes '["MuSH3QUk", "MaBGT7nF", "HTMdY1jl"]' \
    > test.out 2>&1
eval_tap $? 32 'ExistsAnyPassByPassCodes' test.out

#- 33 GetCurrentUserSeasonProgression
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --userId '51RuvjdU' \
    > test.out 2>&1
eval_tap $? 33 'GetCurrentUserSeasonProgression' test.out

#- 34 CheckSeasonPurchasable
# body param: body
echo '{"passItemId": "eRTCxwBV", "tierItemCount": 16, "tierItemId": "D6PgETZX"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CheckSeasonPurchasable \
    --namespace $AB_NAMESPACE \
    --userId 'QH4CwnSm' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 34 'CheckSeasonPurchasable' test.out

#- 35 ResetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op ResetUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'hiMoK16j' \
    > test.out 2>&1
eval_tap $? 35 'ResetUserSeason' test.out

#- 36 GrantUserTier
# body param: body
echo '{"count": 8, "source": "SWEAT", "tags": ["Acs1wx6C", "4qnGiOVs", "83yy8KBd"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserTier \
    --namespace $AB_NAMESPACE \
    --userId 'lpQnzR0o' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 36 'GrantUserTier' test.out

#- 37 QueryUserExpGrantHistory
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistory \
    --namespace $AB_NAMESPACE \
    --userId 'akJYPwpS' \
    --from 'QDpaXXC0' \
    --limit '27' \
    --offset '42' \
    --seasonId 'pEv82koJ' \
    --source 'PAID_FOR' \
    --tags '["M3hNdJLJ", "d8jjuC9i", "lryrzihl"]' \
    --to 'V6RZoOGQ' \
    > test.out 2>&1
eval_tap $? 37 'QueryUserExpGrantHistory' test.out

#- 38 QueryUserExpGrantHistoryTag
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistoryTag \
    --namespace $AB_NAMESPACE \
    --userId 'lZXWntuL' \
    --seasonId 'f3Miyc6r' \
    > test.out 2>&1
eval_tap $? 38 'QueryUserExpGrantHistoryTag' test.out

#- 39 GetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'PnZDiHyg' \
    --userId 'ZrsKvNRC' \
    > test.out 2>&1
eval_tap $? 39 'GetUserSeason' test.out

#- 40 PublicGetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentSeason \
    --namespace $AB_NAMESPACE \
    --language 'pV8CVqBM' \
    > test.out 2>&1
eval_tap $? 40 'PublicGetCurrentSeason' test.out

#- 41 PublicGetCurrentUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'WuQAbApN' \
    > test.out 2>&1
eval_tap $? 41 'PublicGetCurrentUserSeason' test.out

#- 42 PublicClaimUserReward
# body param: body
echo '{"passCode": "fD7QuF1a", "rewardCode": "7cnIkWd7", "tierIndex": 99}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op PublicClaimUserReward \
    --namespace $AB_NAMESPACE \
    --userId 'SUgXKrZk' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 42 'PublicClaimUserReward' test.out

#- 43 PublicBulkClaimUserRewards
$CLI_EXE \
    --sn seasonpass \
    --op PublicBulkClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId 'rc6Il0cc' \
    > test.out 2>&1
eval_tap $? 43 'PublicBulkClaimUserRewards' test.out

#- 44 PublicGetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'r1t9bjum' \
    --userId 'i4uGUAs0' \
    > test.out 2>&1
eval_tap $? 44 'PublicGetUserSeason' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE