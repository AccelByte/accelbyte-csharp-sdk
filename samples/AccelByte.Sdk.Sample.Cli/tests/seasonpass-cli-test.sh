#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..44"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 QuerySeasons
$CLI_EXE \
    --sn seasonpass \
    --op QuerySeasons \
    --namespace $AB_NAMESPACE \
    --limit '38' \
    --offset '34' \
    --status '["RETIRED", "RETIRED", "PUBLISHED"]' \
    > test.out 2>&1
eval_tap $? 2 'QuerySeasons' test.out

#- 3 CreateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "d5XwLDYA", "defaultRequiredExp": 58, "draftStoreId": "W2ckr8La", "end": "1992-11-09T00:00:00Z", "excessStrategy": {"currency": "AzxxOf72", "method": "NONE", "percentPerExp": 40}, "images": [{"as": "mV6ZXlCi", "caption": "5e8wqysG", "height": 31, "imageUrl": "RHqQ38Yh", "smallImageUrl": "d84Euen0", "width": 75}, {"as": "ac1RwnQs", "caption": "6MFRu6IG", "height": 42, "imageUrl": "mUukFZIi", "smallImageUrl": "xu5fCMyS", "width": 68}, {"as": "1krT86GO", "caption": "LYluE0FX", "height": 12, "imageUrl": "AfKXVoUH", "smallImageUrl": "bCgHlR0v", "width": 16}], "localizations": {"CwkKLuQo": {"description": "OOATl9Kk", "title": "mJr50qzf"}, "xDIJYBil": {"description": "P3OsqspF", "title": "YMCPybwg"}, "Ksj3okJM": {"description": "WVvn8QUS", "title": "FZokQn0i"}}, "name": "nJpiPPWC", "start": "1973-06-12T00:00:00Z", "tierItemId": "RanF0aWS"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateSeason \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'CreateSeason' test.out

#- 4 GetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 4 'GetCurrentSeason' test.out

#- 5 BulkGetUserSeasonProgression
# body param: body
echo '{"userIds": ["JUbCxBDP", "4hydjQ49", "BUPsTuCq"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op BulkGetUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'BulkGetUserSeasonProgression' test.out

#- 6 GetSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '4IPHZlah' \
    > test.out 2>&1
eval_tap $? 6 'GetSeason' test.out

#- 7 DeleteSeason
$CLI_EXE \
    --sn seasonpass \
    --op DeleteSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '1JuLDDa1' \
    > test.out 2>&1
eval_tap $? 7 'DeleteSeason' test.out

#- 8 UpdateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "0UOoCJea", "defaultRequiredExp": 6, "draftStoreId": "x3F6S48P", "end": "1975-10-12T00:00:00Z", "excessStrategy": {"currency": "2pe9S0p5", "method": "NONE", "percentPerExp": 74}, "images": [{"as": "gRDbUTVo", "caption": "4pEEmEKm", "height": 38, "imageUrl": "9ii2gYhN", "smallImageUrl": "kgopdhCz", "width": 96}, {"as": "dfMTkJhe", "caption": "SMzwDezq", "height": 0, "imageUrl": "O2ZoBctO", "smallImageUrl": "cSZJ6JfF", "width": 55}, {"as": "VnuWWYr1", "caption": "7Ipp1hoI", "height": 72, "imageUrl": "hrAKx7bp", "smallImageUrl": "aAJp2t5W", "width": 69}], "localizations": {"nUGyIhPg": {"description": "JBTGJoIv", "title": "jlJ15RIT"}, "o6Hxb5YW": {"description": "Gf7b53Ix", "title": "ImIVbChg"}, "UZ0fvsGu": {"description": "fpyzQAv4", "title": "AKiFuYeI"}}, "name": "YleGnPuf", "start": "1999-01-07T00:00:00Z", "tierItemId": "IQHubyYK"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'W8ABMnyx' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'UpdateSeason' test.out

#- 9 CloneSeason
# body param: body
echo '{"end": "1983-02-07T00:00:00Z", "name": "7dgFRz7r", "start": "1991-12-04T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CloneSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'wWrXC9tF' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'CloneSeason' test.out

#- 10 GetFullSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetFullSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'IOgfEpba' \
    > test.out 2>&1
eval_tap $? 10 'GetFullSeason' test.out

#- 11 QueryPasses
$CLI_EXE \
    --sn seasonpass \
    --op QueryPasses \
    --namespace $AB_NAMESPACE \
    --seasonId 'MnSGZCpM' \
    > test.out 2>&1
eval_tap $? 11 'QueryPasses' test.out

#- 12 CreatePass
# body param: body
echo '{"autoEnroll": true, "code": "dFhwrpdB", "displayOrder": 8, "images": [{"as": "qu3xznz7", "caption": "8n6IYhq3", "height": 24, "imageUrl": "4Es6wWDU", "smallImageUrl": "Wh7Z8AT3", "width": 89}, {"as": "kpgK9owR", "caption": "HhROGWT3", "height": 82, "imageUrl": "x8Eox4h4", "smallImageUrl": "u05185JF", "width": 99}, {"as": "eGLhD7Zj", "caption": "AO0T0L9Z", "height": 96, "imageUrl": "GyjT4Ojh", "smallImageUrl": "XcBK3ore", "width": 14}], "localizations": {"l13c4jQ9": {"description": "mAvh17xS", "title": "lLL7VmiU"}, "JHbO4Tjj": {"description": "0zrMlr0W", "title": "vzSLnZe9"}, "J1TlCXzG": {"description": "0jkD1PFn", "title": "TbN8fzLw"}}, "passItemId": "qHOE7igL"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreatePass \
    --namespace $AB_NAMESPACE \
    --seasonId 'bzsflNjz' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreatePass' test.out

#- 13 GetPass
$CLI_EXE \
    --sn seasonpass \
    --op GetPass \
    --code 'Bul2ffop' \
    --namespace $AB_NAMESPACE \
    --seasonId '2VoCbRiL' \
    > test.out 2>&1
eval_tap $? 13 'GetPass' test.out

#- 14 DeletePass
$CLI_EXE \
    --sn seasonpass \
    --op DeletePass \
    --code 'XQauRmmK' \
    --namespace $AB_NAMESPACE \
    --seasonId 'jVziReaZ' \
    > test.out 2>&1
eval_tap $? 14 'DeletePass' test.out

#- 15 UpdatePass
# body param: body
echo '{"autoEnroll": false, "displayOrder": 28, "images": [{"as": "xwaEuGgG", "caption": "fgo1awe3", "height": 83, "imageUrl": "fno7ALII", "smallImageUrl": "IhraUeur", "width": 62}, {"as": "9kze6p4c", "caption": "RhnVyY6D", "height": 61, "imageUrl": "EySCtBYU", "smallImageUrl": "bLBcxtzA", "width": 29}, {"as": "YNqRXTAP", "caption": "k3zTPs9r", "height": 45, "imageUrl": "N1HpxHIH", "smallImageUrl": "OfTvXwg7", "width": 12}], "localizations": {"TTYJlLcU": {"description": "S136K3dG", "title": "Ei6FXp2z"}, "SBMtpZBw": {"description": "GwD3ovfX", "title": "Gh6hX9Cx"}, "ovijieky": {"description": "2f86VmUZ", "title": "GFHNixww"}}, "passItemId": "L1iCZUOH"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdatePass \
    --code 'Tb8h1rC0' \
    --namespace $AB_NAMESPACE \
    --seasonId 'ERBT7aka' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 15 'UpdatePass' test.out

#- 16 PublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '55IM51Le' \
    > test.out 2>&1
eval_tap $? 16 'PublishSeason' test.out

#- 17 RetireSeason
$CLI_EXE \
    --sn seasonpass \
    --op RetireSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'a5KAYL7u' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 17 'RetireSeason' test.out

#- 18 QueryRewards
$CLI_EXE \
    --sn seasonpass \
    --op QueryRewards \
    --namespace $AB_NAMESPACE \
    --seasonId 'EYoWnTTc' \
    --q 'qfZhpJNf' \
    > test.out 2>&1
eval_tap $? 18 'QueryRewards' test.out

#- 19 CreateReward
# body param: body
echo '{"code": "m5sCpz2V", "currency": {"currencyCode": "7IaoJZ4p", "namespace": "6bmg11VL"}, "image": {"as": "btN4ebgP", "caption": "0FN7JzJQ", "height": 26, "imageUrl": "cicrdcGj", "smallImageUrl": "u0nMGaK9", "width": 30}, "itemId": "qDxd5lQi", "quantity": 48, "type": "ITEM"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateReward \
    --namespace $AB_NAMESPACE \
    --seasonId '2Cwr7oSf' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'CreateReward' test.out

#- 20 GetReward
$CLI_EXE \
    --sn seasonpass \
    --op GetReward \
    --code 'hMpi7GEv' \
    --namespace $AB_NAMESPACE \
    --seasonId '8ndYto7g' \
    > test.out 2>&1
eval_tap $? 20 'GetReward' test.out

#- 21 DeleteReward
$CLI_EXE \
    --sn seasonpass \
    --op DeleteReward \
    --code 'Z0Gzn9Ac' \
    --namespace $AB_NAMESPACE \
    --seasonId 'uyfbnkMX' \
    > test.out 2>&1
eval_tap $? 21 'DeleteReward' test.out

#- 22 UpdateReward
# body param: body
echo '{"currency": {"currencyCode": "F9fwiHEG", "namespace": "62KbAT2t"}, "image": {"as": "mEghn7qN", "caption": "xbya0FcU", "height": 46, "imageUrl": "AVvwhyeQ", "smallImageUrl": "K43yLyQJ", "width": 6}, "itemId": "yAmu13tY", "nullFields": ["d8Q8qzGT", "6mmkOHi9", "E7Pirrel"], "quantity": 14, "type": "ITEM"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateReward \
    --code '1lHnGL83' \
    --namespace $AB_NAMESPACE \
    --seasonId 'zwyCxTVG' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'UpdateReward' test.out

#- 23 QueryTiers
$CLI_EXE \
    --sn seasonpass \
    --op QueryTiers \
    --namespace $AB_NAMESPACE \
    --seasonId 'gd2ElLMY' \
    --limit '2' \
    --offset '60' \
    > test.out 2>&1
eval_tap $? 23 'QueryTiers' test.out

#- 24 CreateTier
# body param: body
echo '{"index": 58, "quantity": 19, "tier": {"requiredExp": 8, "rewards": {"6rctpDln": ["GvkMy1L2", "HUrTv6Qs", "d3O5dk6C"], "OKKiWtAZ": ["3w4HQ84p", "GATvmSU2", "CGD3m6fN"], "HKGaqDZv": ["JRJTz27a", "ZL57eCRT", "nq5WR6pV"]}}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateTier \
    --namespace $AB_NAMESPACE \
    --seasonId 'JJvrxOxi' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'CreateTier' test.out

#- 25 UpdateTier
# body param: body
echo '{"requiredExp": 6, "rewards": {"ZxnDQAvG": ["MBVRiPc0", "uMbTc4a3", "JE5P4BSq"], "JDo4g3D2": ["V0mjH164", "apvHYmDf", "kXiHqWtc"], "Dvm356LI": ["OHF47MiJ", "lCNfJUpr", "80LeQMVk"]}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateTier \
    --id 'RyYDcjms' \
    --namespace $AB_NAMESPACE \
    --seasonId 'kUR976hR' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'UpdateTier' test.out

#- 26 DeleteTier
$CLI_EXE \
    --sn seasonpass \
    --op DeleteTier \
    --id 'bSB7o7pY' \
    --namespace $AB_NAMESPACE \
    --seasonId 'zPPV2f0N' \
    > test.out 2>&1
eval_tap $? 26 'DeleteTier' test.out

#- 27 ReorderTier
# body param: body
echo '{"newIndex": 83}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op ReorderTier \
    --id 'Sqt7XV3t' \
    --namespace $AB_NAMESPACE \
    --seasonId '7ivHLtxo' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 27 'ReorderTier' test.out

#- 28 UnpublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op UnpublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'H0NwUhF4' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 28 'UnpublishSeason' test.out

#- 29 GetUserParticipatedSeasons
$CLI_EXE \
    --sn seasonpass \
    --op GetUserParticipatedSeasons \
    --namespace $AB_NAMESPACE \
    --userId 'LjnE1TUC' \
    --limit '71' \
    --offset '38' \
    > test.out 2>&1
eval_tap $? 29 'GetUserParticipatedSeasons' test.out

#- 30 GrantUserExp
# body param: body
echo '{"exp": 3, "source": "SWEAT", "tags": ["MkVZNNBE", "SqXCY81A", "TfWNSp6B"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserExp \
    --namespace $AB_NAMESPACE \
    --userId 'ETuBn1XL' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'GrantUserExp' test.out

#- 31 GrantUserPass
# body param: body
echo '{"passCode": "fyxHh7zA", "passItemId": "uoQUDSmj"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserPass \
    --namespace $AB_NAMESPACE \
    --userId '37H9o8W0' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'GrantUserPass' test.out

#- 32 ExistsAnyPassByPassCodes
$CLI_EXE \
    --sn seasonpass \
    --op ExistsAnyPassByPassCodes \
    --namespace $AB_NAMESPACE \
    --userId 'nD7lVEwX' \
    --passCodes '["M4jz5Erx", "J7qD5773", "O5OVHzZq"]' \
    > test.out 2>&1
eval_tap $? 32 'ExistsAnyPassByPassCodes' test.out

#- 33 GetCurrentUserSeasonProgression
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --userId 'XpRZt6Ie' \
    > test.out 2>&1
eval_tap $? 33 'GetCurrentUserSeasonProgression' test.out

#- 34 CheckSeasonPurchasable
# body param: body
echo '{"passItemId": "XvC5KMb7", "tierItemCount": 65, "tierItemId": "SiEUj9e8"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CheckSeasonPurchasable \
    --namespace $AB_NAMESPACE \
    --userId 'Sr7HeKRG' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 34 'CheckSeasonPurchasable' test.out

#- 35 ResetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op ResetUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'g3l8JhM7' \
    > test.out 2>&1
eval_tap $? 35 'ResetUserSeason' test.out

#- 36 GrantUserTier
# body param: body
echo '{"count": 90, "source": "SWEAT", "tags": ["gmABHpqu", "SQWtcJXK", "I52D7v4b"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserTier \
    --namespace $AB_NAMESPACE \
    --userId 'jzHruvVz' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 36 'GrantUserTier' test.out

#- 37 QueryUserExpGrantHistory
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistory \
    --namespace $AB_NAMESPACE \
    --userId 'eqXjrtqq' \
    --from 'ktrRseVb' \
    --limit '71' \
    --offset '4' \
    --seasonId '12zazVwX' \
    --source 'SWEAT' \
    --tags '["4rSwBpLz", "W3fI568C", "9J81Ov4D"]' \
    --to 'dzdnclZF' \
    > test.out 2>&1
eval_tap $? 37 'QueryUserExpGrantHistory' test.out

#- 38 QueryUserExpGrantHistoryTag
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistoryTag \
    --namespace $AB_NAMESPACE \
    --userId 'y4wWXB3u' \
    --seasonId 'm5em8p1b' \
    > test.out 2>&1
eval_tap $? 38 'QueryUserExpGrantHistoryTag' test.out

#- 39 GetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '4uITRXjb' \
    --userId 'h8AltrKW' \
    > test.out 2>&1
eval_tap $? 39 'GetUserSeason' test.out

#- 40 PublicGetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentSeason \
    --namespace $AB_NAMESPACE \
    --language 'kIjM1456' \
    > test.out 2>&1
eval_tap $? 40 'PublicGetCurrentSeason' test.out

#- 41 PublicGetCurrentUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'dsRITEDM' \
    > test.out 2>&1
eval_tap $? 41 'PublicGetCurrentUserSeason' test.out

#- 42 PublicClaimUserReward
# body param: body
echo '{"passCode": "WdB6iHI2", "rewardCode": "EgyqtVcd", "tierIndex": 13}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op PublicClaimUserReward \
    --namespace $AB_NAMESPACE \
    --userId 'qZCXRY8g' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 42 'PublicClaimUserReward' test.out

#- 43 PublicBulkClaimUserRewards
$CLI_EXE \
    --sn seasonpass \
    --op PublicBulkClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId '70doeIVU' \
    > test.out 2>&1
eval_tap $? 43 'PublicBulkClaimUserRewards' test.out

#- 44 PublicGetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '9uHC6m4Q' \
    --userId 'BmCxi3U1' \
    > test.out 2>&1
eval_tap $? 44 'PublicGetUserSeason' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE