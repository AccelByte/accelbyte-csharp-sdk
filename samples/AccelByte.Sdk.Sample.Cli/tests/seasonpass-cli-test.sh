#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..44"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 QuerySeasons
$CLI_EXE \
    --sn seasonpass \
    --op QuerySeasons \
    --namespace $AB_NAMESPACE \
    --limit '96' \
    --offset '54' \
    --status '["PUBLISHED", "RETIRED", "RETIRED"]' \
    > test.out 2>&1
eval_tap $? 2 'QuerySeasons' test.out

#- 3 CreateSeason
# body param: body
echo '{"autoClaim": true, "defaultLanguage": "7Dnd9eKh", "defaultRequiredExp": 54, "draftStoreId": "0eqhjUKQ", "end": "1988-08-01T00:00:00Z", "excessStrategy": {"currency": "dTc5jxkd", "method": "NONE", "percentPerExp": 11}, "images": [{"as": "9Lwos2S2", "caption": "dl1TySDN", "height": 85, "imageUrl": "Ch2C0Lmo", "smallImageUrl": "3VeMdLoj", "width": 62}, {"as": "Sjo9YvlS", "caption": "txmnRqvu", "height": 70, "imageUrl": "KaRft18i", "smallImageUrl": "iVGLkfb6", "width": 32}, {"as": "0gIdVHBO", "caption": "6626ocX7", "height": 14, "imageUrl": "ZgCT0eyc", "smallImageUrl": "fJs6EoXL", "width": 72}], "localizations": {"W34wjo2B": {"description": "lPfOxFy5", "title": "IMYl2jH1"}, "BLe73Dx5": {"description": "VyVObWtG", "title": "H2nlxGz8"}, "7uNNwg6L": {"description": "Rv14w894", "title": "ugBjY8j3"}}, "name": "a9x6eSdG", "start": "1981-10-08T00:00:00Z", "tierItemId": "Snss4FUS"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateSeason \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'CreateSeason' test.out

#- 4 GetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 4 'GetCurrentSeason' test.out

#- 5 BulkGetUserSeasonProgression
# body param: body
echo '{"userIds": ["y9PfCqN3", "WJAmgpqv", "TQ39LC2A"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op BulkGetUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'BulkGetUserSeasonProgression' test.out

#- 6 GetSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'aEkVBLBM' \
    > test.out 2>&1
eval_tap $? 6 'GetSeason' test.out

#- 7 DeleteSeason
$CLI_EXE \
    --sn seasonpass \
    --op DeleteSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'maFr7bna' \
    > test.out 2>&1
eval_tap $? 7 'DeleteSeason' test.out

#- 8 UpdateSeason
# body param: body
echo '{"autoClaim": true, "defaultLanguage": "URQeoiIf", "defaultRequiredExp": 64, "draftStoreId": "KHdkb45D", "end": "1980-05-04T00:00:00Z", "excessStrategy": {"currency": "ri4s1yx1", "method": "NONE", "percentPerExp": 28}, "images": [{"as": "TQxZwuoc", "caption": "s2z8a46W", "height": 58, "imageUrl": "TMWHbZgF", "smallImageUrl": "E1E2x1VN", "width": 9}, {"as": "s1cg7321", "caption": "5g7FkcL0", "height": 14, "imageUrl": "oUDaKn9f", "smallImageUrl": "3emBDlHY", "width": 47}, {"as": "FpNDV4jr", "caption": "zNj84Kmi", "height": 4, "imageUrl": "2YazVYHN", "smallImageUrl": "f34VQWYk", "width": 51}], "localizations": {"9D4KYb2x": {"description": "axszOQmP", "title": "gYtWqxfE"}, "ngysSYDb": {"description": "BDzYuEyJ", "title": "bLXS1Ach"}, "R3rMNtlK": {"description": "snT6KGg0", "title": "QLR69epB"}}, "name": "yMWjt6a0", "start": "1982-01-19T00:00:00Z", "tierItemId": "rUlUbrkU"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '5O3WNczJ' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'UpdateSeason' test.out

#- 9 CloneSeason
# body param: body
echo '{"end": "1996-06-16T00:00:00Z", "name": "VMUxIc3n", "start": "1987-09-18T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CloneSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'JhZZcpvN' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'CloneSeason' test.out

#- 10 GetFullSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetFullSeason \
    --namespace $AB_NAMESPACE \
    --seasonId '8Qe0yQT1' \
    > test.out 2>&1
eval_tap $? 10 'GetFullSeason' test.out

#- 11 QueryPasses
$CLI_EXE \
    --sn seasonpass \
    --op QueryPasses \
    --namespace $AB_NAMESPACE \
    --seasonId 'NFqKD5gM' \
    > test.out 2>&1
eval_tap $? 11 'QueryPasses' test.out

#- 12 CreatePass
# body param: body
echo '{"autoEnroll": true, "code": "yy7PxHpM", "displayOrder": 29, "images": [{"as": "zD9YfD0t", "caption": "HTXOnRcK", "height": 11, "imageUrl": "xexXyIVw", "smallImageUrl": "BX7fgANm", "width": 69}, {"as": "3nKgxzM3", "caption": "lMOcds5m", "height": 68, "imageUrl": "JvgKPFGI", "smallImageUrl": "eRWyZDeJ", "width": 52}, {"as": "9pP1hzvt", "caption": "2iivd1wF", "height": 94, "imageUrl": "QbSas80J", "smallImageUrl": "BwpYGAXY", "width": 58}], "localizations": {"j7FpRPcl": {"description": "0Y8KuMWd", "title": "siymBoKq"}, "ss7qHkC8": {"description": "Rpyh0JxW", "title": "7ByeFuWI"}, "SaKCGWMa": {"description": "lWuyDTB9", "title": "Sg19DnEk"}}, "passItemId": "BY0OLhS6"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreatePass \
    --namespace $AB_NAMESPACE \
    --seasonId 'KuheQF4Q' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreatePass' test.out

#- 13 GetPass
$CLI_EXE \
    --sn seasonpass \
    --op GetPass \
    --code 'rsyeKKvs' \
    --namespace $AB_NAMESPACE \
    --seasonId 'p7RRTpBc' \
    > test.out 2>&1
eval_tap $? 13 'GetPass' test.out

#- 14 DeletePass
$CLI_EXE \
    --sn seasonpass \
    --op DeletePass \
    --code 'ReqLcxdA' \
    --namespace $AB_NAMESPACE \
    --seasonId 'qefICM4g' \
    > test.out 2>&1
eval_tap $? 14 'DeletePass' test.out

#- 15 UpdatePass
# body param: body
echo '{"autoEnroll": true, "displayOrder": 37, "images": [{"as": "X43XmvGG", "caption": "hZXQ99Pf", "height": 70, "imageUrl": "R0Us10it", "smallImageUrl": "5rcYXE5x", "width": 86}, {"as": "uTZY5G4e", "caption": "B6IIO6YA", "height": 36, "imageUrl": "rwmnXEeT", "smallImageUrl": "5KNTC960", "width": 87}, {"as": "sRMBfSKe", "caption": "dtNSZK16", "height": 97, "imageUrl": "rqNcWD07", "smallImageUrl": "pdgDwpPr", "width": 81}], "localizations": {"8CghWtrP": {"description": "ZLsRklD3", "title": "yntrwAAB"}, "rFVUgY3G": {"description": "rtNiJKLQ", "title": "1cJ6GVGX"}, "zpBAcLEv": {"description": "qm9POKD5", "title": "XNDb8txw"}}, "passItemId": "j0P08vnk"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdatePass \
    --code 'FUMiYmzl' \
    --namespace $AB_NAMESPACE \
    --seasonId '8fr0sXir' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 15 'UpdatePass' test.out

#- 16 PublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'kOdcvV1D' \
    > test.out 2>&1
eval_tap $? 16 'PublishSeason' test.out

#- 17 RetireSeason
$CLI_EXE \
    --sn seasonpass \
    --op RetireSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'BMf1Vf6m' \
    --force 'true' \
    > test.out 2>&1
eval_tap $? 17 'RetireSeason' test.out

#- 18 QueryRewards
$CLI_EXE \
    --sn seasonpass \
    --op QueryRewards \
    --namespace $AB_NAMESPACE \
    --seasonId 'lqqjbJlp' \
    --q '351qIW7X' \
    > test.out 2>&1
eval_tap $? 18 'QueryRewards' test.out

#- 19 CreateReward
# body param: body
echo '{"code": "Y9v4GSo2", "currency": {"currencyCode": "7GfeMA7f", "namespace": "LWczUo9z"}, "image": {"as": "YnT3nQm3", "caption": "hdQT3g5F", "height": 49, "imageUrl": "IlF0HEtt", "smallImageUrl": "4OydYdU3", "width": 40}, "itemId": "heStmemj", "quantity": 13, "type": "ITEM"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateReward \
    --namespace $AB_NAMESPACE \
    --seasonId 'xMLlild7' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'CreateReward' test.out

#- 20 GetReward
$CLI_EXE \
    --sn seasonpass \
    --op GetReward \
    --code 'JQv6Y5hk' \
    --namespace $AB_NAMESPACE \
    --seasonId 'nBWg0GEj' \
    > test.out 2>&1
eval_tap $? 20 'GetReward' test.out

#- 21 DeleteReward
$CLI_EXE \
    --sn seasonpass \
    --op DeleteReward \
    --code '9fQu6MDu' \
    --namespace $AB_NAMESPACE \
    --seasonId 'EkjmaJO1' \
    > test.out 2>&1
eval_tap $? 21 'DeleteReward' test.out

#- 22 UpdateReward
# body param: body
echo '{"currency": {"currencyCode": "GO7f2CTO", "namespace": "3qttZeAB"}, "image": {"as": "DN4wEGrV", "caption": "Rk7egY7D", "height": 11, "imageUrl": "xzBdwhxN", "smallImageUrl": "ceJJEvdt", "width": 35}, "itemId": "Vo6N9RQd", "nullFields": ["TuqYzytt", "i5sGEYYL", "8dmAtOec"], "quantity": 15, "type": "CURRENCY"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateReward \
    --code 'UE8maF4H' \
    --namespace $AB_NAMESPACE \
    --seasonId 'rVbMm6JG' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'UpdateReward' test.out

#- 23 QueryTiers
$CLI_EXE \
    --sn seasonpass \
    --op QueryTiers \
    --namespace $AB_NAMESPACE \
    --seasonId 'sw0sXwkM' \
    --limit '22' \
    --offset '67' \
    > test.out 2>&1
eval_tap $? 23 'QueryTiers' test.out

#- 24 CreateTier
# body param: body
echo '{"index": 93, "quantity": 54, "tier": {"requiredExp": 82, "rewards": {"VKOvtlKn": ["QgRaHWOy", "2h4ydtad", "BpuDFtK4"], "wRJ9rApY": ["uY3vbtS2", "tBDGspl4", "uU2hYn7W"], "GnmHfdEi": ["bbRNmSbS", "dhIcZnXR", "3dkp7AW8"]}}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateTier \
    --namespace $AB_NAMESPACE \
    --seasonId 'BOJF3B3h' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'CreateTier' test.out

#- 25 UpdateTier
# body param: body
echo '{"requiredExp": 35, "rewards": {"KQScGmut": ["huUeXCJP", "0CWHM2JR", "9RStCypO"], "yDe8geV5": ["nNwBAFBA", "Mufl5iqp", "Dg2gBams"], "txY21jSA": ["Awvh0mJt", "7XYOhTps", "fwZS5ely"]}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateTier \
    --id 'csJo9Y2G' \
    --namespace $AB_NAMESPACE \
    --seasonId 'd83GJsTU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'UpdateTier' test.out

#- 26 DeleteTier
$CLI_EXE \
    --sn seasonpass \
    --op DeleteTier \
    --id 'WfDlXXOI' \
    --namespace $AB_NAMESPACE \
    --seasonId 'plKm0Bhj' \
    > test.out 2>&1
eval_tap $? 26 'DeleteTier' test.out

#- 27 ReorderTier
# body param: body
echo '{"newIndex": 81}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op ReorderTier \
    --id 'RjrHKJ4p' \
    --namespace $AB_NAMESPACE \
    --seasonId 'SADTzDS0' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 27 'ReorderTier' test.out

#- 28 UnpublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op UnpublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'hI6Dg4l9' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 28 'UnpublishSeason' test.out

#- 29 GetUserParticipatedSeasons
$CLI_EXE \
    --sn seasonpass \
    --op GetUserParticipatedSeasons \
    --namespace $AB_NAMESPACE \
    --userId '6TLG6oUC' \
    --limit '84' \
    --offset '13' \
    > test.out 2>&1
eval_tap $? 29 'GetUserParticipatedSeasons' test.out

#- 30 GrantUserExp
# body param: body
echo '{"exp": 22, "source": "SWEAT", "tags": ["DTy252yl", "ztspuMIe", "0XmS1xpX"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserExp \
    --namespace $AB_NAMESPACE \
    --userId '6o9ZrPUj' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'GrantUserExp' test.out

#- 31 GrantUserPass
# body param: body
echo '{"passCode": "E2ZiCVKx", "passItemId": "eCcfOuqJ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserPass \
    --namespace $AB_NAMESPACE \
    --userId 'bi1ARlOH' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'GrantUserPass' test.out

#- 32 ExistsAnyPassByPassCodes
$CLI_EXE \
    --sn seasonpass \
    --op ExistsAnyPassByPassCodes \
    --namespace $AB_NAMESPACE \
    --userId '5qtUMQH7' \
    --passCodes '["yIuBvRqw", "W6H9MAWB", "is728MMF"]' \
    > test.out 2>&1
eval_tap $? 32 'ExistsAnyPassByPassCodes' test.out

#- 33 GetCurrentUserSeasonProgression
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --userId 'RvZVHYh8' \
    > test.out 2>&1
eval_tap $? 33 'GetCurrentUserSeasonProgression' test.out

#- 34 CheckSeasonPurchasable
# body param: body
echo '{"passItemId": "87Mt3Aeh", "tierItemCount": 63, "tierItemId": "Mex6UiDk"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CheckSeasonPurchasable \
    --namespace $AB_NAMESPACE \
    --userId 'ULa60IEF' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 34 'CheckSeasonPurchasable' test.out

#- 35 ResetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op ResetUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'NEb5ldBH' \
    > test.out 2>&1
eval_tap $? 35 'ResetUserSeason' test.out

#- 36 GrantUserTier
# body param: body
echo '{"count": 20, "source": "SWEAT", "tags": ["Jw3TG0wJ", "xQqyaODt", "nXSUHKgX"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserTier \
    --namespace $AB_NAMESPACE \
    --userId 'RvpAVug9' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 36 'GrantUserTier' test.out

#- 37 QueryUserExpGrantHistory
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistory \
    --namespace $AB_NAMESPACE \
    --userId 'LuQgqSPN' \
    --from 'Bz8yPcj4' \
    --limit '89' \
    --offset '55' \
    --seasonId 'CkqdZIIp' \
    --source 'SWEAT' \
    --tags '["nPpRCmDb", "OKT6iwzQ", "lVZjCalH"]' \
    --to 'j9bwhavU' \
    > test.out 2>&1
eval_tap $? 37 'QueryUserExpGrantHistory' test.out

#- 38 QueryUserExpGrantHistoryTag
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistoryTag \
    --namespace $AB_NAMESPACE \
    --userId '6ZkNqYpN' \
    --seasonId 'wFFCZTi4' \
    > test.out 2>&1
eval_tap $? 38 'QueryUserExpGrantHistoryTag' test.out

#- 39 GetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'GwgTJx34' \
    --userId '6PE6Fe6O' \
    > test.out 2>&1
eval_tap $? 39 'GetUserSeason' test.out

#- 40 PublicGetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentSeason \
    --namespace $AB_NAMESPACE \
    --language 'vHInFagt' \
    > test.out 2>&1
eval_tap $? 40 'PublicGetCurrentSeason' test.out

#- 41 PublicGetCurrentUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'VAeQaLVV' \
    > test.out 2>&1
eval_tap $? 41 'PublicGetCurrentUserSeason' test.out

#- 42 PublicClaimUserReward
# body param: body
echo '{"passCode": "wAG5cVt9", "rewardCode": "T36QABCA", "tierIndex": 12}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op PublicClaimUserReward \
    --namespace $AB_NAMESPACE \
    --userId 'bd1aDWAK' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 42 'PublicClaimUserReward' test.out

#- 43 PublicBulkClaimUserRewards
$CLI_EXE \
    --sn seasonpass \
    --op PublicBulkClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId 'FZXwsRt0' \
    > test.out 2>&1
eval_tap $? 43 'PublicBulkClaimUserRewards' test.out

#- 44 PublicGetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'hg53o3ql' \
    --userId 'XDgbZe9U' \
    > test.out 2>&1
eval_tap $? 44 'PublicGetUserSeason' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE