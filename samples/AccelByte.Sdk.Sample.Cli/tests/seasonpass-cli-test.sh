#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..42"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 QuerySeasons
$CLI_EXE \
    --sn seasonpass \
    --op QuerySeasons \
    --namespace $AB_NAMESPACE \
    --limit '86' \
    --offset '19' \
    --status '["RETIRED", "PUBLISHED", "RETIRED"]' \
    > test.out 2>&1
eval_tap $? 2 'QuerySeasons' test.out

#- 3 CreateSeason
# body param: body
echo '{"autoClaim": false, "defaultLanguage": "wJnhpoPS", "defaultRequiredExp": 39, "draftStoreId": "cnItdTGK", "end": "1989-07-05T00:00:00Z", "excessStrategy": {"currency": "LHIL8Xzi", "method": "NONE", "percentPerExp": 53}, "images": [{"as": "QKJj8Z9H", "caption": "O32m46CS", "height": 57, "imageUrl": "ijmUW7gD", "smallImageUrl": "d7HWiQAn", "width": 32}, {"as": "mdhNPiNt", "caption": "mpMYJ5Rx", "height": 78, "imageUrl": "7UTy9KTP", "smallImageUrl": "MacsIrp1", "width": 54}, {"as": "iKdfC2Ty", "caption": "hh4WkDWk", "height": 39, "imageUrl": "P7j8H85z", "smallImageUrl": "zR5tCX9K", "width": 60}], "localizations": {"hqYm8sx6": {"description": "8NieZg76", "title": "xo6F6log"}, "DnZ9iKhL": {"description": "62fIujv3", "title": "VOBOUGRS"}, "88nJYnq8": {"description": "eGxZRdtZ", "title": "XoIdziWh"}}, "name": "ZAh14Iki", "start": "1987-01-04T00:00:00Z", "tierItemId": "413XCO1Q"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateSeason \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'CreateSeason' test.out

#- 4 GetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentSeason \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 4 'GetCurrentSeason' test.out

#- 5 GetSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'XagbqMTZ' \
    > test.out 2>&1
eval_tap $? 5 'GetSeason' test.out

#- 6 DeleteSeason
$CLI_EXE \
    --sn seasonpass \
    --op DeleteSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'jd9TryD7' \
    > test.out 2>&1
eval_tap $? 6 'DeleteSeason' test.out

#- 7 UpdateSeason
# body param: body
echo '{"autoClaim": true, "defaultLanguage": "stiBGRp2", "defaultRequiredExp": 29, "draftStoreId": "UDhdZRww", "end": "1974-11-21T00:00:00Z", "excessStrategy": {"currency": "DklKCcZJ", "method": "NONE", "percentPerExp": 99}, "images": [{"as": "aMDNHY3J", "caption": "MnGekdmi", "height": 71, "imageUrl": "GCHgj8N1", "smallImageUrl": "CrEWwkVG", "width": 80}, {"as": "Px1zl7YF", "caption": "o39DYkqo", "height": 56, "imageUrl": "QYFKBPNq", "smallImageUrl": "uYrI6m2u", "width": 86}, {"as": "5buVHxTx", "caption": "rOvif6w4", "height": 97, "imageUrl": "f5JGngpN", "smallImageUrl": "mkNsq3Nx", "width": 50}], "localizations": {"ihchytIr": {"description": "PryPlY0c", "title": "3GCSWva6"}, "S7qxQlyB": {"description": "v94OETBz", "title": "6Stdr5Mr"}, "4B9W9N1N": {"description": "63G1Z05s", "title": "zXpdxpOU"}}, "name": "e6JB94PS", "start": "1996-08-15T00:00:00Z", "tierItemId": "JdSBIoBi"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'SRryLgmd' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'UpdateSeason' test.out

#- 8 CloneSeason
# body param: body
echo '{"end": "1983-12-16T00:00:00Z", "name": "ZGvSSrs0", "start": "1994-10-05T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CloneSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'QpCqJiaB' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'CloneSeason' test.out

#- 9 QueryPasses
$CLI_EXE \
    --sn seasonpass \
    --op QueryPasses \
    --namespace $AB_NAMESPACE \
    --seasonId 'pgL7lx36' \
    > test.out 2>&1
eval_tap $? 9 'QueryPasses' test.out

#- 10 CreatePass
# body param: body
echo '{"autoEnroll": true, "code": "Stqkuhsf", "displayOrder": 73, "images": [{"as": "VAH2aeBs", "caption": "pD4rAATS", "height": 96, "imageUrl": "JE3mdzdM", "smallImageUrl": "FrcVFvFx", "width": 18}, {"as": "ifUexUbg", "caption": "vPEGtjJe", "height": 38, "imageUrl": "oUSIA6bE", "smallImageUrl": "XzmqTpXw", "width": 63}, {"as": "Sq1ztHA0", "caption": "Se4zGaO5", "height": 63, "imageUrl": "H7wtepj0", "smallImageUrl": "RjAtYMT2", "width": 68}], "localizations": {"B3sKcyUS": {"description": "FhyOXizl", "title": "NWjp2X5C"}, "dBvvQuGC": {"description": "nDG4dQDr", "title": "1T11pYp0"}, "Y4NOHibd": {"description": "OOnhdVU4", "title": "LI5c2evw"}}, "passItemId": "CP9abD2o"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreatePass \
    --namespace $AB_NAMESPACE \
    --seasonId 'CjKcWwvO' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'CreatePass' test.out

#- 11 GetPass
$CLI_EXE \
    --sn seasonpass \
    --op GetPass \
    --code 'sFYZ0pkc' \
    --namespace $AB_NAMESPACE \
    --seasonId 'pv48VIKb' \
    > test.out 2>&1
eval_tap $? 11 'GetPass' test.out

#- 12 DeletePass
$CLI_EXE \
    --sn seasonpass \
    --op DeletePass \
    --code 'ZvkHejgA' \
    --namespace $AB_NAMESPACE \
    --seasonId '6X9QPpFr' \
    > test.out 2>&1
eval_tap $? 12 'DeletePass' test.out

#- 13 UpdatePass
# body param: body
echo '{"autoEnroll": true, "displayOrder": 85, "images": [{"as": "stHIhO3J", "caption": "Jb5YOQZw", "height": 45, "imageUrl": "0YI7BwtV", "smallImageUrl": "UTGgQMeS", "width": 54}, {"as": "0QghmNpw", "caption": "oojFr8FY", "height": 47, "imageUrl": "EYEXDtsG", "smallImageUrl": "PT436nCF", "width": 74}, {"as": "rpcpMk15", "caption": "O3paIuQC", "height": 29, "imageUrl": "tIkW9XlD", "smallImageUrl": "9vojjSp9", "width": 40}], "localizations": {"x2FHDKWs": {"description": "vpaMGkFQ", "title": "QnAel4U0"}, "UMTfz6Ft": {"description": "n0TJE7Yu", "title": "NI5PMtEZ"}, "dK0OLzMr": {"description": "iKNv4qe8", "title": "DMPoTnVv"}}, "passItemId": "7zAmVkzo"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdatePass \
    --code 'STcHurKy' \
    --namespace $AB_NAMESPACE \
    --seasonId '1UGsxeF9' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'UpdatePass' test.out

#- 14 PublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'jbvcxtbm' \
    > test.out 2>&1
eval_tap $? 14 'PublishSeason' test.out

#- 15 RetireSeason
$CLI_EXE \
    --sn seasonpass \
    --op RetireSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'DheGuOhY' \
    --force 'true' \
    > test.out 2>&1
eval_tap $? 15 'RetireSeason' test.out

#- 16 QueryRewards
$CLI_EXE \
    --sn seasonpass \
    --op QueryRewards \
    --namespace $AB_NAMESPACE \
    --seasonId 'CVC3yf3L' \
    --q 'zLvBcdJj' \
    > test.out 2>&1
eval_tap $? 16 'QueryRewards' test.out

#- 17 CreateReward
# body param: body
echo '{"code": "0pI20teQ", "currency": {"currencyCode": "wqpj3UO6", "namespace": "lgG2dcBV"}, "image": {"as": "6rkNW9kC", "caption": "JyjgW1u9", "height": 86, "imageUrl": "lYsgAdL5", "smallImageUrl": "KkFOb8mO", "width": 33}, "itemId": "HvxQp9vC", "quantity": 62, "type": "ITEM"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateReward \
    --namespace $AB_NAMESPACE \
    --seasonId 'ngQXPJ1o' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 17 'CreateReward' test.out

#- 18 GetReward
$CLI_EXE \
    --sn seasonpass \
    --op GetReward \
    --code 'xmmMSaPj' \
    --namespace $AB_NAMESPACE \
    --seasonId 'eds83GSd' \
    > test.out 2>&1
eval_tap $? 18 'GetReward' test.out

#- 19 DeleteReward
$CLI_EXE \
    --sn seasonpass \
    --op DeleteReward \
    --code 'zfKA5BBb' \
    --namespace $AB_NAMESPACE \
    --seasonId 'acrIulnb' \
    > test.out 2>&1
eval_tap $? 19 'DeleteReward' test.out

#- 20 UpdateReward
# body param: body
echo '{"currency": {"currencyCode": "7DQHEAr3", "namespace": "jYzctTl8"}, "image": {"as": "yzLD5QJo", "caption": "nC0xitHE", "height": 61, "imageUrl": "WFQJSaz3", "smallImageUrl": "7fx9jKmf", "width": 75}, "itemId": "OBUEOOFJ", "nullFields": ["KlfaXm7C", "suLQFfbj", "IfJWlQXw"], "quantity": 66, "type": "CURRENCY"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateReward \
    --code 'DvT5rgy3' \
    --namespace $AB_NAMESPACE \
    --seasonId 'uu8z5NhC' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 20 'UpdateReward' test.out

#- 21 QueryTiers
$CLI_EXE \
    --sn seasonpass \
    --op QueryTiers \
    --namespace $AB_NAMESPACE \
    --seasonId 'Fot76kEC' \
    --limit '57' \
    --offset '40' \
    > test.out 2>&1
eval_tap $? 21 'QueryTiers' test.out

#- 22 CreateTier
# body param: body
echo '{"index": 65, "quantity": 76, "tier": {"requiredExp": 4, "rewards": {"Tx2gTWYU": ["iWtQ4Vr2", "BuyKZsgh", "cmCWoDmC"], "Z9WmnKnc": ["z5i4XAZV", "CDw689c5", "CvX2uhSh"], "Z7uow2eQ": ["RXEOx3Ax", "E8iic32Q", "yfywm1zT"]}}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CreateTier \
    --namespace $AB_NAMESPACE \
    --seasonId 'AOy8VPxh' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'CreateTier' test.out

#- 23 UpdateTier
# body param: body
echo '{"requiredExp": 42, "rewards": {"jnmyWmpu": ["jytGNkzl", "XuJo1kUm", "jvG5yWy4"], "nSTeGLME": ["fsfe1ozD", "4phBamFt", "QMK5KaM8"], "vWNO5e6o": ["s2BlSrel", "Ton4H136", "I2tTLl16"]}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op UpdateTier \
    --id 'CMS4IwCH' \
    --namespace $AB_NAMESPACE \
    --seasonId 'tIZVQ0m1' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'UpdateTier' test.out

#- 24 DeleteTier
$CLI_EXE \
    --sn seasonpass \
    --op DeleteTier \
    --id 'agO3soNI' \
    --namespace $AB_NAMESPACE \
    --seasonId 'wRMxN7de' \
    > test.out 2>&1
eval_tap $? 24 'DeleteTier' test.out

#- 25 ReorderTier
# body param: body
echo '{"newIndex": 100}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op ReorderTier \
    --id 'w8fdD4dP' \
    --namespace $AB_NAMESPACE \
    --seasonId 'uH54PrpZ' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'ReorderTier' test.out

#- 26 UnpublishSeason
$CLI_EXE \
    --sn seasonpass \
    --op UnpublishSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'n7Hcg4ll' \
    --force 'false' \
    > test.out 2>&1
eval_tap $? 26 'UnpublishSeason' test.out

#- 27 GetUserParticipatedSeasons
$CLI_EXE \
    --sn seasonpass \
    --op GetUserParticipatedSeasons \
    --namespace $AB_NAMESPACE \
    --userId 'wUyNsv1Q' \
    --limit '57' \
    --offset '5' \
    > test.out 2>&1
eval_tap $? 27 'GetUserParticipatedSeasons' test.out

#- 28 GrantUserExp
# body param: body
echo '{"exp": 88, "source": "PAID_FOR", "tags": ["QHL8dAGq", "aQXnpvrI", "YdXSQhTf"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserExp \
    --namespace $AB_NAMESPACE \
    --userId 'bqFVtVjX' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 28 'GrantUserExp' test.out

#- 29 GrantUserPass
# body param: body
echo '{"passCode": "wwjMBQi7", "passItemId": "57ES8KL5"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserPass \
    --namespace $AB_NAMESPACE \
    --userId 'pPDfSwbx' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'GrantUserPass' test.out

#- 30 ExistsAnyPassByPassCodes
$CLI_EXE \
    --sn seasonpass \
    --op ExistsAnyPassByPassCodes \
    --namespace $AB_NAMESPACE \
    --userId 'GaJM3fr6' \
    --passCodes '["UmzANqw7", "WKXReYgr", "aWwTMT4L"]' \
    > test.out 2>&1
eval_tap $? 30 'ExistsAnyPassByPassCodes' test.out

#- 31 GetCurrentUserSeasonProgression
$CLI_EXE \
    --sn seasonpass \
    --op GetCurrentUserSeasonProgression \
    --namespace $AB_NAMESPACE \
    --userId 'AfmuXg1x' \
    > test.out 2>&1
eval_tap $? 31 'GetCurrentUserSeasonProgression' test.out

#- 32 CheckSeasonPurchasable
# body param: body
echo '{"passItemId": "XLA5Iubb", "tierItemCount": 38, "tierItemId": "T3NSDnCc"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op CheckSeasonPurchasable \
    --namespace $AB_NAMESPACE \
    --userId 'WDnMUSZx' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 32 'CheckSeasonPurchasable' test.out

#- 33 ResetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op ResetUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'aLqQBVac' \
    > test.out 2>&1
eval_tap $? 33 'ResetUserSeason' test.out

#- 34 GrantUserTier
# body param: body
echo '{"count": 98, "source": "PAID_FOR", "tags": ["EBTJ5dlU", "wwoGSpDA", "3u2CDwsU"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op GrantUserTier \
    --namespace $AB_NAMESPACE \
    --userId 'CbkBt8zo' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 34 'GrantUserTier' test.out

#- 35 QueryUserExpGrantHistory
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistory \
    --namespace $AB_NAMESPACE \
    --userId 'jPCb7Gpd' \
    --from 'hn9RLqwb' \
    --limit '43' \
    --offset '72' \
    --seasonId '0lhRYnNd' \
    --source 'PAID_FOR' \
    --tags '["W1eELRG0", "fjwNlKZY", "lvRKh4Au"]' \
    --to '0N7aD1I0' \
    > test.out 2>&1
eval_tap $? 35 'QueryUserExpGrantHistory' test.out

#- 36 QueryUserExpGrantHistoryTag
$CLI_EXE \
    --sn seasonpass \
    --op QueryUserExpGrantHistoryTag \
    --namespace $AB_NAMESPACE \
    --userId 'NAzCEMNL' \
    --seasonId 'gH6KQs2p' \
    > test.out 2>&1
eval_tap $? 36 'QueryUserExpGrantHistoryTag' test.out

#- 37 GetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op GetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'ogj2qQW4' \
    --userId 'wg0MGpiR' \
    > test.out 2>&1
eval_tap $? 37 'GetUserSeason' test.out

#- 38 PublicGetCurrentSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentSeason \
    --namespace $AB_NAMESPACE \
    --language '3dMoVRBW' \
    > test.out 2>&1
eval_tap $? 38 'PublicGetCurrentSeason' test.out

#- 39 PublicGetCurrentUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetCurrentUserSeason \
    --namespace $AB_NAMESPACE \
    --userId 'U9A0T3SV' \
    > test.out 2>&1
eval_tap $? 39 'PublicGetCurrentUserSeason' test.out

#- 40 PublicClaimUserReward
# body param: body
echo '{"passCode": "2u6sPosQ", "rewardCode": "0dEXogl5", "tierIndex": 74}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn seasonpass \
    --op PublicClaimUserReward \
    --namespace $AB_NAMESPACE \
    --userId 'aQ7olItv' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 40 'PublicClaimUserReward' test.out

#- 41 PublicBulkClaimUserRewards
$CLI_EXE \
    --sn seasonpass \
    --op PublicBulkClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId 'zL3djFAF' \
    > test.out 2>&1
eval_tap $? 41 'PublicBulkClaimUserRewards' test.out

#- 42 PublicGetUserSeason
$CLI_EXE \
    --sn seasonpass \
    --op PublicGetUserSeason \
    --namespace $AB_NAMESPACE \
    --seasonId 'bKFjLYlW' \
    --userId '8JiAAVPl' \
    > test.out 2>&1
eval_tap $? 42 'PublicGetUserSeason' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE