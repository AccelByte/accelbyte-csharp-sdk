#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..30"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn matchmaking \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$CLI_EXE \
    --sn matchmaking \
    --op HandlerV3Healthz \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$CLI_EXE \
    --sn matchmaking \
    --op GetAllChannelsHandler \
    --namespace $AB_NAMESPACE \
    --limit '64' \
    --offset '90' \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
# body param: body
echo '{"deployment": "mLN9dBRZ", "description": "t23ah2HY", "find_match_timeout_seconds": 55, "game_mode": "7EofhF8y", "joinable": true, "max_delay_ms": 48, "rule_set": {"alliance": {"combination": {"alliances": [{"max": 17, "min": 69, "name": "q23Potcc"}, {"max": 85, "min": 75, "name": "otC6kzas"}, {"max": 84, "min": 94, "name": "GMgNp0HQ"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 54, "role_flexing_second": 50}, "max_number": 47, "min_number": 69, "player_max_number": 55, "player_min_number": 22}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 100, "min": 82, "name": "B2VJ4ViY"}, {"max": 91, "min": 92, "name": "2xQMYSqL"}, {"max": 50, "min": 72, "name": "CeBBMrYc"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 17, "role_flexing_second": 80}, "duration": 4, "max_number": 65, "min_number": 41, "player_max_number": 10, "player_min_number": 70}, {"combination": {"alliances": [{"max": 59, "min": 82, "name": "M3GHWBQ0"}, {"max": 65, "min": 30, "name": "eR2tyVWo"}, {"max": 92, "min": 65, "name": "E4iOP4dF"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 33, "role_flexing_second": 85}, "duration": 85, "max_number": 30, "min_number": 6, "player_max_number": 7, "player_min_number": 35}, {"combination": {"alliances": [{"max": 97, "min": 17, "name": "BCWT2vna"}, {"max": 76, "min": 88, "name": "u9HXMGpK"}, {"max": 97, "min": 60, "name": "uaPFWP1p"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 84, "role_flexing_second": 29}, "duration": 45, "max_number": 82, "min_number": 85, "player_max_number": 3, "player_min_number": 7}], "flexing_rule": [{"attribute": "W1nEepK9", "criteria": "lBecSG5j", "duration": 84, "reference": 0.17297569761531295}, {"attribute": "dFy533rP", "criteria": "QOdOob1p", "duration": 77, "reference": 0.825954642763582}, {"attribute": "tyRSrunk", "criteria": "0jSYCBwI", "duration": 51, "reference": 0.4009582360686047}], "match_options": {"options": [{"name": "brUpmCHF", "type": "7EFM8Iwo"}, {"name": "S4U3oHoA", "type": "EET6ZI5k"}, {"name": "Z4Qbzasq", "type": "EccRa01u"}]}, "matching_rule": [{"attribute": "qiJgVfH8", "criteria": "Xcr0Cyum", "reference": 0.5434355893141142}, {"attribute": "p46tgdet", "criteria": "7lmLFW7H", "reference": 0.46280615258191127}, {"attribute": "fT4NEcF6", "criteria": "qrI3TALH", "reference": 0.1850231825243438}], "rebalance_enable": true, "sub_game_modes": {"AAiIae5f": {"alliance": {"combination": {"alliances": [{"max": 23, "min": 61, "name": "MQrscMVw"}, {"max": 59, "min": 36, "name": "NQtEwecw"}, {"max": 68, "min": 15, "name": "u7yLodWE"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 97, "role_flexing_second": 82}, "max_number": 79, "min_number": 82, "player_max_number": 98, "player_min_number": 85}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 82, "min": 76, "name": "saEaZk2o"}, {"max": 94, "min": 52, "name": "Met2wxKi"}, {"max": 90, "min": 78, "name": "SjPms57B"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 26, "role_flexing_second": 35}, "duration": 25, "max_number": 57, "min_number": 70, "player_max_number": 4, "player_min_number": 29}, {"combination": {"alliances": [{"max": 12, "min": 27, "name": "4ulTmMre"}, {"max": 30, "min": 48, "name": "v4bwNSES"}, {"max": 49, "min": 22, "name": "9lEy0gSA"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 28, "role_flexing_second": 43}, "duration": 26, "max_number": 66, "min_number": 100, "player_max_number": 38, "player_min_number": 10}, {"combination": {"alliances": [{"max": 100, "min": 65, "name": "3mCPrOGG"}, {"max": 96, "min": 45, "name": "MmZCUKxH"}, {"max": 84, "min": 36, "name": "VgIeAKXr"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 89, "role_flexing_second": 81}, "duration": 91, "max_number": 3, "min_number": 56, "player_max_number": 70, "player_min_number": 24}], "name": "vIJOHJuG"}, "f0itvsIC": {"alliance": {"combination": {"alliances": [{"max": 67, "min": 85, "name": "kSEv9ZJC"}, {"max": 27, "min": 22, "name": "OruU42jI"}, {"max": 5, "min": 93, "name": "GYap1NrJ"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 41, "role_flexing_second": 69}, "max_number": 52, "min_number": 28, "player_max_number": 62, "player_min_number": 21}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 35, "min": 27, "name": "C3WmWM3Y"}, {"max": 93, "min": 19, "name": "fpHZhm8d"}, {"max": 96, "min": 38, "name": "qdsWoR3x"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 94, "role_flexing_second": 29}, "duration": 83, "max_number": 17, "min_number": 8, "player_max_number": 79, "player_min_number": 84}, {"combination": {"alliances": [{"max": 34, "min": 51, "name": "kBH07ybm"}, {"max": 45, "min": 43, "name": "lHBPy12P"}, {"max": 57, "min": 33, "name": "P9iiXSZ1"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 92, "role_flexing_second": 4}, "duration": 95, "max_number": 26, "min_number": 65, "player_max_number": 72, "player_min_number": 43}, {"combination": {"alliances": [{"max": 84, "min": 83, "name": "Upp8fpto"}, {"max": 96, "min": 78, "name": "6acc7TJl"}, {"max": 79, "min": 29, "name": "cswKj8Lp"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 99, "role_flexing_second": 18}, "duration": 64, "max_number": 84, "min_number": 73, "player_max_number": 61, "player_min_number": 36}], "name": "g7uuh0Pj"}, "bvht1LY0": {"alliance": {"combination": {"alliances": [{"max": 27, "min": 83, "name": "Wi7ACL0J"}, {"max": 83, "min": 28, "name": "hAVIxU6W"}, {"max": 92, "min": 88, "name": "T9ozP32w"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 71, "role_flexing_second": 17}, "max_number": 21, "min_number": 34, "player_max_number": 41, "player_min_number": 60}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 34, "min": 27, "name": "7zAmhJVo"}, {"max": 68, "min": 87, "name": "IlZ8z0Cv"}, {"max": 58, "min": 60, "name": "q0fAr4kH"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 16, "role_flexing_second": 73}, "duration": 47, "max_number": 94, "min_number": 32, "player_max_number": 37, "player_min_number": 53}, {"combination": {"alliances": [{"max": 97, "min": 49, "name": "glU1Talo"}, {"max": 26, "min": 85, "name": "alfskibf"}, {"max": 80, "min": 5, "name": "mgKVNqcT"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 4, "role_flexing_second": 0}, "duration": 70, "max_number": 100, "min_number": 34, "player_max_number": 44, "player_min_number": 1}, {"combination": {"alliances": [{"max": 37, "min": 7, "name": "eg2TAcXe"}, {"max": 18, "min": 7, "name": "ESsIVm23"}, {"max": 87, "min": 27, "name": "2WoQ5HlI"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 57, "role_flexing_second": 4}, "duration": 48, "max_number": 65, "min_number": 72, "player_max_number": 0, "player_min_number": 55}], "name": "iwIzqZb9"}}}, "session_queue_timeout_seconds": 64, "social_matchmaking": true, "use_sub_gamemode": true}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateChannelHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 DeleteChannelHandler
$CLI_EXE \
    --sn matchmaking \
    --op DeleteChannelHandler \
    --channel '1DZNtJVQ' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'DeleteChannelHandler' test.out

#- 7 StoreMatchResults
# body param: body
echo '{"match_id": "OVbstNLY", "players": [{"results": [{"attribute": "bWZ7P1uB", "value": 0.5704754639648407}, {"attribute": "OwgOscM7", "value": 0.23260803510180195}, {"attribute": "KJW8VG10", "value": 0.6585832114289033}], "user_id": "NR1vdZkV"}, {"results": [{"attribute": "jo0rjBGH", "value": 0.11775964949461803}, {"attribute": "yCIwzRf3", "value": 0.19737414838820544}, {"attribute": "Sy7T7UjV", "value": 0.7689034202905618}], "user_id": "NzuCkXt1"}, {"results": [{"attribute": "m5i04eEN", "value": 0.1859969343932768}, {"attribute": "NMNdJMDt", "value": 0.7822144096226142}, {"attribute": "wS1MArYs", "value": 0.25267939094837444}], "user_id": "Cb9l3dkN"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op StoreMatchResults \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'StoreMatchResults' test.out

#- 8 Rebalance
# body param: body
echo '{"match_id": "AsfspYKI"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op Rebalance \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'Rebalance' test.out

#- 9 QueueSessionHandler
# body param: body
echo '{"channel": "mQH0wIwT", "client_version": "GtWbyApt", "deployment": "HPLfaBi7", "error_code": 65, "error_message": "aeEuGygM", "game_mode": "VzOq5kJL", "joinable": false, "match_id": "GH7Eqr1S", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 68, "party_attributes": {"x7hHO9CI": {}, "NNuWDBxF": {}, "9PsXVmVH": {}}, "party_id": "wmo6ze8L", "party_members": [{"extra_attributes": {"a6Yvlmoz": {}, "uWmlKSOA": {}, "Mh2aN3Uz": {}}, "user_id": "3F27aOed"}, {"extra_attributes": {"Xl0FTrAR": {}, "Zsw8JIP2": {}, "43FeEBqz": {}}, "user_id": "kT7hOuu7"}, {"extra_attributes": {"HgUhPdOh": {}, "1IOG8a5J": {}, "46LTvf5W": {}}, "user_id": "QaBrLrFy"}], "ticket_id": "fRcdIsvu"}, {"first_ticket_created_at": 87, "party_attributes": {"DZxh1U2d": {}, "SN27zghC": {}, "KHkoQsw5": {}}, "party_id": "q5QR24Jf", "party_members": [{"extra_attributes": {"w3wSkZ62": {}, "nakKARr7": {}, "J7rpHJl0": {}}, "user_id": "mM2W8oAU"}, {"extra_attributes": {"hTuc5T8h": {}, "wqFNKeD1": {}, "sZnprc98": {}}, "user_id": "YR7G3y5I"}, {"extra_attributes": {"bFXzAahp": {}, "VyZ2zEbF": {}, "pi55w0iZ": {}}, "user_id": "nWkzSYM3"}], "ticket_id": "88uuHxih"}, {"first_ticket_created_at": 14, "party_attributes": {"ECF6Ez81": {}, "DMbGVREN": {}, "Qs7zkNIC": {}}, "party_id": "8E9iaUwU", "party_members": [{"extra_attributes": {"bflY3dET": {}, "vtG3EsAv": {}, "l19OmFzC": {}}, "user_id": "3jJSresG"}, {"extra_attributes": {"Nq1OJ8vl": {}, "fu3Po2EV": {}, "8nSiuCye": {}}, "user_id": "X93mULAG"}, {"extra_attributes": {"f0saharA": {}, "GxXhFsyo": {}, "fuRUowiF": {}}, "user_id": "IfdxFBCd"}], "ticket_id": "Pl79TvTX"}]}, {"matching_parties": [{"first_ticket_created_at": 76, "party_attributes": {"0K2wEA0g": {}, "IVHSiOwO": {}, "B43tmFLI": {}}, "party_id": "AFFuuWJi", "party_members": [{"extra_attributes": {"jHVOmmOc": {}, "JBHfTofA": {}, "5nCMXxQf": {}}, "user_id": "S38m2dkw"}, {"extra_attributes": {"7o3oyaZB": {}, "6r8SySQN": {}, "igyXw6HZ": {}}, "user_id": "oTNfSPpu"}, {"extra_attributes": {"VrVcC5Rh": {}, "kM0E5vC7": {}, "3P3XUg2Y": {}}, "user_id": "LrmWDFLN"}], "ticket_id": "WzkFI8Zo"}, {"first_ticket_created_at": 0, "party_attributes": {"4cOhwrBY": {}, "FV7c8byX": {}, "lxRmejfB": {}}, "party_id": "Er0NgIi7", "party_members": [{"extra_attributes": {"Bz65Dg0v": {}, "irSABtMN": {}, "UIh8pvOb": {}}, "user_id": "mwZs8RB5"}, {"extra_attributes": {"36L7XAsw": {}, "VTkoUnUt": {}, "5nznVCw7": {}}, "user_id": "sjdJ8IIp"}, {"extra_attributes": {"wuSk6lz8": {}, "9aPKy3Ll": {}, "x5ZfbRBg": {}}, "user_id": "40Kh0XbH"}], "ticket_id": "hHfMifyZ"}, {"first_ticket_created_at": 42, "party_attributes": {"8PdvdMz4": {}, "xbafWCKZ": {}, "9NISpINj": {}}, "party_id": "4VpBnVX8", "party_members": [{"extra_attributes": {"Nw5Np2Be": {}, "QtfxkzVU": {}, "OA4am1NE": {}}, "user_id": "eom8mUGB"}, {"extra_attributes": {"BlKEDBKG": {}, "iL14dvYs": {}, "kO750Kke": {}}, "user_id": "9kOFCrQq"}, {"extra_attributes": {"hh8mIL1C": {}, "HRRpvzDD": {}, "Z8Ytsfq9": {}}, "user_id": "kBrk9w7o"}], "ticket_id": "gTE11dMm"}]}, {"matching_parties": [{"first_ticket_created_at": 11, "party_attributes": {"NgyNqfZe": {}, "wH8DlZVZ": {}, "vcKD55LJ": {}}, "party_id": "e9B2P98M", "party_members": [{"extra_attributes": {"Xcwn0jvk": {}, "ww5EyqU2": {}, "gNCnwpmC": {}}, "user_id": "dHMGjJAx"}, {"extra_attributes": {"VTj6UxAU": {}, "aG8ZGT0w": {}, "sXQJNTLj": {}}, "user_id": "ie7I9u3P"}, {"extra_attributes": {"lNpMjaBp": {}, "xpUSAA6p": {}, "FugTmkRS": {}}, "user_id": "7lsUF8tG"}], "ticket_id": "LH5QZXXS"}, {"first_ticket_created_at": 25, "party_attributes": {"cDzv9jBT": {}, "I9fkNeUR": {}, "UydwkBRc": {}}, "party_id": "0dC8jCrJ", "party_members": [{"extra_attributes": {"c07c5Ekc": {}, "oFpfCEjV": {}, "1yxJkV2b": {}}, "user_id": "hqCSj7oW"}, {"extra_attributes": {"4ZJCHKSt": {}, "8kwNhY7O": {}, "oedtqn2K": {}}, "user_id": "z73oGc14"}, {"extra_attributes": {"FlMDKafU": {}, "FbBsRXxV": {}, "bGYI09Tn": {}}, "user_id": "WSbPPMHo"}], "ticket_id": "pInlEgTT"}, {"first_ticket_created_at": 70, "party_attributes": {"T0TiHb5M": {}, "mpi3uYH1": {}, "kJJfXdRM": {}}, "party_id": "BXT9lQiP", "party_members": [{"extra_attributes": {"ivevteVY": {}, "YQpzrxou": {}, "cDPfoAHM": {}}, "user_id": "0rdYZmuR"}, {"extra_attributes": {"H5NtQHOl": {}, "UHchlN6I": {}, "8L1a4eFN": {}}, "user_id": "jzZlQXQg"}, {"extra_attributes": {"v7EgDvPq": {}, "AToG5gs9": {}, "FhgYCRlW": {}}, "user_id": "YS8tc0fW"}], "ticket_id": "EmAwKUl4"}]}], "namespace": "svzRWEaJ", "party_attributes": {"GeZk1JLG": {}, "FfVsd2Ja": {}, "l3fd5JTX": {}}, "party_id": "EMQ8tKHC", "queued_at": 44, "region": "cpzzM6DL", "server_name": "hN1OzdYc", "status": "a9VlGjkT", "ticket_id": "HG0maoj0", "updated_at": "1995-12-24T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op QueueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'QueueSessionHandler' test.out

#- 10 DequeueSessionHandler
# body param: body
echo '{"match_id": "qFA8bWkA"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op DequeueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'DequeueSessionHandler' test.out

#- 11 QuerySessionHandler
$CLI_EXE \
    --sn matchmaking \
    --op QuerySessionHandler \
    --matchID 'pcL7wYYQ' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'QuerySessionHandler' test.out

#- 12 UpdatePlayTimeWeight
# body param: body
echo '{"playtime": 74, "userID": "g6hwevos", "weight": 0.9405983305726245}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdatePlayTimeWeight \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'UpdatePlayTimeWeight' test.out

#- 13 GetAllPartyInAllChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInAllChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'GetAllPartyInAllChannel' test.out

#- 14 BulkGetSessions
$CLI_EXE \
    --sn matchmaking \
    --op BulkGetSessions \
    --namespace $AB_NAMESPACE \
    --matchIDs '1uxlUJE5' \
    > test.out 2>&1
eval_tap $? 14 'BulkGetSessions' test.out

#- 15 ExportChannels
$CLI_EXE \
    --sn matchmaking \
    --op ExportChannels \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 15 'ExportChannels' test.out

#- 16 ImportChannels
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn matchmaking \
    --op ImportChannels \
    --namespace $AB_NAMESPACE \
    --upload $TEMP_FILE_UPLOAD \
    --strategy 'Ia6zYWZD' \
    > test.out 2>&1
eval_tap $? 16 'ImportChannels' test.out

#- 17 GetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetSingleMatchmakingChannel \
    --channelName 'qxINWQz6' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 17 'GetSingleMatchmakingChannel' test.out

#- 18 UpdateMatchmakingChannel
# body param: body
echo '{"deployment": "RRBlBhSF", "description": "wJDHV3yj", "findMatchTimeoutSeconds": 2, "joinable": false, "max_delay_ms": 33, "ruleSet": {"alliance": {"combination": {"alliances": [{"max": 50, "min": 92, "name": "RvD3xFnu"}, {"max": 55, "min": 75, "name": "PZRdnlV4"}, {"max": 62, "min": 47, "name": "EondTxfN"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 7, "role_flexing_second": 66}, "maxNumber": 8, "minNumber": 87, "playerMaxNumber": 65, "playerMinNumber": 19}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 39, "min": 62, "name": "LFM80aEP"}, {"max": 55, "min": 86, "name": "pOCrVnqH"}, {"max": 6, "min": 54, "name": "mYFYJG9U"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 93, "role_flexing_second": 63}, "duration": 2, "max_number": 75, "min_number": 25, "player_max_number": 1, "player_min_number": 9}, {"combination": {"alliances": [{"max": 50, "min": 1, "name": "sTSIMYhG"}, {"max": 69, "min": 86, "name": "s2QN4jx7"}, {"max": 85, "min": 71, "name": "aV7hC0Tg"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 12, "role_flexing_second": 47}, "duration": 42, "max_number": 32, "min_number": 6, "player_max_number": 92, "player_min_number": 43}, {"combination": {"alliances": [{"max": 30, "min": 20, "name": "T2yBb8Wm"}, {"max": 44, "min": 75, "name": "9FpBzqzN"}, {"max": 63, "min": 35, "name": "bnpZ2bS8"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 12, "role_flexing_second": 48}, "duration": 15, "max_number": 90, "min_number": 79, "player_max_number": 72, "player_min_number": 93}], "flexingRules": [{"attribute": "eVzbHbdX", "criteria": "1P3lOv96", "duration": 0, "reference": 0.7081245496545223}, {"attribute": "1PvzXf8E", "criteria": "gQMqLL40", "duration": 27, "reference": 0.36299292116248427}, {"attribute": "L5UEzdlt", "criteria": "DuJnHyNb", "duration": 87, "reference": 0.9262087799560124}], "match_options": {"options": [{"name": "U7NkXU08", "type": "o1Ifl75F"}, {"name": "JMahPrhl", "type": "J9lNc2oA"}, {"name": "mT6n6UUf", "type": "FjPzgbcV"}]}, "matchingRules": [{"attribute": "jH5EsjkP", "criteria": "Yt8aaYRw", "reference": 0.7596721241251527}, {"attribute": "8rkMFZ2X", "criteria": "05e4vTYD", "reference": 0.9019886508099282}, {"attribute": "uWcvOqQl", "criteria": "s4vsNTvr", "reference": 0.24320956358742374}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 12, "socialMatchmaking": true, "use_sub_gamemode": false}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdateMatchmakingChannel \
    --channelName 'oE0uSdUu' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'UpdateMatchmakingChannel' test.out

#- 19 GetAllPartyInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInChannel \
    --channelName 'blVCUYUv' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 19 'GetAllPartyInChannel' test.out

#- 20 GetAllSessionsInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllSessionsInChannel \
    --channelName 'Zbu3rkPl' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 20 'GetAllSessionsInChannel' test.out

#- 21 AddUserIntoSessionInChannel
# body param: body
echo '{"blocked_players": ["CfKs8ksv", "WQBsnpAL", "G7MhN0No"], "party_id": "fxi0Obvz", "user_id": "ZNzlqDTg"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op AddUserIntoSessionInChannel \
    --channelName 'ZwtYHoMZ' \
    --matchID '1eHH2jYa' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AddUserIntoSessionInChannel' test.out

#- 22 DeleteSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteSessionInChannel \
    --channelName 'rhGcEvLk' \
    --matchID 'Di1SBZ8q' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 22 'DeleteSessionInChannel' test.out

#- 23 DeleteUserFromSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteUserFromSessionInChannel \
    --channelName 'x2fViaiq' \
    --matchID 'gPvJ0sKH' \
    --namespace $AB_NAMESPACE \
    --userID 'l62WFVUf' \
    > test.out 2>&1
eval_tap $? 23 'DeleteUserFromSessionInChannel' test.out

#- 24 SearchSessions
eval_tap 0 24 'SearchSessions # SKIP deprecated' test.out

#- 25 GetSessionHistoryDetailed
eval_tap 0 25 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 26 PublicGetMessages
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetMessages \
    > test.out 2>&1
eval_tap $? 26 'PublicGetMessages' test.out

#- 27 PublicGetAllMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetAllMatchmakingChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 27 'PublicGetAllMatchmakingChannel' test.out

#- 28 PublicGetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetSingleMatchmakingChannel \
    --channelName '8eAz0zKA' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 28 'PublicGetSingleMatchmakingChannel' test.out

#- 29 SearchSessionsV2
eval_tap 0 29 'SearchSessionsV2 # SKIP deprecated' test.out

#- 30 VersionCheckHandler
$CLI_EXE \
    --sn matchmaking \
    --op VersionCheckHandler \
    > test.out 2>&1
eval_tap $? 30 'VersionCheckHandler' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE