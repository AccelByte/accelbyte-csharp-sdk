#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..30"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn matchmaking \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$CLI_EXE \
    --sn matchmaking \
    --op HandlerV3Healthz \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$CLI_EXE \
    --sn matchmaking \
    --op GetAllChannelsHandler \
    --namespace $AB_NAMESPACE \
    --limit '5' \
    --offset '27' \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
# body param: body
echo '{"deployment": "eAQBVyO9", "description": "K07y0wEN", "find_match_timeout_seconds": 77, "game_mode": "QtK44Qcw", "joinable": false, "max_delay_ms": 60, "rule_set": {"alliance": {"combination": {"alliances": [{"max": 6, "min": 70, "name": "65dvuAL2"}, {"max": 77, "min": 51, "name": "XwcsAVp2"}, {"max": 96, "min": 22, "name": "Xon4jHSV"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 56, "role_flexing_second": 91}, "max_number": 38, "min_number": 53, "player_max_number": 97, "player_min_number": 1}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 87, "min": 73, "name": "zFKSVv0s"}, {"max": 26, "min": 67, "name": "aNrjCvaT"}, {"max": 51, "min": 42, "name": "d1lEVIGs"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 56, "role_flexing_second": 82}, "duration": 90, "max_number": 17, "min_number": 87, "player_max_number": 98, "player_min_number": 97}, {"combination": {"alliances": [{"max": 14, "min": 89, "name": "lpQDUS9W"}, {"max": 73, "min": 33, "name": "soAAnZJ5"}, {"max": 65, "min": 7, "name": "MdDb323Q"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 49, "role_flexing_second": 84}, "duration": 32, "max_number": 37, "min_number": 100, "player_max_number": 20, "player_min_number": 1}, {"combination": {"alliances": [{"max": 69, "min": 60, "name": "0jMVQvTL"}, {"max": 90, "min": 27, "name": "T5NKLLLI"}, {"max": 57, "min": 49, "name": "cLa24D7N"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 23, "role_flexing_second": 30}, "duration": 45, "max_number": 6, "min_number": 8, "player_max_number": 19, "player_min_number": 21}], "flexing_rule": [{"attribute": "gSX22uAm", "criteria": "38BZ5j0V", "duration": 52, "reference": 0.5585169923515458}, {"attribute": "5jpcpDD2", "criteria": "goFjJ4qX", "duration": 59, "reference": 0.016413408728560785}, {"attribute": "OJnq0UAw", "criteria": "lcJvTmhW", "duration": 66, "reference": 0.9326764171162228}], "match_options": {"options": [{"name": "nZzCKKtQ", "type": "t0xB8ogL"}, {"name": "AykZGQfC", "type": "5POrswLS"}, {"name": "AZlfbiNx", "type": "KswYrr24"}]}, "matching_rule": [{"attribute": "atiomw4P", "criteria": "8bP1Epra", "reference": 0.4167046683612692}, {"attribute": "p57KSRrX", "criteria": "nbmqI6dk", "reference": 0.3003110287371521}, {"attribute": "HLq1YyyV", "criteria": "DqOz5ARz", "reference": 0.8414382679421918}], "sub_game_modes": {"VkN14lVu": {"alliance": {"combination": {"alliances": [{"max": 100, "min": 9, "name": "OiQYjkdw"}, {"max": 35, "min": 45, "name": "WC96Mfqc"}, {"max": 47, "min": 7, "name": "T9GcRAnX"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 4, "role_flexing_second": 16}, "max_number": 2, "min_number": 1, "player_max_number": 73, "player_min_number": 19}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 98, "min": 25, "name": "TU40bp2m"}, {"max": 24, "min": 26, "name": "fCD13RmG"}, {"max": 81, "min": 47, "name": "Ds35kyQ7"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 52, "role_flexing_second": 64}, "duration": 19, "max_number": 97, "min_number": 61, "player_max_number": 31, "player_min_number": 56}, {"combination": {"alliances": [{"max": 78, "min": 2, "name": "9xpNRAcl"}, {"max": 6, "min": 46, "name": "uK9YmSQs"}, {"max": 53, "min": 34, "name": "XFjxkufR"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 51, "role_flexing_second": 38}, "duration": 32, "max_number": 69, "min_number": 5, "player_max_number": 21, "player_min_number": 69}, {"combination": {"alliances": [{"max": 38, "min": 1, "name": "BgvmJFQs"}, {"max": 66, "min": 57, "name": "5wJfFkdl"}, {"max": 92, "min": 48, "name": "Xl3VJqB9"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 100, "role_flexing_second": 11}, "duration": 3, "max_number": 67, "min_number": 60, "player_max_number": 6, "player_min_number": 35}], "name": "n9kHSE9Q"}, "GYXeoGBn": {"alliance": {"combination": {"alliances": [{"max": 38, "min": 6, "name": "7ojuQrzw"}, {"max": 2, "min": 20, "name": "BfLmqR3a"}, {"max": 61, "min": 66, "name": "Ox3k7GO4"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 8, "role_flexing_second": 98}, "max_number": 28, "min_number": 27, "player_max_number": 3, "player_min_number": 58}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 22, "min": 72, "name": "KsJsvAht"}, {"max": 32, "min": 76, "name": "N32tDJwc"}, {"max": 41, "min": 7, "name": "sLJYVRxD"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 27, "role_flexing_second": 40}, "duration": 5, "max_number": 45, "min_number": 68, "player_max_number": 17, "player_min_number": 12}, {"combination": {"alliances": [{"max": 74, "min": 36, "name": "2rjlDiOm"}, {"max": 87, "min": 84, "name": "Ic2SqBJ5"}, {"max": 9, "min": 92, "name": "cIBRUkVt"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 41, "role_flexing_second": 88}, "duration": 23, "max_number": 37, "min_number": 63, "player_max_number": 14, "player_min_number": 14}, {"combination": {"alliances": [{"max": 35, "min": 91, "name": "qniCFmFp"}, {"max": 66, "min": 53, "name": "vBHMg5ke"}, {"max": 79, "min": 50, "name": "TgaUvEtj"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 22, "role_flexing_second": 56}, "duration": 39, "max_number": 10, "min_number": 17, "player_max_number": 17, "player_min_number": 11}], "name": "hW8csDkZ"}, "P53aBcAl": {"alliance": {"combination": {"alliances": [{"max": 78, "min": 67, "name": "akRLuQUz"}, {"max": 8, "min": 100, "name": "m7O4HIRR"}, {"max": 91, "min": 49, "name": "udM7aHPz"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 74, "role_flexing_second": 100}, "max_number": 48, "min_number": 86, "player_max_number": 19, "player_min_number": 96}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 20, "min": 94, "name": "4fFUfe36"}, {"max": 60, "min": 61, "name": "Vf2KlSuX"}, {"max": 41, "min": 43, "name": "YxiCE4CB"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 76, "role_flexing_second": 66}, "duration": 95, "max_number": 64, "min_number": 2, "player_max_number": 25, "player_min_number": 2}, {"combination": {"alliances": [{"max": 10, "min": 21, "name": "T93j6vfD"}, {"max": 61, "min": 3, "name": "ijIc3PJp"}, {"max": 71, "min": 93, "name": "x0X7Zvdu"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 2, "role_flexing_second": 45}, "duration": 95, "max_number": 12, "min_number": 48, "player_max_number": 66, "player_min_number": 62}, {"combination": {"alliances": [{"max": 59, "min": 85, "name": "4fjG4M9z"}, {"max": 64, "min": 74, "name": "LYVnFrrG"}, {"max": 49, "min": 39, "name": "I633dmtu"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 24, "role_flexing_second": 99}, "duration": 80, "max_number": 21, "min_number": 94, "player_max_number": 57, "player_min_number": 14}], "name": "iwWL4yEB"}}}, "session_queue_timeout_seconds": 43, "social_matchmaking": true, "use_sub_gamemode": true}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateChannelHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 DeleteChannelHandler
$CLI_EXE \
    --sn matchmaking \
    --op DeleteChannelHandler \
    --channel 'Bz20emB8' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'DeleteChannelHandler' test.out

#- 7 StoreMatchResults
# body param: body
echo '{"match_id": "BImkerfn", "players": [{"results": [{"attribute": "IS2dDRHw", "value": 0.86326277997923}, {"attribute": "UjjgwJoH", "value": 0.020942682895426}, {"attribute": "vd4vpskN", "value": 0.3303525974909507}], "user_id": "kbJU1iTq"}, {"results": [{"attribute": "6EjaG82m", "value": 0.05976230967437135}, {"attribute": "hS5zfwnV", "value": 0.3870973252693667}, {"attribute": "GrOdx13U", "value": 0.9416202903991442}], "user_id": "S032hSXM"}, {"results": [{"attribute": "iSOuOEs2", "value": 0.4395897360162718}, {"attribute": "GYpq5LQN", "value": 0.8831805774894015}, {"attribute": "BWfK3jV0", "value": 0.44671940534953636}], "user_id": "itoBg7Bn"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op StoreMatchResults \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'StoreMatchResults' test.out

#- 8 Rebalance
# body param: body
echo '{"match_id": "hRP2gIiz"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op Rebalance \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'Rebalance' test.out

#- 9 QueueSessionHandler
# body param: body
echo '{"channel": "oDHauV8L", "client_version": "kQ6316Jz", "deployment": "R5bEWfQj", "error_code": 35, "error_message": "dW38Qmjh", "game_mode": "aIy3tmK8", "joinable": true, "match_id": "tFpzgi4o", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 28, "party_attributes": {"uJJNa8D0": {}, "cHLrN4EU": {}, "DvZMlFEW": {}}, "party_id": "GXxk7exG", "party_members": [{"extra_attributes": {"O0QzkFzQ": {}, "1eV5IUxP": {}, "vYzNBofA": {}}, "user_id": "lEbBTbFc"}, {"extra_attributes": {"xd6gmSIW": {}, "Z6sXcGsF": {}, "iHkhXZah": {}}, "user_id": "YjE213ZK"}, {"extra_attributes": {"AZEgLet2": {}, "9h8pAsUI": {}, "CgqGcgGH": {}}, "user_id": "uKEBtg7v"}], "ticket_id": "dnnpBelj"}, {"first_ticket_created_at": 72, "party_attributes": {"b8Q59y9g": {}, "kBrW9Kig": {}, "R3lAcwGC": {}}, "party_id": "ExioxJrf", "party_members": [{"extra_attributes": {"4IR7P0Kb": {}, "c56srQ9b": {}, "Lso7qV4a": {}}, "user_id": "17KfB46b"}, {"extra_attributes": {"fKqBnGDG": {}, "cNtf1FH2": {}, "T7ExoAqq": {}}, "user_id": "uzuPHxbd"}, {"extra_attributes": {"3Lv4bnwv": {}, "B338hvCs": {}, "8hg8NbcP": {}}, "user_id": "EJyFbPhy"}], "ticket_id": "u3FXpB3j"}, {"first_ticket_created_at": 35, "party_attributes": {"aaZzyn0i": {}, "tXQllF31": {}, "ZfjfvtVa": {}}, "party_id": "KqofG4Je", "party_members": [{"extra_attributes": {"iHKGZcyH": {}, "xdc3MiB4": {}, "bIidKSbh": {}}, "user_id": "L7bijij5"}, {"extra_attributes": {"ak27Ars0": {}, "ZOSpIHVu": {}, "3UCEwTB5": {}}, "user_id": "FoURC1NA"}, {"extra_attributes": {"QHRch4J2": {}, "qGytW8CE": {}, "e5yUhm83": {}}, "user_id": "JYOtryzk"}], "ticket_id": "M7d0oIZL"}]}, {"matching_parties": [{"first_ticket_created_at": 17, "party_attributes": {"gu1vaJ6S": {}, "IaZW2mQB": {}, "s6E2K7Rm": {}}, "party_id": "xsRHis3P", "party_members": [{"extra_attributes": {"zDfWM0tw": {}, "0KDa7GKN": {}, "lbrKiGqs": {}}, "user_id": "hnewlbnN"}, {"extra_attributes": {"XUn9dhwI": {}, "48UMaTom": {}, "Erz5gYXk": {}}, "user_id": "KYXAqDKP"}, {"extra_attributes": {"NL0vtVX2": {}, "OpCSQEQW": {}, "bVPTPRy7": {}}, "user_id": "K8fu4yZ5"}], "ticket_id": "ypMW9Ptr"}, {"first_ticket_created_at": 26, "party_attributes": {"8c9lthZh": {}, "GLFPYSJF": {}, "vPrSCEmb": {}}, "party_id": "lYMT8Pxj", "party_members": [{"extra_attributes": {"bSz33X3K": {}, "lyjB2pQF": {}, "JsK0BGCb": {}}, "user_id": "EtXDRI1z"}, {"extra_attributes": {"ug1p7Kdl": {}, "ItUc7V6n": {}, "aQky0q87": {}}, "user_id": "JR6HIgfD"}, {"extra_attributes": {"pU2nVFcX": {}, "Xny90gbM": {}, "ZTwBG1GC": {}}, "user_id": "f5srrGy5"}], "ticket_id": "w8MJx8ui"}, {"first_ticket_created_at": 21, "party_attributes": {"zCjQKM7T": {}, "rfCZ1qIJ": {}, "6xErt66x": {}}, "party_id": "YjNhGe3K", "party_members": [{"extra_attributes": {"gRyMMV6C": {}, "qBaP07HJ": {}, "yLCeLjmR": {}}, "user_id": "1D9GJN6U"}, {"extra_attributes": {"MT39AuNx": {}, "NBP3pbCP": {}, "MM3q4qCH": {}}, "user_id": "Fsm0Zl3N"}, {"extra_attributes": {"xIZANlxf": {}, "YvWfJGJt": {}, "H6FLLAN4": {}}, "user_id": "kRsLfM5l"}], "ticket_id": "S4bsGqOz"}]}, {"matching_parties": [{"first_ticket_created_at": 40, "party_attributes": {"I9cghB54": {}, "Bh7q54bu": {}, "0yyeGUfd": {}}, "party_id": "bow1ZXia", "party_members": [{"extra_attributes": {"9IpoeX7h": {}, "J5TCW5Sc": {}, "8QRy15XK": {}}, "user_id": "lv4SHgwa"}, {"extra_attributes": {"kO0knfPy": {}, "ntuUbq0C": {}, "Az7JU4h0": {}}, "user_id": "EYTI68sq"}, {"extra_attributes": {"m8miM32u": {}, "tLtXWJ5g": {}, "coz6Xe5R": {}}, "user_id": "A4N2iHSE"}], "ticket_id": "0MLFtC9Y"}, {"first_ticket_created_at": 3, "party_attributes": {"zJHGVR1m": {}, "msxpK3X4": {}, "ljf72gXV": {}}, "party_id": "FtxYfpIh", "party_members": [{"extra_attributes": {"ybfZAGi8": {}, "oz60AubW": {}, "naZrpgWe": {}}, "user_id": "H0I5jaKg"}, {"extra_attributes": {"GrnpkuK5": {}, "UoOkxr6Q": {}, "5TDdZA1T": {}}, "user_id": "yX0OdEHY"}, {"extra_attributes": {"5BeeSIfM": {}, "fq0TdnGI": {}, "ptCKfGiV": {}}, "user_id": "yDQGDNRB"}], "ticket_id": "bdyWRK5o"}, {"first_ticket_created_at": 29, "party_attributes": {"Es29LTzg": {}, "lvQaWPza": {}, "2hoA8QBF": {}}, "party_id": "pGxISEkn", "party_members": [{"extra_attributes": {"q69dAHNG": {}, "69r2XIIa": {}, "2yDuJfIf": {}}, "user_id": "kCOLa8MZ"}, {"extra_attributes": {"zmtCqctA": {}, "zQtcY3JZ": {}, "rLzMWFCF": {}}, "user_id": "FN9sEr2v"}, {"extra_attributes": {"Oe7HeMc2": {}, "8QT1QWvA": {}, "JwfM9DeP": {}}, "user_id": "6EJBd9QL"}], "ticket_id": "L2H4E9pB"}]}], "namespace": "D9yCyDoC", "party_attributes": {"sh7WSV89": {}, "8ldXoVOw": {}, "6L69q9OR": {}}, "party_id": "OmTtIzab", "queued_at": 62, "region": "8igL7Ekz", "server_name": "rQoZLCuO", "status": "MVrW3pKm", "ticket_id": "0hCDU0aY", "updated_at": "1997-04-29T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op QueueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'QueueSessionHandler' test.out

#- 10 DequeueSessionHandler
# body param: body
echo '{"match_id": "BZXG6zsx"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op DequeueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'DequeueSessionHandler' test.out

#- 11 QuerySessionHandler
$CLI_EXE \
    --sn matchmaking \
    --op QuerySessionHandler \
    --matchID '6oxaFGx1' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'QuerySessionHandler' test.out

#- 12 UpdatePlayTimeWeight
# body param: body
echo '{"playtime": 11, "userID": "w21NE3tH", "weight": 0.31398351907639355}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdatePlayTimeWeight \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'UpdatePlayTimeWeight' test.out

#- 13 GetAllPartyInAllChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInAllChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'GetAllPartyInAllChannel' test.out

#- 14 BulkGetSessions
$CLI_EXE \
    --sn matchmaking \
    --op BulkGetSessions \
    --namespace $AB_NAMESPACE \
    --matchIDs 'KoN9t88P' \
    > test.out 2>&1
eval_tap $? 14 'BulkGetSessions' test.out

#- 15 ExportChannels
$CLI_EXE \
    --sn matchmaking \
    --op ExportChannels \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 15 'ExportChannels' test.out

#- 16 ImportChannels
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn matchmaking \
    --op ImportChannels \
    --namespace $AB_NAMESPACE \
    --upload $TEMP_FILE_UPLOAD \
    --strategy 'cDBmd7l8' \
    > test.out 2>&1
eval_tap $? 16 'ImportChannels' test.out

#- 17 GetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetSingleMatchmakingChannel \
    --channelName 'n4Jx5yI5' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 17 'GetSingleMatchmakingChannel' test.out

#- 18 UpdateMatchmakingChannel
# body param: body
echo '{"deployment": "tY3Gl7ap", "description": "tJQRx0gZ", "findMatchTimeoutSeconds": 85, "joinable": true, "max_delay_ms": 98, "ruleSet": {"alliance": {"combination": {"alliances": [{"max": 19, "min": 8, "name": "mFxadUwZ"}, {"max": 62, "min": 46, "name": "U3t9xFlt"}, {"max": 10, "min": 2, "name": "RbSn4Iyp"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 21, "role_flexing_second": 70}, "maxNumber": 57, "minNumber": 48, "playerMaxNumber": 5, "playerMinNumber": 81}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 33, "min": 84, "name": "SojZPDEu"}, {"max": 24, "min": 6, "name": "hzGqxWyy"}, {"max": 71, "min": 38, "name": "WOiJxGVp"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 90, "role_flexing_second": 15}, "duration": 47, "max_number": 28, "min_number": 88, "player_max_number": 79, "player_min_number": 70}, {"combination": {"alliances": [{"max": 55, "min": 100, "name": "gwvMZRAr"}, {"max": 83, "min": 17, "name": "EXuCMu6H"}, {"max": 1, "min": 95, "name": "qosrGZLC"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 42, "role_flexing_second": 75}, "duration": 44, "max_number": 1, "min_number": 63, "player_max_number": 26, "player_min_number": 57}, {"combination": {"alliances": [{"max": 27, "min": 0, "name": "yF1ZOp0d"}, {"max": 67, "min": 40, "name": "maMdaxeR"}, {"max": 95, "min": 67, "name": "YJMSuEFC"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 12, "role_flexing_second": 4}, "duration": 68, "max_number": 76, "min_number": 3, "player_max_number": 97, "player_min_number": 40}], "flexingRules": [{"attribute": "6lxIqFJP", "criteria": "qbuouE4Q", "duration": 36, "reference": 0.49321017862680194}, {"attribute": "w7O0EWxa", "criteria": "IUk8rTnV", "duration": 90, "reference": 0.9865946034585055}, {"attribute": "JebMiRiE", "criteria": "sdgjQNw1", "duration": 55, "reference": 0.2850758234756917}], "match_options": {"options": [{"name": "xu68SD5b", "type": "29GYHqI4"}, {"name": "SEMJYqkO", "type": "UrEMbXan"}, {"name": "iMLxXVQz", "type": "Q5LIF8gt"}]}, "matchingRules": [{"attribute": "7lvG5p5Q", "criteria": "SEa3wcCf", "reference": 0.8422011734614256}, {"attribute": "91N6E2Ea", "criteria": "UjkhhW23", "reference": 0.4912028009112672}, {"attribute": "pizVPkCL", "criteria": "KFrDtzSv", "reference": 0.8930813384210405}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 16, "socialMatchmaking": false, "use_sub_gamemode": true}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdateMatchmakingChannel \
    --channelName 'qIer4PgR' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'UpdateMatchmakingChannel' test.out

#- 19 GetAllPartyInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInChannel \
    --channelName '9Y0EXFG9' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 19 'GetAllPartyInChannel' test.out

#- 20 GetAllSessionsInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllSessionsInChannel \
    --channelName 'QfYmKRrX' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 20 'GetAllSessionsInChannel' test.out

#- 21 AddUserIntoSessionInChannel
# body param: body
echo '{"blocked_players": ["t5R3rQWG", "rbJxcRPe", "aI6AwDoB"], "party_id": "7NXSnmn1", "user_id": "Z8R21hvq"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op AddUserIntoSessionInChannel \
    --channelName '2rp6Furx' \
    --matchID '3wtXBFmB' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AddUserIntoSessionInChannel' test.out

#- 22 DeleteSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteSessionInChannel \
    --channelName '54YvixcB' \
    --matchID 'KTrIjL8B' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 22 'DeleteSessionInChannel' test.out

#- 23 DeleteUserFromSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteUserFromSessionInChannel \
    --channelName 'YWgAygMO' \
    --matchID 'wenCPHfd' \
    --namespace $AB_NAMESPACE \
    --userID 'R3DeEWD0' \
    > test.out 2>&1
eval_tap $? 23 'DeleteUserFromSessionInChannel' test.out

#- 24 SearchSessions
eval_tap 0 24 'SearchSessions # SKIP deprecated' test.out

#- 25 GetSessionHistoryDetailed
eval_tap 0 25 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 26 PublicGetMessages
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetMessages \
    > test.out 2>&1
eval_tap $? 26 'PublicGetMessages' test.out

#- 27 PublicGetAllMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetAllMatchmakingChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 27 'PublicGetAllMatchmakingChannel' test.out

#- 28 PublicGetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetSingleMatchmakingChannel \
    --channelName 'fz6Pl8t4' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 28 'PublicGetSingleMatchmakingChannel' test.out

#- 29 SearchSessionsV2
eval_tap 0 29 'SearchSessionsV2 # SKIP deprecated' test.out

#- 30 VersionCheckHandler
$CLI_EXE \
    --sn matchmaking \
    --op VersionCheckHandler \
    > test.out 2>&1
eval_tap $? 30 'VersionCheckHandler' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE