#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..30"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn matchmaking \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$CLI_EXE \
    --sn matchmaking \
    --op HandlerV3Healthz \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$CLI_EXE \
    --sn matchmaking \
    --op GetAllChannelsHandler \
    --namespace $AB_NAMESPACE \
    --limit '29' \
    --offset '46' \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
# body param: body
echo '{"deployment": "4mSeppNB", "description": "yYmu6Lyo", "find_match_timeout_seconds": 82, "game_mode": "xrY7vPHb", "joinable": true, "max_delay_ms": 45, "rule_set": {"alliance": {"combination": {"alliances": [{"max": 34, "min": 77, "name": "KLLm1xYz"}, {"max": 61, "min": 77, "name": "OhllrQzL"}, {"max": 10, "min": 2, "name": "YBNxjoPw"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 53, "role_flexing_second": 42}, "max_number": 45, "min_number": 16, "player_max_number": 11, "player_min_number": 31}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 72, "min": 10, "name": "63UP1SxO"}, {"max": 31, "min": 24, "name": "1F0AuaqC"}, {"max": 79, "min": 77, "name": "e99V6fFd"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 16, "role_flexing_second": 76}, "duration": 70, "max_number": 32, "min_number": 25, "player_max_number": 26, "player_min_number": 5}, {"combination": {"alliances": [{"max": 19, "min": 16, "name": "OLqovRZj"}, {"max": 1, "min": 72, "name": "OreGaPq9"}, {"max": 13, "min": 18, "name": "OLh10W0H"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 63, "role_flexing_second": 26}, "duration": 22, "max_number": 95, "min_number": 49, "player_max_number": 69, "player_min_number": 98}, {"combination": {"alliances": [{"max": 69, "min": 0, "name": "ygPU8Lqd"}, {"max": 63, "min": 28, "name": "ZhzTJQF8"}, {"max": 61, "min": 54, "name": "xlY0LVo9"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 20, "role_flexing_second": 79}, "duration": 59, "max_number": 20, "min_number": 85, "player_max_number": 84, "player_min_number": 27}], "flexing_rule": [{"attribute": "I3GhZN4T", "criteria": "9Esr9nKC", "duration": 92, "reference": 0.8798716955855949}, {"attribute": "n9U27b2q", "criteria": "AT8JD9M3", "duration": 49, "reference": 0.5758746679130977}, {"attribute": "Im964cwM", "criteria": "83obBgJO", "duration": 82, "reference": 0.4665372404226018}], "match_options": {"options": [{"name": "7Pbw4VBa", "type": "pFVQQwgS"}, {"name": "3z9208HE", "type": "hy1RmSDl"}, {"name": "lqnQGs0K", "type": "L3zdkXGZ"}]}, "matching_rule": [{"attribute": "BmukLH6H", "criteria": "iX9Zn18U", "reference": 0.4347414367297837}, {"attribute": "lD47YV3H", "criteria": "3bY43PHV", "reference": 0.33658759542819205}, {"attribute": "x3SLDAGF", "criteria": "SQeIZsBe", "reference": 0.1279703011224762}], "rebalance_enable": true, "sub_game_modes": {"CjyxT6kZ": {"alliance": {"combination": {"alliances": [{"max": 49, "min": 0, "name": "PzykK8ak"}, {"max": 37, "min": 27, "name": "BjxsckN5"}, {"max": 88, "min": 29, "name": "9NuUNKgS"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 67, "role_flexing_second": 48}, "max_number": 23, "min_number": 41, "player_max_number": 36, "player_min_number": 72}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 30, "min": 58, "name": "YN1xwJ8i"}, {"max": 61, "min": 41, "name": "CrCs6471"}, {"max": 80, "min": 58, "name": "pXk87cYw"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 75, "role_flexing_second": 87}, "duration": 58, "max_number": 74, "min_number": 2, "player_max_number": 46, "player_min_number": 26}, {"combination": {"alliances": [{"max": 13, "min": 34, "name": "iiAUuedD"}, {"max": 46, "min": 51, "name": "UZO0wn0r"}, {"max": 7, "min": 98, "name": "0HvETEmP"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 34, "role_flexing_second": 3}, "duration": 30, "max_number": 49, "min_number": 81, "player_max_number": 77, "player_min_number": 21}, {"combination": {"alliances": [{"max": 95, "min": 98, "name": "xo1qZu2B"}, {"max": 11, "min": 57, "name": "EZemHPPl"}, {"max": 87, "min": 80, "name": "eVffk7rn"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 90, "role_flexing_second": 9}, "duration": 95, "max_number": 52, "min_number": 54, "player_max_number": 4, "player_min_number": 88}], "name": "I4xGwujq"}, "9lc2dbAK": {"alliance": {"combination": {"alliances": [{"max": 100, "min": 6, "name": "Sl1I0mwM"}, {"max": 94, "min": 30, "name": "LzFJ804P"}, {"max": 1, "min": 68, "name": "VZZBiBh1"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 56, "role_flexing_second": 48}, "max_number": 12, "min_number": 40, "player_max_number": 1, "player_min_number": 52}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 100, "min": 59, "name": "4Rx9Ws6V"}, {"max": 97, "min": 51, "name": "Ey6Tl8oG"}, {"max": 53, "min": 95, "name": "cw4xqjt5"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 13, "role_flexing_second": 70}, "duration": 33, "max_number": 42, "min_number": 25, "player_max_number": 32, "player_min_number": 15}, {"combination": {"alliances": [{"max": 50, "min": 45, "name": "xt5tlCbR"}, {"max": 88, "min": 19, "name": "ehktM5Pa"}, {"max": 54, "min": 17, "name": "Zbh3mUPc"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 89, "role_flexing_second": 25}, "duration": 59, "max_number": 62, "min_number": 7, "player_max_number": 62, "player_min_number": 41}, {"combination": {"alliances": [{"max": 11, "min": 86, "name": "5tgF7a84"}, {"max": 21, "min": 50, "name": "wA5OOnwe"}, {"max": 39, "min": 47, "name": "DD305dxO"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 100, "role_flexing_second": 2}, "duration": 99, "max_number": 17, "min_number": 46, "player_max_number": 9, "player_min_number": 40}], "name": "l9966jq3"}, "dGvoZNgk": {"alliance": {"combination": {"alliances": [{"max": 26, "min": 70, "name": "7yrUl0bt"}, {"max": 82, "min": 32, "name": "6uWdqnRx"}, {"max": 4, "min": 93, "name": "Z2bAmV2o"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 11, "role_flexing_second": 67}, "max_number": 71, "min_number": 67, "player_max_number": 76, "player_min_number": 4}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 80, "min": 89, "name": "6A2XSVPq"}, {"max": 92, "min": 34, "name": "v2PNgSWJ"}, {"max": 44, "min": 92, "name": "7thCrgkO"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 57, "role_flexing_second": 95}, "duration": 66, "max_number": 100, "min_number": 95, "player_max_number": 13, "player_min_number": 58}, {"combination": {"alliances": [{"max": 35, "min": 61, "name": "VuUXOCDz"}, {"max": 57, "min": 23, "name": "twR2Pf22"}, {"max": 35, "min": 42, "name": "3hCTbT2f"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 93, "role_flexing_second": 13}, "duration": 15, "max_number": 5, "min_number": 60, "player_max_number": 52, "player_min_number": 0}, {"combination": {"alliances": [{"max": 59, "min": 85, "name": "4mbISjpV"}, {"max": 3, "min": 10, "name": "ZmIkDBDz"}, {"max": 72, "min": 70, "name": "7LLGuTJ9"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 5, "role_flexing_second": 20}, "duration": 100, "max_number": 79, "min_number": 35, "player_max_number": 31, "player_min_number": 78}], "name": "OlZENQ6n"}}}, "session_queue_timeout_seconds": 18, "social_matchmaking": true, "use_sub_gamemode": false}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateChannelHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 DeleteChannelHandler
$CLI_EXE \
    --sn matchmaking \
    --op DeleteChannelHandler \
    --channel 'yfCyjCug' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'DeleteChannelHandler' test.out

#- 7 StoreMatchResults
# body param: body
echo '{"match_id": "R2vLCIID", "players": [{"results": [{"attribute": "e4fWtHJI", "value": 0.18968643609230873}, {"attribute": "CuBN8sW8", "value": 0.7262215872320271}, {"attribute": "Nt1aTMYj", "value": 0.538207670239498}], "user_id": "ZKBbkvTX"}, {"results": [{"attribute": "Ca8IjjWz", "value": 0.5109853224804387}, {"attribute": "X1ipl8it", "value": 0.7940377443244266}, {"attribute": "3Mshoi1U", "value": 0.6471420721585335}], "user_id": "RxroJXwx"}, {"results": [{"attribute": "ldVLLoDc", "value": 0.2908622026987835}, {"attribute": "7P4TQssE", "value": 0.2046162133621311}, {"attribute": "OLcb34mo", "value": 0.43229621311440825}], "user_id": "pwqx6rGU"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op StoreMatchResults \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'StoreMatchResults' test.out

#- 8 Rebalance
# body param: body
echo '{"match_id": "d8CKRgJ2"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op Rebalance \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'Rebalance' test.out

#- 9 QueueSessionHandler
# body param: body
echo '{"channel": "wriFdN4N", "client_version": "k1xMU5fS", "deployment": "h4Rtwdcx", "error_code": 50, "error_message": "YQ2PT0Rj", "game_mode": "5iHBOzrx", "joinable": true, "match_id": "hbfxWwAW", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 87, "party_attributes": {"tuUw2VhH": {}, "tqFpFmIw": {}, "lQWhuX4w": {}}, "party_id": "LGNJbV0M", "party_members": [{"extra_attributes": {"DRFAkZjy": {}, "fEGA6VvJ": {}, "R9K5gJy9": {}}, "user_id": "5qNM81ZQ"}, {"extra_attributes": {"lpSBnTUx": {}, "vYIdFE1G": {}, "D8L346XJ": {}}, "user_id": "AnjvVjB0"}, {"extra_attributes": {"SDB3yhdr": {}, "8SXRBXqL": {}, "oRsc3JnW": {}}, "user_id": "tys7xaDA"}], "ticket_id": "4BCSqP3X"}, {"first_ticket_created_at": 60, "party_attributes": {"8bBrryd8": {}, "RnqzsKrI": {}, "1hvNF12F": {}}, "party_id": "CfjMxpfA", "party_members": [{"extra_attributes": {"QVjkgZVR": {}, "OEHvwdy9": {}, "NFSeDVCt": {}}, "user_id": "BXeMISCs"}, {"extra_attributes": {"YgMMjLsD": {}, "z7iyf8Ek": {}, "Tg03wYSH": {}}, "user_id": "lvEsxl23"}, {"extra_attributes": {"pQJTRIym": {}, "qzw8acFT": {}, "qYklenXZ": {}}, "user_id": "hZ5IZTTr"}], "ticket_id": "OTgaBjh6"}, {"first_ticket_created_at": 5, "party_attributes": {"V8HIGsXS": {}, "y0uDzC7V": {}, "bwyWyum5": {}}, "party_id": "IBvDw3F1", "party_members": [{"extra_attributes": {"1UZ5TGRM": {}, "ewXTDxKK": {}, "p4CKK4w4": {}}, "user_id": "8tLSfPRs"}, {"extra_attributes": {"D44Lclox": {}, "2E4NUJAu": {}, "sz2oZKOA": {}}, "user_id": "kzzcJqcg"}, {"extra_attributes": {"o60fVYDk": {}, "HibBdQDM": {}, "d9BE1vz4": {}}, "user_id": "rDSW9hLC"}], "ticket_id": "g8B7XYqt"}]}, {"matching_parties": [{"first_ticket_created_at": 71, "party_attributes": {"oStd8Evv": {}, "7vOom3Se": {}, "UDOcZouZ": {}}, "party_id": "UVI6CFRa", "party_members": [{"extra_attributes": {"YMu4oIrg": {}, "fr9kR6W8": {}, "UwoYTdDS": {}}, "user_id": "KJBAWrXC"}, {"extra_attributes": {"c9ylnszE": {}, "9cblQGrn": {}, "NQXNQ5yP": {}}, "user_id": "EC1IUpaC"}, {"extra_attributes": {"VJlvvyj8": {}, "UuwB2UPe": {}, "Lt2l5hpg": {}}, "user_id": "KDfj8fvw"}], "ticket_id": "DKb13THM"}, {"first_ticket_created_at": 96, "party_attributes": {"L9baZqZQ": {}, "IIUThJp9": {}, "HZPQuCGS": {}}, "party_id": "LCaHC87c", "party_members": [{"extra_attributes": {"Iem6bjfZ": {}, "GIV5WOO7": {}, "I85q1qOY": {}}, "user_id": "PLNpjUKN"}, {"extra_attributes": {"PfqlOqbP": {}, "iTpG642J": {}, "xfP8VkW3": {}}, "user_id": "tfJKOxZZ"}, {"extra_attributes": {"qBgJzCNX": {}, "zgv2AHVR": {}, "ZmeBA6Hq": {}}, "user_id": "ryXdDWPV"}], "ticket_id": "V67jyvrE"}, {"first_ticket_created_at": 31, "party_attributes": {"ntaxQcqC": {}, "9bCRzzHD": {}, "6ZwFfEvX": {}}, "party_id": "lBfsgVwJ", "party_members": [{"extra_attributes": {"lPKTIpGB": {}, "Y99dvgRI": {}, "PUlLh7Zd": {}}, "user_id": "JDdBjGeF"}, {"extra_attributes": {"7CtPGOG5": {}, "z50xehlL": {}, "vI8xc6BK": {}}, "user_id": "dbwMdMHs"}, {"extra_attributes": {"asddAaR3": {}, "qCwLD3sd": {}, "SXL9Enhz": {}}, "user_id": "rKPh82Al"}], "ticket_id": "j5v0HSxT"}]}, {"matching_parties": [{"first_ticket_created_at": 48, "party_attributes": {"IbHXl2hA": {}, "gfnxZPl4": {}, "YZpzk7t6": {}}, "party_id": "oRSrcoiK", "party_members": [{"extra_attributes": {"8qVw8eYh": {}, "QSg7iNkj": {}, "9JdG8ma1": {}}, "user_id": "darwBL2h"}, {"extra_attributes": {"5vLGXj1c": {}, "FE5hyh4b": {}, "IIPr9Tve": {}}, "user_id": "265NQxRb"}, {"extra_attributes": {"Qv7zW5Oq": {}, "YPbqhlwJ": {}, "6SN0O9zO": {}}, "user_id": "r8CVilQQ"}], "ticket_id": "w8ur2IIu"}, {"first_ticket_created_at": 44, "party_attributes": {"QwLRaLr7": {}, "uEdlubNn": {}, "KvQS1vn6": {}}, "party_id": "WBzKMdvE", "party_members": [{"extra_attributes": {"pIRSVfjs": {}, "iQyIPh4r": {}, "sNdJN2H6": {}}, "user_id": "k1pJUjfY"}, {"extra_attributes": {"18OQiKZJ": {}, "rvVqhe71": {}, "tL0wHHYE": {}}, "user_id": "1yZTWgvO"}, {"extra_attributes": {"Oqyb5x5H": {}, "hEywXDz2": {}, "lGgdbQ7J": {}}, "user_id": "horLqnTY"}], "ticket_id": "4aHqY8DF"}, {"first_ticket_created_at": 74, "party_attributes": {"Mpl4SlNt": {}, "Xs5hqAVA": {}, "bL2GAodr": {}}, "party_id": "GmzSdBzj", "party_members": [{"extra_attributes": {"NP2jZfWx": {}, "LSsqjfnF": {}, "3pmT5sQ4": {}}, "user_id": "q6nLNU9U"}, {"extra_attributes": {"KWtL1GKf": {}, "6eTwMF5z": {}, "fteu4CAX": {}}, "user_id": "OOpGNzwR"}, {"extra_attributes": {"f7QkiDBw": {}, "b1MvEcoJ": {}, "Sq83EkHb": {}}, "user_id": "vT7tUWKX"}], "ticket_id": "I30ZDQY2"}]}], "namespace": "VNnNOoPz", "party_attributes": {"SofqBAvE": {}, "ib8Fx4wD": {}, "BZcnoYNY": {}}, "party_id": "iagYnxON", "queued_at": 59, "region": "myIaMM9B", "server_name": "Ke0LA44S", "status": "m2aOfXvP", "ticket_id": "tHVQMUbQ", "updated_at": "1974-12-05T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op QueueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'QueueSessionHandler' test.out

#- 10 DequeueSessionHandler
# body param: body
echo '{"match_id": "OlaAEnA4"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op DequeueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'DequeueSessionHandler' test.out

#- 11 QuerySessionHandler
$CLI_EXE \
    --sn matchmaking \
    --op QuerySessionHandler \
    --matchID 'AQ7X5tNV' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'QuerySessionHandler' test.out

#- 12 UpdatePlayTimeWeight
# body param: body
echo '{"playtime": 70, "userID": "xrgTMWzX", "weight": 0.8933982658352081}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdatePlayTimeWeight \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'UpdatePlayTimeWeight' test.out

#- 13 GetAllPartyInAllChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInAllChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'GetAllPartyInAllChannel' test.out

#- 14 BulkGetSessions
$CLI_EXE \
    --sn matchmaking \
    --op BulkGetSessions \
    --namespace $AB_NAMESPACE \
    --matchIDs 'ZBEPRVqr' \
    > test.out 2>&1
eval_tap $? 14 'BulkGetSessions' test.out

#- 15 ExportChannels
$CLI_EXE \
    --sn matchmaking \
    --op ExportChannels \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 15 'ExportChannels' test.out

#- 16 ImportChannels
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn matchmaking \
    --op ImportChannels \
    --namespace $AB_NAMESPACE \
    --upload $TEMP_FILE_UPLOAD \
    --strategy '4kzHlju3' \
    > test.out 2>&1
eval_tap $? 16 'ImportChannels' test.out

#- 17 GetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetSingleMatchmakingChannel \
    --channelName '7rL6qYmK' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 17 'GetSingleMatchmakingChannel' test.out

#- 18 UpdateMatchmakingChannel
# body param: body
echo '{"deployment": "O1Yp4s5v", "description": "yL9K698i", "findMatchTimeoutSeconds": 90, "joinable": false, "max_delay_ms": 9, "ruleSet": {"alliance": {"combination": {"alliances": [{"max": 31, "min": 38, "name": "qGxy2jk1"}, {"max": 98, "min": 10, "name": "mS012CWP"}, {"max": 74, "min": 97, "name": "JAhuDovZ"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 17, "role_flexing_second": 50}, "maxNumber": 38, "minNumber": 98, "playerMaxNumber": 48, "playerMinNumber": 89}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 95, "min": 87, "name": "cpDPC30o"}, {"max": 42, "min": 20, "name": "J2PMxBrN"}, {"max": 98, "min": 84, "name": "HYWdJ3qw"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 59, "role_flexing_second": 12}, "duration": 35, "max_number": 41, "min_number": 32, "player_max_number": 48, "player_min_number": 3}, {"combination": {"alliances": [{"max": 39, "min": 21, "name": "WS7u1sYt"}, {"max": 88, "min": 84, "name": "cPJxO46D"}, {"max": 12, "min": 50, "name": "R5jdSoEQ"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 63, "role_flexing_second": 97}, "duration": 37, "max_number": 48, "min_number": 98, "player_max_number": 4, "player_min_number": 24}, {"combination": {"alliances": [{"max": 17, "min": 86, "name": "kc21lKOT"}, {"max": 95, "min": 48, "name": "Vrv62I6h"}, {"max": 75, "min": 53, "name": "EJXyzadR"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 44, "role_flexing_second": 58}, "duration": 60, "max_number": 24, "min_number": 47, "player_max_number": 59, "player_min_number": 97}], "flexingRules": [{"attribute": "r46GhXc9", "criteria": "9uBvweFi", "duration": 18, "reference": 0.5007707343721188}, {"attribute": "x6CjjPtd", "criteria": "bTZgWumN", "duration": 14, "reference": 0.49109893694138185}, {"attribute": "OfiPvipq", "criteria": "XspGEj7o", "duration": 75, "reference": 0.0797304638499905}], "match_options": {"options": [{"name": "aAGaq7gT", "type": "jBTiOdXO"}, {"name": "ekyED43y", "type": "V32fRkdp"}, {"name": "YpiEXqFA", "type": "8gWY2OEt"}]}, "matchingRules": [{"attribute": "acPY1tKQ", "criteria": "3tUBC3Ie", "reference": 0.5145207213887134}, {"attribute": "Ekv0FtmH", "criteria": "hyZm35nz", "reference": 0.7386129754877666}, {"attribute": "mtO9KFc8", "criteria": "dGP2vwkN", "reference": 0.5378854313097565}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 54, "socialMatchmaking": true, "use_sub_gamemode": false}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdateMatchmakingChannel \
    --channelName 'mZjyER2h' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'UpdateMatchmakingChannel' test.out

#- 19 GetAllPartyInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInChannel \
    --channelName 'Upf8ulbz' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 19 'GetAllPartyInChannel' test.out

#- 20 GetAllSessionsInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllSessionsInChannel \
    --channelName 'jZGAoJJ1' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 20 'GetAllSessionsInChannel' test.out

#- 21 AddUserIntoSessionInChannel
# body param: body
echo '{"blocked_players": ["paraahCT", "AfoKXHn5", "c3epRHzo"], "party_id": "X75vGcu1", "user_id": "GlKT99Pr"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op AddUserIntoSessionInChannel \
    --channelName 'HW5ETHoW' \
    --matchID 'X8YqxYiI' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AddUserIntoSessionInChannel' test.out

#- 22 DeleteSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteSessionInChannel \
    --channelName 'gBrnmS72' \
    --matchID 'R08QmSsN' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 22 'DeleteSessionInChannel' test.out

#- 23 DeleteUserFromSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteUserFromSessionInChannel \
    --channelName 'RuLqjmZ8' \
    --matchID 'ySDNk7wt' \
    --namespace $AB_NAMESPACE \
    --userID 'OLtOuZOI' \
    > test.out 2>&1
eval_tap $? 23 'DeleteUserFromSessionInChannel' test.out

#- 24 SearchSessions
eval_tap 0 24 'SearchSessions # SKIP deprecated' test.out

#- 25 GetSessionHistoryDetailed
eval_tap 0 25 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 26 PublicGetMessages
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetMessages \
    > test.out 2>&1
eval_tap $? 26 'PublicGetMessages' test.out

#- 27 PublicGetAllMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetAllMatchmakingChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 27 'PublicGetAllMatchmakingChannel' test.out

#- 28 PublicGetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetSingleMatchmakingChannel \
    --channelName 'UfewEr9S' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 28 'PublicGetSingleMatchmakingChannel' test.out

#- 29 SearchSessionsV2
eval_tap 0 29 'SearchSessionsV2 # SKIP deprecated' test.out

#- 30 VersionCheckHandler
$CLI_EXE \
    --sn matchmaking \
    --op VersionCheckHandler \
    > test.out 2>&1
eval_tap $? 30 'VersionCheckHandler' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE