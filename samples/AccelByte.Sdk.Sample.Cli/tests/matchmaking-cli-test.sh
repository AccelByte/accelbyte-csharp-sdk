#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..39"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn matchmaking \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$CLI_EXE \
    --sn matchmaking \
    --op HandlerV3Healthz \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$CLI_EXE \
    --sn matchmaking \
    --op GetAllChannelsHandler \
    --namespace $AB_NAMESPACE \
    --limit '2' \
    --offset '56' \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
# body param: body
echo '{"deployment": "i3wMWnoZgIhwb8YY", "description": "MLqpQwkRRHkaiKsm", "find_match_timeout_seconds": 71, "game_mode": "A7nkDeev2Oj060Hn", "joinable": false, "max_delay_ms": 7, "region_expansion_range_ms": 71, "region_expansion_rate_ms": 92, "region_latency_initial_range_ms": 0, "region_latency_max_ms": 3, "rule_set": {"alliance": {"combination": {"alliances": [[{"max": 5, "min": 65, "name": "LxkZs4233oQWoXFe"}, {"max": 34, "min": 75, "name": "euI2oMJ0cgAoGfXe"}, {"max": 32, "min": 6, "name": "E3r5AQUBqS8KtTYZ"}], [{"max": 77, "min": 4, "name": "J58QqcV3IcuNs9MF"}, {"max": 57, "min": 17, "name": "T2KD18yrWorpC65V"}, {"max": 73, "min": 11, "name": "h4q1z1KJmKedBfbW"}], [{"max": 43, "min": 19, "name": "Ka5Ou124TsbQsxYF"}, {"max": 48, "min": 67, "name": "GGHrfQkgXkiA5IZP"}, {"max": 34, "min": 11, "name": "Cqp9vcyt67WAfWXf"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 58, "role_flexing_second": 45}, "max_number": 19, "min_number": 66, "player_max_number": 66, "player_min_number": 56}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 96, "min": 13, "name": "3tz8qIH4uRdNO08H"}, {"max": 82, "min": 46, "name": "6s9p8Y5c9eItJtiN"}, {"max": 26, "min": 47, "name": "Y3y3n2Rim4NBqhuN"}], [{"max": 40, "min": 5, "name": "j8FOvKZjs1tLpERf"}, {"max": 33, "min": 89, "name": "LzPoORBkRmZ0A2zy"}, {"max": 74, "min": 37, "name": "YCdfkfyt09ro5fHd"}], [{"max": 99, "min": 34, "name": "BZTYc5BsdSSVaAzz"}, {"max": 27, "min": 93, "name": "4GbgkKeCaS6qyUCs"}, {"max": 5, "min": 11, "name": "HXs8PlOBlfUOqv7W"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 57, "role_flexing_second": 42}, "duration": 76, "max_number": 33, "min_number": 95, "player_max_number": 5, "player_min_number": 99}, {"combination": {"alliances": [[{"max": 37, "min": 81, "name": "py8KrcQfucSq2X8g"}, {"max": 65, "min": 43, "name": "qU89D356pVsUtNan"}, {"max": 7, "min": 35, "name": "dzgwxYdQc5hEfefd"}], [{"max": 29, "min": 88, "name": "pcEM0JHfof2Hwi7v"}, {"max": 12, "min": 89, "name": "3osbh0fL2h7eJvAS"}, {"max": 3, "min": 100, "name": "foW8bDq5jPqzhN0Y"}], [{"max": 7, "min": 77, "name": "GSrA9LXRwU6WLgpQ"}, {"max": 62, "min": 59, "name": "9nXzhBC0uyMR4Xf2"}, {"max": 28, "min": 37, "name": "fYvNvG8uQ14Ahsxa"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 76, "role_flexing_second": 47}, "duration": 17, "max_number": 50, "min_number": 57, "player_max_number": 46, "player_min_number": 46}, {"combination": {"alliances": [[{"max": 32, "min": 90, "name": "NJornrCQpMJj5igq"}, {"max": 1, "min": 61, "name": "t8xnPoWTdHAkcyAy"}, {"max": 23, "min": 6, "name": "Ji4RbZ0Iy11mfOFj"}], [{"max": 58, "min": 12, "name": "zZVcGomWF1oAqUNF"}, {"max": 61, "min": 4, "name": "tXnXLvOAsW8wYh4g"}, {"max": 34, "min": 60, "name": "7pRVZVLJiDx3au9b"}], [{"max": 64, "min": 88, "name": "zeiMRkcOr1L0TMIc"}, {"max": 52, "min": 3, "name": "jfdUQHa3RxspSqwd"}, {"max": 3, "min": 25, "name": "TR2sgzfaQrUCW9fg"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 45, "role_flexing_second": 85}, "duration": 14, "max_number": 3, "min_number": 58, "player_max_number": 22, "player_min_number": 4}], "bucket_mmr_rule": {"disable_authority": true, "flex_authority_count": 0, "flex_flat_step_range": 61, "flex_immunity_count": 47, "flex_range_max": 25, "flex_rate_ms": 94, "flex_step_max": 2, "force_authority_match": true, "initial_step_range": 28, "mmr_max": 25, "mmr_mean": 96, "mmr_min": 49, "mmr_std_dev": 34, "override_mmr_data": true, "use_bucket_mmr": false, "use_flat_flex_step": true}, "flexing_rule": [{"attribute": "QTpvLH6QPEBP8kSS", "criteria": "FjeuL3wQQPYwmYFb", "duration": 49, "reference": 0.5686017699127481}, {"attribute": "6fs3zL9H4WxGWRH7", "criteria": "fz4BdPhLtHRJOImS", "duration": 34, "reference": 0.9538342051188905}, {"attribute": "DTswnkSyuJTVjKQ1", "criteria": "ORLEIAePvDO2xkVg", "duration": 50, "reference": 0.6089764736884469}], "match_options": {"options": [{"name": "zSpDFY3lxe16KsSR", "type": "zkf2HzBcEio5Uyvu"}, {"name": "Fv5z6wosJGnUyCME", "type": "bHh1uE4DmJ4Suj6D"}, {"name": "jUw36GtZ83Jp2f9f", "type": "1FCoIo3L24DKGwgZ"}]}, "matching_rule": [{"attribute": "85vyFJR8euQBLVu2", "criteria": "7iwplLJdzYS9K0Vv", "reference": 0.3585251564443177}, {"attribute": "E6MAqPc8lGIYWTwx", "criteria": "yqQQIXVmrtRlq1jv", "reference": 0.9413170357931668}, {"attribute": "0HTnmFrl3gYx6Xmv", "criteria": "1DzPHux3k3skhn3m", "reference": 0.7833695949904633}], "rebalance_enable": true, "sub_game_modes": {"jTYM95e4aa8xOJu7": {"alliance": {"combination": {"alliances": [[{"max": 36, "min": 33, "name": "NRVdygfKmUkzj9mH"}, {"max": 65, "min": 31, "name": "pZGMfPdGIOAZ86un"}, {"max": 49, "min": 77, "name": "v9nKMOgO5W8SUaZj"}], [{"max": 58, "min": 48, "name": "pNtJSMm8kDi3Rwub"}, {"max": 34, "min": 46, "name": "7wtRGdT447Oa51m6"}, {"max": 97, "min": 50, "name": "Lfjsw270pMmOQJrp"}], [{"max": 62, "min": 56, "name": "yO0vyD6J5brVo20e"}, {"max": 98, "min": 86, "name": "9hzsVbpJLtEZjuyF"}, {"max": 15, "min": 53, "name": "vbxX2DNbknfVv4nm"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 59, "role_flexing_second": 20}, "max_number": 1, "min_number": 76, "player_max_number": 49, "player_min_number": 55}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 40, "min": 22, "name": "2V9TVauFcGkPgQ0h"}, {"max": 2, "min": 34, "name": "2tLrsMeoZiRYkbhE"}, {"max": 80, "min": 46, "name": "1zTNY3lpincuf5d5"}], [{"max": 37, "min": 73, "name": "aQvKfFRqBam8jPtK"}, {"max": 69, "min": 31, "name": "Tmzo0JmcQmnsUigV"}, {"max": 49, "min": 97, "name": "njGFyVicGQAVv32f"}], [{"max": 39, "min": 37, "name": "RAsmC0RuRA8j1AJ3"}, {"max": 14, "min": 97, "name": "NWWhADRqJvaZrf2q"}, {"max": 4, "min": 88, "name": "rECijFxOpOzxeTLJ"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 6, "role_flexing_second": 85}, "duration": 93, "max_number": 62, "min_number": 14, "player_max_number": 53, "player_min_number": 85}, {"combination": {"alliances": [[{"max": 85, "min": 1, "name": "G5sAIfYtYozA2Ont"}, {"max": 67, "min": 87, "name": "CwQSHHdPLwjTngrv"}, {"max": 3, "min": 47, "name": "2E1X9ecBBhRAYjR7"}], [{"max": 5, "min": 29, "name": "4x5bIk8pVpxdUWOP"}, {"max": 10, "min": 38, "name": "l3TiwTycqpVdINXz"}, {"max": 43, "min": 78, "name": "kSp0WbvxQWI0QGCO"}], [{"max": 47, "min": 97, "name": "7eICkauWbFrSnU7d"}, {"max": 77, "min": 57, "name": "FnrQ4T5cmw7U1Txi"}, {"max": 91, "min": 16, "name": "06UEoaDZpXOWzpXO"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 4, "role_flexing_second": 32}, "duration": 1, "max_number": 20, "min_number": 87, "player_max_number": 40, "player_min_number": 65}, {"combination": {"alliances": [[{"max": 33, "min": 67, "name": "cXjPkj2IzU3MEpCt"}, {"max": 71, "min": 15, "name": "jlfHJM92t9j1XT2E"}, {"max": 36, "min": 27, "name": "wIxkaTnYtr1YDnaX"}], [{"max": 57, "min": 98, "name": "0JOS4XKVT66sHYPg"}, {"max": 99, "min": 50, "name": "sfhoEidKw4IP0NVn"}, {"max": 0, "min": 1, "name": "Ro6ROvbuPQwl9dVf"}], [{"max": 72, "min": 94, "name": "QGkDR00ofXsbnEzH"}, {"max": 17, "min": 91, "name": "Rs0NmGhxv1vuN7Xv"}, {"max": 80, "min": 84, "name": "EB4pl506fLCG6EAl"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 55, "role_flexing_second": 74}, "duration": 56, "max_number": 37, "min_number": 90, "player_max_number": 12, "player_min_number": 39}], "name": "gdXM7QlAlnjAfgxO"}, "dZdf9tLHO1qrNyhm": {"alliance": {"combination": {"alliances": [[{"max": 95, "min": 62, "name": "hlaznetBUGcQz2Wv"}, {"max": 7, "min": 56, "name": "iclkYGDL2ckC9cdz"}, {"max": 1, "min": 11, "name": "LnajQ8GnJpALiddv"}], [{"max": 92, "min": 96, "name": "ZKp6zwDQS1atvJrA"}, {"max": 77, "min": 0, "name": "tMlpFuJVXo9s0JPG"}, {"max": 60, "min": 4, "name": "ayYStUiBB1yz3iP8"}], [{"max": 12, "min": 59, "name": "H88UenlMVzIOP8NO"}, {"max": 12, "min": 28, "name": "91LsD7cWWOgAs8Th"}, {"max": 79, "min": 18, "name": "pAGIapYftYZkBXiE"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 45, "role_flexing_second": 17}, "max_number": 91, "min_number": 16, "player_max_number": 95, "player_min_number": 41}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 97, "min": 41, "name": "BAEUvoBlbH02bobx"}, {"max": 39, "min": 44, "name": "ljIfHBgjP9onbxFc"}, {"max": 49, "min": 23, "name": "S2OZZfXO3HkJTOPs"}], [{"max": 6, "min": 55, "name": "PA2n25C1zEnAMGmF"}, {"max": 51, "min": 70, "name": "w6eqnMeKFo7U8Scr"}, {"max": 49, "min": 79, "name": "m68w7s9RMx2hc45Q"}], [{"max": 7, "min": 70, "name": "34xnqlbRAPFQsca6"}, {"max": 28, "min": 46, "name": "9vGZTCCXQ2Lf7jte"}, {"max": 48, "min": 58, "name": "B613cbiJEUePVZQa"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 62, "role_flexing_second": 40}, "duration": 41, "max_number": 51, "min_number": 36, "player_max_number": 35, "player_min_number": 88}, {"combination": {"alliances": [[{"max": 31, "min": 42, "name": "Luvrx96OOz45vMiR"}, {"max": 67, "min": 88, "name": "P8TRVypSvYXKz4BG"}, {"max": 19, "min": 65, "name": "bsrRBV8aztJ86yQK"}], [{"max": 54, "min": 38, "name": "hOhenJi6dNVF7zwj"}, {"max": 93, "min": 34, "name": "pH6l2Dv8SvqYKc56"}, {"max": 85, "min": 46, "name": "cPSL2xmjViKkKw4g"}], [{"max": 68, "min": 71, "name": "A4CaLsPqRsTdKzcK"}, {"max": 41, "min": 72, "name": "kGcvn44NWse6VLPk"}, {"max": 79, "min": 96, "name": "VTrQBywhJ7lbBLw9"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 50, "role_flexing_second": 23}, "duration": 81, "max_number": 100, "min_number": 94, "player_max_number": 87, "player_min_number": 71}, {"combination": {"alliances": [[{"max": 79, "min": 57, "name": "5qUS8baUqkzSr41y"}, {"max": 90, "min": 78, "name": "PBHJuPjj8zDwOk0I"}, {"max": 12, "min": 67, "name": "mYfUTpFzyQhPVhRG"}], [{"max": 25, "min": 54, "name": "xlUKhXI8mL8OIhvP"}, {"max": 10, "min": 24, "name": "xE68dzohxhbej2ca"}, {"max": 71, "min": 70, "name": "3b7dmnPijw6U8GGp"}], [{"max": 93, "min": 62, "name": "UEBotSNIwGhia6cq"}, {"max": 30, "min": 51, "name": "Wmnhtuzxir12r0VU"}, {"max": 100, "min": 19, "name": "I0kJAczj5ApcsiEQ"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 24, "role_flexing_second": 31}, "duration": 23, "max_number": 11, "min_number": 14, "player_max_number": 40, "player_min_number": 67}], "name": "qoxujXDosOo2kSUf"}, "IA1guTNx7haejXSV": {"alliance": {"combination": {"alliances": [[{"max": 49, "min": 30, "name": "cL9SyuHbvRxR6LaK"}, {"max": 99, "min": 79, "name": "gAVjZKDxiezEbuMC"}, {"max": 52, "min": 26, "name": "9J4dPRGzoQLYIWPP"}], [{"max": 75, "min": 45, "name": "gU9406tdRDqr3cpV"}, {"max": 2, "min": 92, "name": "aH69NyTfGE59942b"}, {"max": 59, "min": 59, "name": "wgpzUfcmTQjRmV0C"}], [{"max": 84, "min": 39, "name": "uhL6qbAhRExsnbWS"}, {"max": 68, "min": 94, "name": "45LarTmOqto4OtwF"}, {"max": 71, "min": 43, "name": "CtWyUtVDnhgTGXO8"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 32, "role_flexing_second": 39}, "max_number": 46, "min_number": 91, "player_max_number": 48, "player_min_number": 35}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 42, "min": 78, "name": "g8MpqczRvUdK1uOV"}, {"max": 41, "min": 81, "name": "JTYuHpnpVX5u4gw4"}, {"max": 98, "min": 56, "name": "7rVei1o9zV6rhVfc"}], [{"max": 88, "min": 26, "name": "F5X05KUgGKfDSGh3"}, {"max": 44, "min": 57, "name": "QFPSYCi8WEjR3wqp"}, {"max": 27, "min": 26, "name": "MdSNskxhl3O3kGlo"}], [{"max": 29, "min": 29, "name": "oh7kL598P7F3IKhi"}, {"max": 80, "min": 85, "name": "dx1V7199NT7JTRFV"}, {"max": 34, "min": 64, "name": "6l5k9BLQMrPoTuxd"}]], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 63, "role_flexing_second": 62}, "duration": 54, "max_number": 54, "min_number": 64, "player_max_number": 45, "player_min_number": 99}, {"combination": {"alliances": [[{"max": 97, "min": 14, "name": "dW05WnQEAbK416LN"}, {"max": 81, "min": 82, "name": "PYUVA9mU8UvONyjv"}, {"max": 67, "min": 1, "name": "QuLHoQ6ehLLK5h1b"}], [{"max": 62, "min": 87, "name": "9WU6w3tjUhSCKySP"}, {"max": 9, "min": 51, "name": "Xk4uDF5mdakWJ2As"}, {"max": 75, "min": 34, "name": "f8UfQqTQ8v7gXyFu"}], [{"max": 76, "min": 70, "name": "FZViQbxYQvUyapo6"}, {"max": 65, "min": 58, "name": "mMy6tZYSCe7du68C"}, {"max": 9, "min": 91, "name": "6T4pYH3BPyFurT4p"}]], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 40, "role_flexing_second": 30}, "duration": 72, "max_number": 88, "min_number": 29, "player_max_number": 87, "player_min_number": 67}, {"combination": {"alliances": [[{"max": 87, "min": 51, "name": "WKTaUyB0UyrKKulH"}, {"max": 95, "min": 20, "name": "nompTrS7DIOakX65"}, {"max": 45, "min": 25, "name": "RpxY6pd1QTpFpaxb"}], [{"max": 58, "min": 9, "name": "jHSCXM7sL1nnOoRI"}, {"max": 12, "min": 12, "name": "7oSh4yVttp53wasu"}, {"max": 68, "min": 35, "name": "bA0keUomVCh681OM"}], [{"max": 65, "min": 82, "name": "iHwUqL5rITYFhcde"}, {"max": 81, "min": 15, "name": "wLmZenRqEBM0VGzh"}, {"max": 98, "min": 79, "name": "VGdipdi33u9U14rG"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 44, "role_flexing_second": 30}, "duration": 79, "max_number": 44, "min_number": 63, "player_max_number": 71, "player_min_number": 49}], "name": "NegS29legebqGwej"}}, "use_newest_ticket_for_flexing": false}, "session_queue_timeout_seconds": 22, "social_matchmaking": true, "ticket_observability_enable": false, "use_sub_gamemode": false}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateChannelHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 GetMatchPoolMetric
$CLI_EXE \
    --sn matchmaking \
    --op GetMatchPoolMetric \
    --channelName '8EM0OFW93FkJicmK' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'GetMatchPoolMetric' test.out

#- 7 DeleteChannelHandler
$CLI_EXE \
    --sn matchmaking \
    --op DeleteChannelHandler \
    --channel '6qeaDEm9bPCS2a5W' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 7 'DeleteChannelHandler' test.out

#- 8 StoreMatchResults
# body param: body
echo '{"match_id": "oOtwavdioadjCN0l", "players": [{"results": [{"attribute": "C0MZRZAvhZ7XQmcT", "value": 0.9200683916423792}, {"attribute": "7Hl2PvPOKvc25nnS", "value": 0.6075359720697572}, {"attribute": "nEnv4ipAVJzPHM6k", "value": 0.7324916137443362}], "user_id": "wfu1vSD9gROMknwV"}, {"results": [{"attribute": "RJfXHGB1r66lbNcb", "value": 0.6174464917619468}, {"attribute": "IJEY0BmpF215jJyc", "value": 0.5730991528450737}, {"attribute": "cSyXLzU9Uqk079uh", "value": 0.4488569627964687}], "user_id": "Ll4yz32RqkNzYSNY"}, {"results": [{"attribute": "l4zvyD8SUZv2LFFZ", "value": 0.07876336260720374}, {"attribute": "r6T3W7TE5WdocKzv", "value": 0.10295156928716875}, {"attribute": "r3jBU2g8Eo7uAb4H", "value": 0.20980703230891318}], "user_id": "dxqQYO14lFR2YtIb"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op StoreMatchResults \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'StoreMatchResults' test.out

#- 9 Rebalance
# body param: body
echo '{"match_id": "1fufxJiodJFjEbn1"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op Rebalance \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'Rebalance' test.out

#- 10 QueueSessionHandler
# body param: body
echo '{"channel": "ASMAiedHoYv6WmW9", "client_version": "mRXQwc5sfOZbgnCm", "deployment": "ULqltV5xjjrXKhZO", "error_code": 10, "error_message": "9UCZbdVFY3WdZ6lu", "game_mode": "OW977EgotvOrnRjb", "is_mock": "5UT6Vf5jxoBBg2lM", "joinable": false, "match_id": "DQXyC3oKu14sRjkC", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 9, "party_attributes": {"GULKeMzn4sG6P5R2": {}, "lHU9mf9rzrxuxtxg": {}, "98cDF1fsD5miAxHc": {}}, "party_id": "zgRu4VYjQq4VIVFU", "party_members": [{"extra_attributes": {"qNPuW223zuUv8Shb": {}, "YBe9hLKcN6myFUWf": {}, "7IuLG63jl9rYXaEF": {}}, "user_id": "cUySnsIREQUlwDt2"}, {"extra_attributes": {"XB6DgoJm4dqrLVSB": {}, "WToF03dQYi0OxI4D": {}, "ZZd2V80fjN9CwM4q": {}}, "user_id": "NT3awIjWoFCW5BTW"}, {"extra_attributes": {"9laFjsd7gSFkIVGn": {}, "XJLeUdD8XNxAkoeH": {}, "k0BXouyKC6RnO4Pc": {}}, "user_id": "kO3syHJOMlgAqtsn"}], "ticket_created_at": 32, "ticket_id": "lLvEczKKAyiQv93N"}, {"first_ticket_created_at": 12, "party_attributes": {"BLNzJxMR9F8QPVUh": {}, "3Fxn8VCvtdiiwNMA": {}, "dIodiW3hcYuKSRkk": {}}, "party_id": "KQKIVOduQwwDrBnp", "party_members": [{"extra_attributes": {"QpIKdlw0Q8Qm0lpT": {}, "upwpI0MCOROWHgnY": {}, "O9A4NtX4m0L4BGxx": {}}, "user_id": "cKUh2wepEjvh8sTP"}, {"extra_attributes": {"E7JfL8ZG7IBiOpvS": {}, "KRmJcE8fHWU8tF9T": {}, "j5DH9jDJgqZagf9T": {}}, "user_id": "fKsyiaqf0Vfidvwp"}, {"extra_attributes": {"ghGz92mfgwfewY0D": {}, "MU8QuojVb8QgdEnI": {}, "EDOXPqBEIQJ92jD6": {}}, "user_id": "Oo7qDSKsqbeuvGha"}], "ticket_created_at": 82, "ticket_id": "Hvtxi6EbWHrMrbpZ"}, {"first_ticket_created_at": 6, "party_attributes": {"FGk7WCNwFDvIhdx6": {}, "Z0l07ceeKMsQFyZC": {}, "Xx6V8vj07WkqficT": {}}, "party_id": "XXWpfaSkgXo8j70K", "party_members": [{"extra_attributes": {"rUcPducAeJonNs4K": {}, "unUYQNVjaoZkB3AI": {}, "1r9iOvxo4sO2v2SB": {}}, "user_id": "oI1cMTFoDvnFjF7P"}, {"extra_attributes": {"yPSihYagCDowXpzP": {}, "B56b3OlkJK0TMs61": {}, "QJU3NQDgVJljnvye": {}}, "user_id": "ys0Kd9lSy4dXRirN"}, {"extra_attributes": {"N1XTVbZINAYTfmDd": {}, "nbfKLdllLcrgG7MU": {}, "CvBQxDMKfZnQUHzr": {}}, "user_id": "oRILUYE0mbvUdfY0"}], "ticket_created_at": 57, "ticket_id": "EHxSPaGCQl5y1gek"}]}, {"matching_parties": [{"first_ticket_created_at": 10, "party_attributes": {"PWwBW4wLASmNzxcU": {}, "Mh0SvR4rhLLvUwAW": {}, "nj9yPsgbHDuaBMlh": {}}, "party_id": "mWv2CjjBQfnFyRj8", "party_members": [{"extra_attributes": {"oJlSSFh8ZLYsKNsz": {}, "83B3uSAH6QCBczex": {}, "oUjGKIDYp3uk6SY3": {}}, "user_id": "LbL8Ij6Hou1skD80"}, {"extra_attributes": {"rM9MH0bGReYemseR": {}, "492ILQLV79lT8sZw": {}, "aopSrf16qAbt38yZ": {}}, "user_id": "TqfCi5CJgLU0r1tx"}, {"extra_attributes": {"p0vdRA0J8eLCZrcT": {}, "7EO7zBX353qlmBOm": {}, "zDZoLl4yLZgHlatL": {}}, "user_id": "7nbsrfkzQM5RtMqC"}], "ticket_created_at": 90, "ticket_id": "00KvHLdMiaje6w7Y"}, {"first_ticket_created_at": 81, "party_attributes": {"cKcpv0nqsAzwhiin": {}, "ZMK2PQePnMgPL2up": {}, "EuzGkAuUgSs7KjVR": {}}, "party_id": "3KElIaqQcqk3EvPP", "party_members": [{"extra_attributes": {"boGcBp08H0whjTC8": {}, "Q254CIig93OcDTSD": {}, "DbtG4kbF7EcYPAe3": {}}, "user_id": "TKjWJizZ73YhEdqt"}, {"extra_attributes": {"8LYH7I8lYD68ZI9y": {}, "J2FmHnprty5BQCd5": {}, "sVLr7TlnKnQhYH2P": {}}, "user_id": "kwSPXdYk0YxFNno9"}, {"extra_attributes": {"WQq9ZHHjrwqKsa8Z": {}, "qhezPIlBtGhWc8fY": {}, "9HfUsEaPxVM4cVRt": {}}, "user_id": "jpUequcPWZP6mJ5k"}], "ticket_created_at": 56, "ticket_id": "QPUVO9elCnXCnhXR"}, {"first_ticket_created_at": 16, "party_attributes": {"M0zKUQCLksfhWE1O": {}, "iCOozFmZ3hzpayQ1": {}, "ySXmHgROq1X5e82z": {}}, "party_id": "DrJtNcl4ztsaFwry", "party_members": [{"extra_attributes": {"lG42gHaf4XEHX7QB": {}, "UYvSupGJqpwAp0WM": {}, "u7ZUAbKsKi0fuipd": {}}, "user_id": "vULHrqNhX3eWB4hf"}, {"extra_attributes": {"A53Ibtklb9jB4Gcb": {}, "0L2EPZQmxEO4oKOc": {}, "sZUbeZJJJydenJ93": {}}, "user_id": "Kb1pQleHG1UoswJz"}, {"extra_attributes": {"p9GPpGykMepZ0J4U": {}, "uZWR407SE9ddXzA6": {}, "F73IwV8d2jvk2NFE": {}}, "user_id": "PFcj0B4pnGV0EaGD"}], "ticket_created_at": 82, "ticket_id": "EQrMIsKCf8GsPEl1"}]}, {"matching_parties": [{"first_ticket_created_at": 17, "party_attributes": {"mmAuOT58yIe9Azms": {}, "PC0C5hWQuueyPPcb": {}, "PVe3xxdxVhu4rkZZ": {}}, "party_id": "o8fTr6agunz2XzHs", "party_members": [{"extra_attributes": {"ONpORaUZ573WSpmt": {}, "V8p2sf0f3uCNxJIM": {}, "iWHlRKeE5RKhreFD": {}}, "user_id": "6wFvnLOEQR2tp6q9"}, {"extra_attributes": {"pPGaWcS02LciOGbT": {}, "W0UOPodtVEAHUTPJ": {}, "cWSRPDFdkQZDrW0M": {}}, "user_id": "7eIDrifb9ovouuoy"}, {"extra_attributes": {"V36gCehJP43Xpu5g": {}, "yQ14gMP9Z4mEvMNj": {}, "tERuv6NrO6SjBOH0": {}}, "user_id": "izSSpVoq4E6Ctycf"}], "ticket_created_at": 69, "ticket_id": "hxdl2hmyNHx2Ewgg"}, {"first_ticket_created_at": 61, "party_attributes": {"bBDwdvFVFTK8mQqq": {}, "A2VoUKBlsPXL4ibY": {}, "VB9w0ETfSauutS9J": {}}, "party_id": "WgSB39nWJ0AdErhR", "party_members": [{"extra_attributes": {"mHmtCl6M85ELRv5N": {}, "Ee9bR9ckNLMJjsga": {}, "XBRR415WJviuc5vA": {}}, "user_id": "36xYMMPep0zplFiR"}, {"extra_attributes": {"g22RpUVtQXjItygv": {}, "yTYykvnB2kvfxE0s": {}, "qbjAHF9QLlS2lC0Q": {}}, "user_id": "B41qRS25yYg5fkCh"}, {"extra_attributes": {"tyUjcBHShoy4rAmt": {}, "QkeCoVHY89b92PWE": {}, "F9gisonsVtIIBDDZ": {}}, "user_id": "zSa012J2Vd3MaSmO"}], "ticket_created_at": 72, "ticket_id": "UlLhIUZaqDR1n6aK"}, {"first_ticket_created_at": 5, "party_attributes": {"oZEUNVKjMQUM30wa": {}, "RuDKnw63w8ZD7GzT": {}, "Z0WS0ZfkVqKowfa2": {}}, "party_id": "xO5BhQtMYVHJohu8", "party_members": [{"extra_attributes": {"Sfs3a0odaQ1HgT2W": {}, "npHkT1LxGYzolfxv": {}, "Dyx6IAAOUeURiiiE": {}}, "user_id": "gBQnBdCORXu3yYfZ"}, {"extra_attributes": {"5p6HsVODk8yYxP6e": {}, "RLWH719H0S96d6o9": {}, "2O9JTphnwOfFzh20": {}}, "user_id": "ovT23TbEK3bM30lx"}, {"extra_attributes": {"x1rT6fsKa4IgtUwY": {}, "ePFCH42h6LucfBcr": {}, "N83Rs41H9Aya2Ugl": {}}, "user_id": "7sPCMcCq8KOF1FPA"}], "ticket_created_at": 92, "ticket_id": "MxmStiAYcnCKHJa2"}]}], "namespace": "9YjFCGXPzxvGWXSY", "party_attributes": {"KxZFwAJdGF5bhjI1": {}, "EEc3WV5k6IPw3luG": {}, "BMK9OmEmytZjYEiO": {}}, "party_id": "xHZltYdZOiBafLm9", "queued_at": 5, "region": "AqkZqR3gW3GfD7Jt", "server_name": "chRl8UCypNxxUbXg", "status": "FF9TJrlNNryir2rc", "ticket_id": "fzqMDXs2AMIqwXxA", "ticket_ids": ["tcjA062eWYCE2BZK", "l6Ks6ND0evlW05Iz", "e0EKI1ogofwrtjPj"], "updated_at": "1993-11-13T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op QueueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'QueueSessionHandler' test.out

#- 11 DequeueSessionHandler
# body param: body
echo '{"match_id": "rjvrgKMZ79d1xh7U"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op DequeueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 11 'DequeueSessionHandler' test.out

#- 12 QuerySessionHandler
$CLI_EXE \
    --sn matchmaking \
    --op QuerySessionHandler \
    --matchID 'R0UxrnZ5OMXgRDRM' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 12 'QuerySessionHandler' test.out

#- 13 UpdatePlayTimeWeight
# body param: body
echo '{"playtime": 37, "userID": "gg9nVFQuxaksqHEV", "weight": 0.9424506757870389}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdatePlayTimeWeight \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'UpdatePlayTimeWeight' test.out

#- 14 GetAllPartyInAllChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInAllChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 14 'GetAllPartyInAllChannel' test.out

#- 15 BulkGetSessions
$CLI_EXE \
    --sn matchmaking \
    --op BulkGetSessions \
    --namespace $AB_NAMESPACE \
    --matchIDs 'l9c1J0YV5SAUWFWp' \
    > test.out 2>&1
eval_tap $? 15 'BulkGetSessions' test.out

#- 16 ExportChannels
$CLI_EXE \
    --sn matchmaking \
    --op ExportChannels \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 16 'ExportChannels' test.out

#- 17 ImportChannels
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn matchmaking \
    --op ImportChannels \
    --namespace $AB_NAMESPACE \
    --upload $TEMP_FILE_UPLOAD \
    --strategy 'U4iAd1zlFBNJu2Wk' \
    > test.out 2>&1
eval_tap $? 17 'ImportChannels' test.out

#- 18 GetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetSingleMatchmakingChannel \
    --channelName 'eGDSzlCaFt7Cu0JK' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 18 'GetSingleMatchmakingChannel' test.out

#- 19 UpdateMatchmakingChannel
# body param: body
echo '{"deployment": "jLegxbCcIqhcBHRl", "description": "1tn7RtEGUE0zrKNm", "findMatchTimeoutSeconds": 34, "joinable": false, "max_delay_ms": 73, "region_expansion_range_ms": 51, "region_expansion_rate_ms": 28, "region_latency_initial_range_ms": 20, "region_latency_max_ms": 28, "ruleSet": {"alliance": {"combination": {"alliances": [[{"max": 5, "min": 28, "name": "eomro5tLlKiW8dBl"}, {"max": 92, "min": 93, "name": "c2bkfxl91A6ODfId"}, {"max": 78, "min": 43, "name": "Uia86OHeEezPfPVo"}], [{"max": 78, "min": 10, "name": "zuailZgh0VftM4du"}, {"max": 16, "min": 74, "name": "POP3T7IILgTKDtEB"}, {"max": 27, "min": 33, "name": "yydnlmrax9HkcVJk"}], [{"max": 5, "min": 89, "name": "KNqoctZZip2UOwEp"}, {"max": 97, "min": 0, "name": "OojiniOJfBmQBpvp"}, {"max": 60, "min": 73, "name": "w5KbvwvhRu00Z9kQ"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 39, "role_flexing_second": 10}, "maxNumber": 32, "minNumber": 97, "playerMaxNumber": 87, "playerMinNumber": 63}, "alliance_flexing_rule": [{"combination": {"alliances": [[{"max": 17, "min": 75, "name": "DiCAh2lkPXOOJp91"}, {"max": 46, "min": 74, "name": "7ACgmrezLCJKLPrw"}, {"max": 19, "min": 93, "name": "eYeJi9q4KUgzZZ6z"}], [{"max": 1, "min": 7, "name": "aAvvKi9jeErSpDVN"}, {"max": 67, "min": 53, "name": "kjfYLmyJHWVmJhvz"}, {"max": 93, "min": 95, "name": "Uy9Iqsv2Y3W67ojK"}], [{"max": 22, "min": 66, "name": "RVEBpthoAfzvXP7h"}, {"max": 11, "min": 39, "name": "NyBM3W7FEjbI46oL"}, {"max": 55, "min": 95, "name": "T59629Ly5GJfaRlZ"}]], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 32, "role_flexing_second": 86}, "duration": 27, "max_number": 93, "min_number": 72, "player_max_number": 13, "player_min_number": 81}, {"combination": {"alliances": [[{"max": 61, "min": 50, "name": "FyRpEbkRLet6qHFz"}, {"max": 96, "min": 74, "name": "AAIA1yZDTGyGcJrX"}, {"max": 0, "min": 90, "name": "98isrEnWec7CnvrR"}], [{"max": 94, "min": 19, "name": "NsnN86SsqD74VrPB"}, {"max": 23, "min": 60, "name": "aPDrv6Eb7CbB1Czx"}, {"max": 72, "min": 5, "name": "9zmeLvT7VIP5dOI5"}], [{"max": 73, "min": 58, "name": "EsCwYwxuLPzTV7F7"}, {"max": 0, "min": 5, "name": "JmavnpwvlN5bxb3z"}, {"max": 98, "min": 98, "name": "GiVgmTiYRqChqmGw"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 78, "role_flexing_second": 23}, "duration": 32, "max_number": 88, "min_number": 58, "player_max_number": 35, "player_min_number": 25}, {"combination": {"alliances": [[{"max": 99, "min": 76, "name": "l9mqTkN4IEuQISWd"}, {"max": 86, "min": 71, "name": "728o1qclvhlm929z"}, {"max": 79, "min": 8, "name": "AdlyXyqtmIwkhB1n"}], [{"max": 17, "min": 41, "name": "7SEGOwWwVPMXi6Ti"}, {"max": 34, "min": 41, "name": "SRiBbSv5Mu9psphB"}, {"max": 46, "min": 79, "name": "GwYtWzihoA8UZno0"}], [{"max": 41, "min": 50, "name": "pxwRKEKNIlaq2KS5"}, {"max": 50, "min": 100, "name": "US265k6o7P49D2nL"}, {"max": 4, "min": 17, "name": "CMvTgskvERPzKX3k"}]], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 26, "role_flexing_second": 93}, "duration": 36, "max_number": 93, "min_number": 25, "player_max_number": 2, "player_min_number": 42}], "bucket_mmr_rule": {"disable_authority": true, "flex_authority_count": 45, "flex_flat_step_range": 66, "flex_immunity_count": 30, "flex_range_max": 64, "flex_rate_ms": 26, "flex_step_max": 5, "force_authority_match": true, "initial_step_range": 37, "mmr_max": 5, "mmr_mean": 0, "mmr_min": 27, "mmr_std_dev": 5, "override_mmr_data": true, "use_bucket_mmr": true, "use_flat_flex_step": true}, "flexingRules": [{"attribute": "r9PhX008zkRCTEr3", "criteria": "CbX1jCvt8SZQVAQV", "duration": 94, "reference": 0.4599902666785758}, {"attribute": "wUa7LxQUNu0laNJx", "criteria": "3VND1GqpkJeCMYVG", "duration": 1, "reference": 0.779564071594413}, {"attribute": "fGj2nDHeEHT96WiK", "criteria": "FqOEuv5vimn63Cas", "duration": 47, "reference": 0.41472252652008235}], "match_options": {"options": [{"name": "7J1NW0IoTP97wPaR", "type": "fkXyLS86H3ub7hu9"}, {"name": "Mf6Qeyu5D0XT5fha", "type": "rkK0AIGdEbxsUwJL"}, {"name": "zvxAqxaBvYkRH723", "type": "c57BNNjQJ7TXsOww"}]}, "matchingRules": [{"attribute": "by9OOnuphq96OvBp", "criteria": "28vxdZ0sUS14l56F", "reference": 0.5936723413869925}, {"attribute": "fjkcB2SiFscU2TIp", "criteria": "tCl7Mr5hH9Gexcdb", "reference": 0.7417127238348262}, {"attribute": "8v3UhVtgg8kRaAVv", "criteria": "E6mqqeoTT0uNoVVn", "reference": 0.9561536688101355}], "sub_game_modes": {}, "use_newest_ticket_for_flexing": true}, "sessionQueueTimeoutSeconds": 65, "socialMatchmaking": true, "ticket_observability_enable": true, "use_sub_gamemode": true}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdateMatchmakingChannel \
    --channelName 'qhMuZYAzHXsCOpjW' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'UpdateMatchmakingChannel' test.out

#- 20 CleanAllMocks
$CLI_EXE \
    --sn matchmaking \
    --op CleanAllMocks \
    --channelName '3CTUUFdOJRHv7are' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 20 'CleanAllMocks' test.out

#- 21 GetAllMockMatches
$CLI_EXE \
    --sn matchmaking \
    --op GetAllMockMatches \
    --channelName '1QWJddDrhoAaGO0c' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 21 'GetAllMockMatches' test.out

#- 22 GetMockMatchesByTimestamp
# body param: body
echo '{"timestamp_after": 52}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op GetMockMatchesByTimestamp \
    --channelName 'aXoFM9JtzYynQYA8' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'GetMockMatchesByTimestamp' test.out

#- 23 GetAllMockTickets
$CLI_EXE \
    --sn matchmaking \
    --op GetAllMockTickets \
    --channelName 'i8PGEVFtDMMDML1y' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 23 'GetAllMockTickets' test.out

#- 24 CreateMockTickets
# body param: body
echo '{"attribute_name": "SKpmO86kO0hsIwyn", "count": 72, "mmrMax": 0.14143929203528838, "mmrMean": 0.4771660270298037, "mmrMin": 0.26539409493101296, "mmrStdDev": 0.4875872819706456}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateMockTickets \
    --channelName 'S2enp5QsuU2SzC5j' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'CreateMockTickets' test.out

#- 25 BulkCreateMockTickets
# body param: body
echo '[{"first_ticket_created_at": 84, "party_attributes": {"BQtqkaX58cIGPaIh": {}, "2fIggFFHPcxOtLAh": {}, "Tn1phglYoAkb9a7z": {}}, "party_id": "wipvdA2x113f0Bp2", "party_members": [{"extra_attributes": {"vdsCew5mf0wUYRGs": {}, "6ndQOUixZzcm2OM0": {}, "B7COBhqguJYsAOND": {}}, "user_id": "GwAOmzWmrbHeYwhg"}, {"extra_attributes": {"N0OnEE5a4pDdwi6k": {}, "56EtzesGM5rBXwL4": {}, "B1VjVn6f8aba9YXw": {}}, "user_id": "FYQFr3UBeKJ4xecZ"}, {"extra_attributes": {"af7owlXFBz6IbxIl": {}, "5dUFT7bJ07WKDAyN": {}, "RUJsM9g7YDVCdVk7": {}}, "user_id": "pAhlHOFFTGckEVLO"}], "ticket_created_at": 21, "ticket_id": "pSvpMEa0Lvq2wnqy"}, {"first_ticket_created_at": 21, "party_attributes": {"AmP1wOzzLGRwbOmo": {}, "uZ2YIPoumSJ3SzT8": {}, "lUpXxkPntiTrWD69": {}}, "party_id": "zuVXfklxnwCn4oN7", "party_members": [{"extra_attributes": {"ReDjlm69cVOR7cJa": {}, "g96pmsOSESfYYfcq": {}, "CesMQk3ZMQPndypr": {}}, "user_id": "DAzJHzrLAnhMLeNz"}, {"extra_attributes": {"o6AVZOaKsluosiGa": {}, "Kd0wHfEbWYu5tq42": {}, "y9tPQEz6JWsYiQT5": {}}, "user_id": "QSZtlA4KQeFg6EMZ"}, {"extra_attributes": {"QcwbAhRNgXXGYKIu": {}, "GGriMXJaukjQprS6": {}, "CmcUjDbwPW4iYqSZ": {}}, "user_id": "FO9EQt4SdrkfJD71"}], "ticket_created_at": 83, "ticket_id": "fWPCVvLLFNSKl79V"}, {"first_ticket_created_at": 54, "party_attributes": {"ucJ4eDQyH46uQbTH": {}, "K5X3o94hUU3uq7jQ": {}, "cfShtEtVr2SVT1Ni": {}}, "party_id": "SinLANULfgmYSJIz", "party_members": [{"extra_attributes": {"EBkXmc2FhrwrUKt0": {}, "S1mnKCBDLO5p7AU8": {}, "haiJAyCejYVpU1pd": {}}, "user_id": "EtrpKrbVk9u7GLgM"}, {"extra_attributes": {"E7wGiU2biCXBTngf": {}, "X2J8YqvfwThZ7F6K": {}, "gWP0pCW1LZjascU9": {}}, "user_id": "sDwKvowvGWWtzd8N"}, {"extra_attributes": {"YVjEQMiQNEKqmY3Q": {}, "c7Gush1JYbd03QSr": {}, "NZ2SbLcxoEq2iYdE": {}}, "user_id": "tbYSFJ0DhVUMO4Dr"}], "ticket_created_at": 86, "ticket_id": "FHrMfRpBHOax7TNL"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op BulkCreateMockTickets \
    --channelName 'zgW5GMdrZOdIXAHB' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'BulkCreateMockTickets' test.out

#- 26 GetMockTicketsByTimestamp
# body param: body
echo '{"timestamp_after": 91}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op GetMockTicketsByTimestamp \
    --channelName '2OW6O9zv4LwcYHUK' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'GetMockTicketsByTimestamp' test.out

#- 27 GetAllPartyInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInChannel \
    --channelName 'ZcfngNWZwjfs9dyJ' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 27 'GetAllPartyInChannel' test.out

#- 28 GetAllSessionsInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllSessionsInChannel \
    --channelName 'GDob1c5COgUPHziO' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 28 'GetAllSessionsInChannel' test.out

#- 29 AddUserIntoSessionInChannel
# body param: body
echo '{"blocked_players": ["jddY12BhBK4v8j8m", "NkaLCRNg4dQYhCxg", "6MO5yZpDV5MsRNMV"], "party_id": "QEyyQU7JYXJt8RD2", "user_id": "u7w8ONAaO8ej985D"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op AddUserIntoSessionInChannel \
    --channelName 'ejuzY3p3EElTLLLb' \
    --matchID 't1V32zLajqSkaSCd' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'AddUserIntoSessionInChannel' test.out

#- 30 DeleteSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteSessionInChannel \
    --channelName 'xoJQJ6MzJyO3qDmt' \
    --matchID 'Y3fCWcnjvSFQknkX' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 30 'DeleteSessionInChannel' test.out

#- 31 DeleteUserFromSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteUserFromSessionInChannel \
    --channelName 'xhNoW5mCsWgJYsuR' \
    --matchID 'my56HZgI5RRTsXQn' \
    --namespace $AB_NAMESPACE \
    --userID 'MWiRJCR1RHyZbcfk' \
    > test.out 2>&1
eval_tap $? 31 'DeleteUserFromSessionInChannel' test.out

#- 32 GetStatData
$CLI_EXE \
    --sn matchmaking \
    --op GetStatData \
    --channelName '8YG7nYGowF23P0WH' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 32 'GetStatData' test.out

#- 33 SearchSessions
eval_tap 0 33 'SearchSessions # SKIP deprecated' test.out

#- 34 GetSessionHistoryDetailed
eval_tap 0 34 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 35 PublicGetMessages
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetMessages \
    > test.out 2>&1
eval_tap $? 35 'PublicGetMessages' test.out

#- 36 PublicGetAllMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetAllMatchmakingChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 36 'PublicGetAllMatchmakingChannel' test.out

#- 37 PublicGetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetSingleMatchmakingChannel \
    --channelName 'gh0pChv4BAqsdhbb' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 37 'PublicGetSingleMatchmakingChannel' test.out

#- 38 SearchSessionsV2
eval_tap 0 38 'SearchSessionsV2 # SKIP deprecated' test.out

#- 39 VersionCheckHandler
$CLI_EXE \
    --sn matchmaking \
    --op VersionCheckHandler \
    > test.out 2>&1
eval_tap $? 39 'VersionCheckHandler' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE