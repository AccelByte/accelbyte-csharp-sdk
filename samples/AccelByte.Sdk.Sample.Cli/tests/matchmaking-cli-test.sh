#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..30"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn matchmaking \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$CLI_EXE \
    --sn matchmaking \
    --op HandlerV3Healthz \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$CLI_EXE \
    --sn matchmaking \
    --op GetAllChannelsHandler \
    --namespace $AB_NAMESPACE \
    --limit '35' \
    --offset '9' \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
# body param: body
echo '{"deployment": "ioAJ9pKc", "description": "aKnsTMud", "find_match_timeout_seconds": 16, "game_mode": "wLPnT3Em", "joinable": true, "max_delay_ms": 21, "rule_set": {"alliance": {"combination": {"alliances": [{"max": 34, "min": 46, "name": "4PygXwZ3"}, {"max": 40, "min": 54, "name": "VnxSL3W5"}, {"max": 43, "min": 47, "name": "vdvlmAiU"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 25, "role_flexing_second": 54}, "max_number": 10, "min_number": 24, "player_max_number": 55, "player_min_number": 65}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 72, "min": 69, "name": "nSt64OIY"}, {"max": 69, "min": 63, "name": "vv0YL7q5"}, {"max": 93, "min": 2, "name": "CIWM3VBr"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 49, "role_flexing_second": 37}, "duration": 51, "max_number": 34, "min_number": 37, "player_max_number": 88, "player_min_number": 12}, {"combination": {"alliances": [{"max": 99, "min": 48, "name": "NRGEzPxm"}, {"max": 40, "min": 9, "name": "GWaA6DOF"}, {"max": 29, "min": 46, "name": "sDNQ3QwK"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 99, "role_flexing_second": 82}, "duration": 27, "max_number": 68, "min_number": 72, "player_max_number": 65, "player_min_number": 79}, {"combination": {"alliances": [{"max": 43, "min": 92, "name": "ctvMzBlf"}, {"max": 67, "min": 0, "name": "QSOhc0F2"}, {"max": 37, "min": 84, "name": "JqLDm6d7"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 15, "role_flexing_second": 79}, "duration": 37, "max_number": 79, "min_number": 8, "player_max_number": 52, "player_min_number": 88}], "flexing_rule": [{"attribute": "rdi7ih1k", "criteria": "o8iSbNS4", "duration": 1, "reference": 0.6161145332592899}, {"attribute": "zzfltl6q", "criteria": "6QmagI3k", "duration": 91, "reference": 0.20781029266958861}, {"attribute": "ciugB5na", "criteria": "MURywEBk", "duration": 49, "reference": 0.1846045830466938}], "match_options": {"options": [{"name": "QrNwiixg", "type": "GfBTphWO"}, {"name": "iBpsPwUN", "type": "FdzuZm90"}, {"name": "TCdpnEw2", "type": "tBgjndex"}]}, "matching_rule": [{"attribute": "LFPa0hOn", "criteria": "vNtW5vhQ", "reference": 0.4766459896754751}, {"attribute": "i2bHcsNr", "criteria": "tZgsLemp", "reference": 0.09943300445465542}, {"attribute": "Z0lwHF8n", "criteria": "aPv6vR3e", "reference": 0.4825762386191741}], "rebalance_enable": true, "sub_game_modes": {"MRXubIKm": {"alliance": {"combination": {"alliances": [{"max": 68, "min": 10, "name": "IetQRgjt"}, {"max": 55, "min": 76, "name": "JZO5EJvZ"}, {"max": 99, "min": 58, "name": "zdZxSRX7"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 11, "role_flexing_second": 39}, "max_number": 64, "min_number": 77, "player_max_number": 97, "player_min_number": 43}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 78, "min": 26, "name": "Rr0nonJZ"}, {"max": 78, "min": 29, "name": "4rSzAzgW"}, {"max": 48, "min": 56, "name": "3Agacklu"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 99, "role_flexing_second": 86}, "duration": 17, "max_number": 89, "min_number": 73, "player_max_number": 32, "player_min_number": 81}, {"combination": {"alliances": [{"max": 19, "min": 96, "name": "h7X3EP4f"}, {"max": 89, "min": 24, "name": "ivO46B8o"}, {"max": 90, "min": 6, "name": "W7wTqhGJ"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 86, "role_flexing_second": 29}, "duration": 6, "max_number": 53, "min_number": 77, "player_max_number": 28, "player_min_number": 89}, {"combination": {"alliances": [{"max": 32, "min": 0, "name": "liXDiP9F"}, {"max": 51, "min": 2, "name": "j8H3T5aF"}, {"max": 67, "min": 82, "name": "Am93D0KF"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 98, "role_flexing_second": 61}, "duration": 91, "max_number": 91, "min_number": 68, "player_max_number": 88, "player_min_number": 61}], "name": "JE1mgXAQ"}, "m6Xwasb6": {"alliance": {"combination": {"alliances": [{"max": 21, "min": 34, "name": "shOUPk7j"}, {"max": 29, "min": 100, "name": "3OtuO255"}, {"max": 90, "min": 88, "name": "2K5KSVHw"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 47, "role_flexing_second": 29}, "max_number": 60, "min_number": 6, "player_max_number": 31, "player_min_number": 89}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 70, "min": 80, "name": "0sVQgG3n"}, {"max": 25, "min": 11, "name": "2sQf8jpv"}, {"max": 89, "min": 21, "name": "r90Q8unX"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 57, "role_flexing_second": 3}, "duration": 3, "max_number": 37, "min_number": 34, "player_max_number": 27, "player_min_number": 75}, {"combination": {"alliances": [{"max": 98, "min": 57, "name": "X4TNZDCH"}, {"max": 40, "min": 53, "name": "dVY40NKR"}, {"max": 65, "min": 31, "name": "xFtzUS1A"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 19, "role_flexing_second": 57}, "duration": 22, "max_number": 57, "min_number": 4, "player_max_number": 45, "player_min_number": 88}, {"combination": {"alliances": [{"max": 39, "min": 78, "name": "46UXbwFW"}, {"max": 79, "min": 14, "name": "0I4gKWa0"}, {"max": 93, "min": 63, "name": "0cRLQbvH"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 76, "role_flexing_second": 57}, "duration": 98, "max_number": 86, "min_number": 97, "player_max_number": 39, "player_min_number": 11}], "name": "LIs3ilKB"}, "xNNQWR18": {"alliance": {"combination": {"alliances": [{"max": 17, "min": 21, "name": "vNsBflMG"}, {"max": 31, "min": 69, "name": "z73rfu0K"}, {"max": 25, "min": 73, "name": "z5wZ8ZNf"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 22, "role_flexing_second": 57}, "max_number": 73, "min_number": 78, "player_max_number": 99, "player_min_number": 4}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 43, "min": 33, "name": "C9ZM9rEY"}, {"max": 4, "min": 17, "name": "H8auPcS4"}, {"max": 89, "min": 58, "name": "mDvl6ME4"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 76, "role_flexing_second": 79}, "duration": 3, "max_number": 42, "min_number": 78, "player_max_number": 48, "player_min_number": 11}, {"combination": {"alliances": [{"max": 37, "min": 2, "name": "aF8Z1Wq0"}, {"max": 45, "min": 89, "name": "lVnhdi5M"}, {"max": 57, "min": 49, "name": "bqapw8Hb"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 28, "role_flexing_second": 21}, "duration": 24, "max_number": 90, "min_number": 81, "player_max_number": 83, "player_min_number": 85}, {"combination": {"alliances": [{"max": 98, "min": 15, "name": "kous9RYv"}, {"max": 74, "min": 11, "name": "ai4xNytl"}, {"max": 78, "min": 7, "name": "1osjvuLQ"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 3, "role_flexing_second": 99}, "duration": 83, "max_number": 20, "min_number": 66, "player_max_number": 64, "player_min_number": 33}], "name": "GQkSpzLk"}}}, "session_queue_timeout_seconds": 46, "social_matchmaking": false, "use_sub_gamemode": false}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateChannelHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 DeleteChannelHandler
$CLI_EXE \
    --sn matchmaking \
    --op DeleteChannelHandler \
    --channel 'J7QbtewC' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'DeleteChannelHandler' test.out

#- 7 StoreMatchResults
# body param: body
echo '{"match_id": "12CSNPlp", "players": [{"results": [{"attribute": "j7GzfwFO", "value": 0.7901099094217449}, {"attribute": "rWFxNAIX", "value": 0.0385617340654516}, {"attribute": "rJefBgwN", "value": 0.30677256139812037}], "user_id": "lPJrfK5n"}, {"results": [{"attribute": "KEN1YXu2", "value": 0.2646336711629895}, {"attribute": "UjxW3vZi", "value": 0.9342018032614368}, {"attribute": "SMB2iu7t", "value": 0.1357244533879497}], "user_id": "19xeT4tV"}, {"results": [{"attribute": "XzIrxKLn", "value": 0.9210082816154189}, {"attribute": "YDx6QogQ", "value": 0.9064449760562444}, {"attribute": "wNC3w6SU", "value": 0.686307531271177}], "user_id": "ceOfrktO"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op StoreMatchResults \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'StoreMatchResults' test.out

#- 8 Rebalance
# body param: body
echo '{"match_id": "hUgqAyEJ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op Rebalance \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'Rebalance' test.out

#- 9 QueueSessionHandler
# body param: body
echo '{"channel": "JPMJyjEs", "client_version": "Ym5oLkg8", "deployment": "4fp9KGED", "error_code": 64, "error_message": "GKGQZU4i", "game_mode": "l6cX1hCd", "joinable": false, "match_id": "Uo8t8ZNt", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 6, "party_attributes": {"wLieDWu6": {}, "vMQqteON": {}, "uU39gchm": {}}, "party_id": "Ijw3zM8K", "party_members": [{"extra_attributes": {"l7XFpV8d": {}, "sUyojdgU": {}, "cmDPcYJ5": {}}, "user_id": "LBoExdOW"}, {"extra_attributes": {"xXkAzkLN": {}, "3jeQgPy5": {}, "JmVSosst": {}}, "user_id": "ZKGUKFRZ"}, {"extra_attributes": {"vvpvrC8Y": {}, "tdbRH0O9": {}, "6Cu3d7F9": {}}, "user_id": "SEzu54kh"}], "ticket_id": "9qm47T05"}, {"first_ticket_created_at": 61, "party_attributes": {"wedXEwUo": {}, "fRavDi3l": {}, "rwaIgsPg": {}}, "party_id": "xJH23Nnq", "party_members": [{"extra_attributes": {"LzwoSB63": {}, "yGNJ5J1u": {}, "jgYA3t6c": {}}, "user_id": "I2491i7u"}, {"extra_attributes": {"8Fj4bLAX": {}, "DHLRRAZt": {}, "uS9ngOe2": {}}, "user_id": "k33wotlS"}, {"extra_attributes": {"Z6YrAGuG": {}, "URBBPOBq": {}, "PiRP662I": {}}, "user_id": "8mCYBsjI"}], "ticket_id": "Dxf8d4yY"}, {"first_ticket_created_at": 17, "party_attributes": {"lioxq2d8": {}, "TxfoJ6Nf": {}, "Qtzd7L0M": {}}, "party_id": "kFYngwSD", "party_members": [{"extra_attributes": {"m3x9khVB": {}, "iydh8eGy": {}, "rszCP0Ik": {}}, "user_id": "XpBgcZic"}, {"extra_attributes": {"pcDIS7t2": {}, "1hSDVZMu": {}, "AvJMrM9z": {}}, "user_id": "wE3C6a6b"}, {"extra_attributes": {"RdAK1NvF": {}, "fGWmbgAe": {}, "xXigH0oV": {}}, "user_id": "47HhiF0l"}], "ticket_id": "L7Fj0jpw"}]}, {"matching_parties": [{"first_ticket_created_at": 99, "party_attributes": {"KHTIIjPa": {}, "8aPGfJLg": {}, "Pe2x9XBC": {}}, "party_id": "YosJCyIg", "party_members": [{"extra_attributes": {"jlBAWmqw": {}, "VsCaMK1c": {}, "4i2LG1Jz": {}}, "user_id": "ouI7hfsn"}, {"extra_attributes": {"Jzy4YvLY": {}, "MgtVyyG0": {}, "tAvR9zjG": {}}, "user_id": "28dpJpa1"}, {"extra_attributes": {"9Lk7v0HA": {}, "K5YFWzZv": {}, "jpvL4uNx": {}}, "user_id": "9dovkzb0"}], "ticket_id": "mP8xR3Ut"}, {"first_ticket_created_at": 23, "party_attributes": {"bSX7qhXO": {}, "oNP397jh": {}, "Wo4EtdMZ": {}}, "party_id": "CNQ6ye1Q", "party_members": [{"extra_attributes": {"DomsNzGN": {}, "bPZzkNGI": {}, "CmOdxsos": {}}, "user_id": "KbGOZfpd"}, {"extra_attributes": {"BtKUifPO": {}, "THJ2XTkz": {}, "wcss40Ax": {}}, "user_id": "3K6ZVyPb"}, {"extra_attributes": {"eS8PG0ZJ": {}, "EoJqReej": {}, "EA02Jkqw": {}}, "user_id": "Ak0RANYh"}], "ticket_id": "zB08iQX9"}, {"first_ticket_created_at": 84, "party_attributes": {"zMyzrIDL": {}, "BvLL1B68": {}, "u5znh4Xz": {}}, "party_id": "YL7sHPzM", "party_members": [{"extra_attributes": {"ZCZZUMu9": {}, "HiWRGh9E": {}, "l2v2NJHd": {}}, "user_id": "AikDAsSu"}, {"extra_attributes": {"Rvul431O": {}, "cMcWY5LY": {}, "EgLz61vE": {}}, "user_id": "h03HOoB1"}, {"extra_attributes": {"kVuigG1C": {}, "5gvvcEQo": {}, "xZM49Hm4": {}}, "user_id": "qLY9Cx8S"}], "ticket_id": "hZcTZXrG"}]}, {"matching_parties": [{"first_ticket_created_at": 81, "party_attributes": {"LIys2BZu": {}, "VAP1Hrpr": {}, "HsR4ywuA": {}}, "party_id": "AbDgPxLC", "party_members": [{"extra_attributes": {"zRHq7BXS": {}, "OiLC6dpA": {}, "QfxtFPrF": {}}, "user_id": "6tsioyGM"}, {"extra_attributes": {"bI2RX5e9": {}, "hLZlG50U": {}, "bhTxbeaU": {}}, "user_id": "4hxX6Ppu"}, {"extra_attributes": {"jq45XBjq": {}, "LeCEQ1nk": {}, "yIwJAmDX": {}}, "user_id": "1tEUm4pe"}], "ticket_id": "CJaVse9s"}, {"first_ticket_created_at": 92, "party_attributes": {"IppiaDzs": {}, "9u0Jpryn": {}, "LoGB0Pt3": {}}, "party_id": "fqisx6Cg", "party_members": [{"extra_attributes": {"p2NgGWeM": {}, "aOMs9kiE": {}, "ciStg9aC": {}}, "user_id": "wUGV4yI8"}, {"extra_attributes": {"qORUGqa4": {}, "7j8RIp7N": {}, "rLYbUKCm": {}}, "user_id": "RhOb4QKw"}, {"extra_attributes": {"mMA3NOGa": {}, "g3eu2049": {}, "b7SRFiCN": {}}, "user_id": "JWNAvnhk"}], "ticket_id": "DorKwpSM"}, {"first_ticket_created_at": 9, "party_attributes": {"SYck0G5n": {}, "iQCCZ5q1": {}, "LmEppnhn": {}}, "party_id": "vB2jOqjD", "party_members": [{"extra_attributes": {"1WZHVRBT": {}, "lt9Oaq6Z": {}, "naAJdjDj": {}}, "user_id": "4izfSusg"}, {"extra_attributes": {"XxAnqvZv": {}, "lxdrtLqj": {}, "skrYr0q7": {}}, "user_id": "bZhGXPq3"}, {"extra_attributes": {"tsg9aknx": {}, "soJanTTq": {}, "tMd8eJwS": {}}, "user_id": "pjJh5DmZ"}], "ticket_id": "Y9lszhqW"}]}], "namespace": "mD3ny3o0", "party_attributes": {"gEBiI7Le": {}, "NteFBLt5": {}, "jqVY4Z0b": {}}, "party_id": "ZsqRXdLo", "queued_at": 61, "region": "N2mo3cDH", "server_name": "TRZ5Wt3X", "status": "xftHYFHt", "ticket_id": "1z2gn5gd", "updated_at": "1997-05-03T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op QueueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'QueueSessionHandler' test.out

#- 10 DequeueSessionHandler
# body param: body
echo '{"match_id": "xFJmVjFW"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op DequeueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'DequeueSessionHandler' test.out

#- 11 QuerySessionHandler
$CLI_EXE \
    --sn matchmaking \
    --op QuerySessionHandler \
    --matchID 'WcA7xBl3' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'QuerySessionHandler' test.out

#- 12 UpdatePlayTimeWeight
# body param: body
echo '{"playtime": 90, "userID": "kudb28ad", "weight": 0.44723037818345657}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdatePlayTimeWeight \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'UpdatePlayTimeWeight' test.out

#- 13 GetAllPartyInAllChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInAllChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'GetAllPartyInAllChannel' test.out

#- 14 BulkGetSessions
$CLI_EXE \
    --sn matchmaking \
    --op BulkGetSessions \
    --namespace $AB_NAMESPACE \
    --matchIDs 'EArkngR1' \
    > test.out 2>&1
eval_tap $? 14 'BulkGetSessions' test.out

#- 15 ExportChannels
$CLI_EXE \
    --sn matchmaking \
    --op ExportChannels \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 15 'ExportChannels' test.out

#- 16 ImportChannels
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn matchmaking \
    --op ImportChannels \
    --namespace $AB_NAMESPACE \
    --upload $TEMP_FILE_UPLOAD \
    --strategy '9qj48BEh' \
    > test.out 2>&1
eval_tap $? 16 'ImportChannels' test.out

#- 17 GetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetSingleMatchmakingChannel \
    --channelName 'izKwW5hh' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 17 'GetSingleMatchmakingChannel' test.out

#- 18 UpdateMatchmakingChannel
# body param: body
echo '{"deployment": "H8lv31sa", "description": "u9naxWuZ", "findMatchTimeoutSeconds": 7, "joinable": true, "max_delay_ms": 96, "ruleSet": {"alliance": {"combination": {"alliances": [{"max": 88, "min": 79, "name": "evBkRXBo"}, {"max": 90, "min": 71, "name": "ypWde61V"}, {"max": 35, "min": 28, "name": "HALytsJH"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 16, "role_flexing_second": 45}, "maxNumber": 86, "minNumber": 9, "playerMaxNumber": 50, "playerMinNumber": 15}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 73, "min": 87, "name": "VRfsn8ap"}, {"max": 18, "min": 40, "name": "uHw3MBvE"}, {"max": 91, "min": 7, "name": "qHGZ0ikq"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 42, "role_flexing_second": 8}, "duration": 63, "max_number": 67, "min_number": 94, "player_max_number": 83, "player_min_number": 87}, {"combination": {"alliances": [{"max": 25, "min": 44, "name": "MpOp8rXN"}, {"max": 2, "min": 96, "name": "lN1gTGi3"}, {"max": 72, "min": 31, "name": "JNLVwX52"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 0, "role_flexing_second": 76}, "duration": 41, "max_number": 56, "min_number": 5, "player_max_number": 86, "player_min_number": 74}, {"combination": {"alliances": [{"max": 82, "min": 67, "name": "oiDNdl7j"}, {"max": 22, "min": 94, "name": "zZpiWmNE"}, {"max": 25, "min": 24, "name": "mt4BanuN"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 82, "role_flexing_second": 48}, "duration": 43, "max_number": 73, "min_number": 67, "player_max_number": 26, "player_min_number": 11}], "flexingRules": [{"attribute": "hwqxZ7b7", "criteria": "Pe1eRzcy", "duration": 83, "reference": 0.19779986664273275}, {"attribute": "xGmjjmKu", "criteria": "T3TMKOMP", "duration": 9, "reference": 0.1295388079252744}, {"attribute": "GIeOt7VR", "criteria": "ZnV8tZTa", "duration": 15, "reference": 0.9392948397030055}], "match_options": {"options": [{"name": "9iK3JLGR", "type": "gg7aaJBh"}, {"name": "Z1aIu4af", "type": "qV9AxzbR"}, {"name": "SD4ySWDB", "type": "uOX92kRz"}]}, "matchingRules": [{"attribute": "xJRh5tJK", "criteria": "uYXiKXyK", "reference": 0.5687389733777617}, {"attribute": "uTXeKHqe", "criteria": "5olD9GG5", "reference": 0.8355405388982239}, {"attribute": "D527znUe", "criteria": "UYkig9XI", "reference": 0.13863765162451414}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 45, "socialMatchmaking": true, "use_sub_gamemode": false}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdateMatchmakingChannel \
    --channelName 'miSJPxmm' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'UpdateMatchmakingChannel' test.out

#- 19 GetAllPartyInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInChannel \
    --channelName 'GAULTFkR' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 19 'GetAllPartyInChannel' test.out

#- 20 GetAllSessionsInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllSessionsInChannel \
    --channelName '2yzfEJwS' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 20 'GetAllSessionsInChannel' test.out

#- 21 AddUserIntoSessionInChannel
# body param: body
echo '{"blocked_players": ["3lWJPBiz", "c8v6XGzV", "TJoh9E76"], "party_id": "LBbWc71d", "user_id": "Gb6bgyot"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op AddUserIntoSessionInChannel \
    --channelName 'eBadC5pf' \
    --matchID 'A2OFpuiv' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AddUserIntoSessionInChannel' test.out

#- 22 DeleteSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteSessionInChannel \
    --channelName 'P8JmFI7l' \
    --matchID 'hUvc9IEL' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 22 'DeleteSessionInChannel' test.out

#- 23 DeleteUserFromSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteUserFromSessionInChannel \
    --channelName 'lJRsRxf9' \
    --matchID 'UG2uXF8M' \
    --namespace $AB_NAMESPACE \
    --userID 'zEQjKIhW' \
    > test.out 2>&1
eval_tap $? 23 'DeleteUserFromSessionInChannel' test.out

#- 24 SearchSessions
eval_tap 0 24 'SearchSessions # SKIP deprecated' test.out

#- 25 GetSessionHistoryDetailed
eval_tap 0 25 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 26 PublicGetMessages
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetMessages \
    > test.out 2>&1
eval_tap $? 26 'PublicGetMessages' test.out

#- 27 PublicGetAllMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetAllMatchmakingChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 27 'PublicGetAllMatchmakingChannel' test.out

#- 28 PublicGetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetSingleMatchmakingChannel \
    --channelName '1cw0W5RS' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 28 'PublicGetSingleMatchmakingChannel' test.out

#- 29 SearchSessionsV2
eval_tap 0 29 'SearchSessionsV2 # SKIP deprecated' test.out

#- 30 VersionCheckHandler
$CLI_EXE \
    --sn matchmaking \
    --op VersionCheckHandler \
    > test.out 2>&1
eval_tap $? 30 'VersionCheckHandler' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE