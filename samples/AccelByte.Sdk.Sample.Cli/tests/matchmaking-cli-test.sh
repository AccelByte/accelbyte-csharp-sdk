#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..30"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn matchmaking \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$CLI_EXE \
    --sn matchmaking \
    --op HandlerV3Healthz \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$CLI_EXE \
    --sn matchmaking \
    --op GetAllChannelsHandler \
    --namespace $AB_NAMESPACE \
    --limit '36' \
    --offset '59' \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
# body param: body
echo '{"deployment": "8lPWh22F", "description": "Cbsuuw42", "find_match_timeout_seconds": 42, "game_mode": "lHkzqMwq", "joinable": true, "max_delay_ms": 17, "rule_set": {"alliance": {"combination": {"alliances": [{"max": 91, "min": 41, "name": "y6eV8SO7"}, {"max": 60, "min": 84, "name": "vDsXjyzh"}, {"max": 3, "min": 28, "name": "dRdvGQdK"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 17, "role_flexing_second": 79}, "max_number": 20, "min_number": 30, "player_max_number": 2, "player_min_number": 94}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 14, "min": 100, "name": "com7xHks"}, {"max": 67, "min": 97, "name": "mTZNY7Fm"}, {"max": 42, "min": 79, "name": "PsIAv4sp"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 19, "role_flexing_second": 6}, "duration": 37, "max_number": 92, "min_number": 80, "player_max_number": 68, "player_min_number": 1}, {"combination": {"alliances": [{"max": 100, "min": 24, "name": "NNh9KI3m"}, {"max": 69, "min": 39, "name": "CTCrS9L7"}, {"max": 50, "min": 69, "name": "WPTy9McL"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 75, "role_flexing_second": 52}, "duration": 50, "max_number": 47, "min_number": 52, "player_max_number": 63, "player_min_number": 9}, {"combination": {"alliances": [{"max": 71, "min": 90, "name": "OZAdtK7U"}, {"max": 77, "min": 17, "name": "JybecPnz"}, {"max": 82, "min": 61, "name": "4cGie9uU"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 28, "role_flexing_second": 6}, "duration": 4, "max_number": 61, "min_number": 54, "player_max_number": 81, "player_min_number": 26}], "flexing_rule": [{"attribute": "zwGXUKWO", "criteria": "WnuABWcE", "duration": 69, "reference": 0.3793538617745389}, {"attribute": "CKm4Op0Q", "criteria": "jpFHzps4", "duration": 25, "reference": 0.27393809173408223}, {"attribute": "qwZfl5Gc", "criteria": "WJd8T1t1", "duration": 16, "reference": 0.5617670006048947}], "match_options": {"options": [{"name": "4epJ8NNH", "type": "vFP7DfQK"}, {"name": "HGlBbffl", "type": "RG0ZT1tx"}, {"name": "hLrKk7I5", "type": "K5VY1LPj"}]}, "matching_rule": [{"attribute": "9KfNlM6h", "criteria": "z4LUZ20L", "reference": 0.755003352484218}, {"attribute": "OeNdB7zR", "criteria": "LUhbyPcj", "reference": 0.32851937224090044}, {"attribute": "5DyzYTY7", "criteria": "ZVbrWd8R", "reference": 0.08112414142751612}], "rebalance_enable": true, "sub_game_modes": {"6E2Nqc4W": {"alliance": {"combination": {"alliances": [{"max": 95, "min": 90, "name": "p49qK8wR"}, {"max": 48, "min": 55, "name": "eC8wnErr"}, {"max": 86, "min": 76, "name": "kHpZFLDD"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 28, "role_flexing_second": 64}, "max_number": 39, "min_number": 74, "player_max_number": 51, "player_min_number": 21}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 92, "min": 40, "name": "ab5p3rv2"}, {"max": 69, "min": 66, "name": "dVrR0PGm"}, {"max": 75, "min": 77, "name": "EarqV4wc"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 75, "role_flexing_second": 48}, "duration": 25, "max_number": 28, "min_number": 97, "player_max_number": 26, "player_min_number": 53}, {"combination": {"alliances": [{"max": 89, "min": 33, "name": "CsdTF8Dn"}, {"max": 79, "min": 62, "name": "YR4o46jK"}, {"max": 44, "min": 81, "name": "qUL7DzcH"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 92, "role_flexing_second": 83}, "duration": 55, "max_number": 53, "min_number": 91, "player_max_number": 40, "player_min_number": 4}, {"combination": {"alliances": [{"max": 1, "min": 88, "name": "SLHVywok"}, {"max": 12, "min": 39, "name": "nVPB2TzN"}, {"max": 69, "min": 24, "name": "GMaovxBt"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 2, "role_flexing_second": 76}, "duration": 68, "max_number": 97, "min_number": 48, "player_max_number": 55, "player_min_number": 99}], "name": "YR5QYvYX"}, "BKiWIoIU": {"alliance": {"combination": {"alliances": [{"max": 73, "min": 64, "name": "G25Nwele"}, {"max": 52, "min": 11, "name": "KLS3Kb3e"}, {"max": 76, "min": 27, "name": "FMTz4tmK"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 3, "role_flexing_second": 43}, "max_number": 75, "min_number": 55, "player_max_number": 5, "player_min_number": 5}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 99, "min": 61, "name": "yOcegn33"}, {"max": 12, "min": 88, "name": "TMzQ7MEo"}, {"max": 16, "min": 42, "name": "PchdnY4Q"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 45, "role_flexing_second": 26}, "duration": 20, "max_number": 14, "min_number": 8, "player_max_number": 77, "player_min_number": 1}, {"combination": {"alliances": [{"max": 92, "min": 64, "name": "NFg2PJWr"}, {"max": 9, "min": 41, "name": "N69epsWV"}, {"max": 62, "min": 50, "name": "An7IlK3c"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 23, "role_flexing_second": 74}, "duration": 60, "max_number": 72, "min_number": 46, "player_max_number": 90, "player_min_number": 92}, {"combination": {"alliances": [{"max": 95, "min": 41, "name": "tTg6TpWx"}, {"max": 53, "min": 64, "name": "IZ0dmxPC"}, {"max": 18, "min": 65, "name": "3OEmwwxR"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 67, "role_flexing_second": 56}, "duration": 74, "max_number": 24, "min_number": 92, "player_max_number": 57, "player_min_number": 39}], "name": "Ft6QSlOJ"}, "XKHi8xz3": {"alliance": {"combination": {"alliances": [{"max": 90, "min": 41, "name": "aRc5mPEO"}, {"max": 29, "min": 92, "name": "GTAJ7RMc"}, {"max": 13, "min": 38, "name": "h4b7aHJ9"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 84, "role_flexing_second": 73}, "max_number": 40, "min_number": 7, "player_max_number": 42, "player_min_number": 87}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 0, "min": 42, "name": "aEfV2b7Z"}, {"max": 26, "min": 10, "name": "wUYT7kVQ"}, {"max": 41, "min": 50, "name": "wZpR6N85"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 43, "role_flexing_second": 93}, "duration": 74, "max_number": 51, "min_number": 46, "player_max_number": 45, "player_min_number": 19}, {"combination": {"alliances": [{"max": 64, "min": 11, "name": "P4dkqgBk"}, {"max": 67, "min": 2, "name": "22ZL4tYu"}, {"max": 96, "min": 41, "name": "M9SwJdlf"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 45, "role_flexing_second": 28}, "duration": 77, "max_number": 39, "min_number": 33, "player_max_number": 7, "player_min_number": 94}, {"combination": {"alliances": [{"max": 40, "min": 45, "name": "gI8IuGMW"}, {"max": 9, "min": 18, "name": "Mqyti0uI"}, {"max": 76, "min": 18, "name": "zxvdVGUU"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 19, "role_flexing_second": 74}, "duration": 67, "max_number": 85, "min_number": 34, "player_max_number": 35, "player_min_number": 16}], "name": "IwhywnZE"}}}, "session_queue_timeout_seconds": 4, "social_matchmaking": false, "use_sub_gamemode": true}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateChannelHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 DeleteChannelHandler
$CLI_EXE \
    --sn matchmaking \
    --op DeleteChannelHandler \
    --channel 'nlBr8wAI' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'DeleteChannelHandler' test.out

#- 7 StoreMatchResults
# body param: body
echo '{"match_id": "obPK1dKN", "players": [{"results": [{"attribute": "nyVpWWNq", "value": 0.9822129580026293}, {"attribute": "HX8D8Qyk", "value": 0.7531903773903011}, {"attribute": "IozXYb2n", "value": 0.5198609568949106}], "user_id": "60OTPqxq"}, {"results": [{"attribute": "CyYJ8pU7", "value": 0.8686054533351317}, {"attribute": "Cf7BcRTG", "value": 0.9816309809351309}, {"attribute": "ocko3hCA", "value": 0.781498475522917}], "user_id": "I196affs"}, {"results": [{"attribute": "yuhPDn0U", "value": 0.9963117102241241}, {"attribute": "eGzPNVAw", "value": 0.5467670818450662}, {"attribute": "8xPnDare", "value": 0.1347010171087033}], "user_id": "6YIn6jiN"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op StoreMatchResults \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'StoreMatchResults' test.out

#- 8 Rebalance
# body param: body
echo '{"match_id": "Sey86KFe"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op Rebalance \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'Rebalance' test.out

#- 9 QueueSessionHandler
# body param: body
echo '{"channel": "QCXIuHow", "client_version": "65EktjvU", "deployment": "gwmSCtTu", "error_code": 44, "error_message": "w1QNYahj", "game_mode": "qKI8tN5h", "joinable": true, "match_id": "TNifWN85", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 64, "party_attributes": {"ZOLx1GHw": {}, "UgHHhQuD": {}, "1dxtnoPw": {}}, "party_id": "aWw4Y6U4", "party_members": [{"extra_attributes": {"tbfbMtqM": {}, "3HRW9iaE": {}, "rFh2k6kD": {}}, "user_id": "RY8786pR"}, {"extra_attributes": {"peU3vInp": {}, "hDNBqdAF": {}, "xjS8DRtf": {}}, "user_id": "6NN9KNkW"}, {"extra_attributes": {"9nZ00raZ": {}, "BqCWSo5L": {}, "0Qkbnaks": {}}, "user_id": "3oMYM9dh"}], "ticket_id": "oJ1vLSRB"}, {"first_ticket_created_at": 94, "party_attributes": {"eLLFZnOp": {}, "qZ3h2e1J": {}, "RQMp2v8Z": {}}, "party_id": "GnUwhtSM", "party_members": [{"extra_attributes": {"gcQiHx9t": {}, "56B3bKyQ": {}, "JDJZ8kMV": {}}, "user_id": "32WIjuKL"}, {"extra_attributes": {"7UVYeVJg": {}, "TJ3YTCuT": {}, "PaKJNGEF": {}}, "user_id": "GWdfi2en"}, {"extra_attributes": {"fRYvFlqk": {}, "mDFlbIRj": {}, "ggFlhULO": {}}, "user_id": "vBXcuqhQ"}], "ticket_id": "MIcv2qWu"}, {"first_ticket_created_at": 97, "party_attributes": {"Xp18HVN1": {}, "LiKVYYZE": {}, "IqhNBk9J": {}}, "party_id": "XSBXmI5W", "party_members": [{"extra_attributes": {"Lb4odEIo": {}, "S47voeid": {}, "geKnkEQ9": {}}, "user_id": "Kc99Uc2J"}, {"extra_attributes": {"PXEnjBqQ": {}, "Rv4Gmn0D": {}, "ibydkEVu": {}}, "user_id": "mMwiQmiU"}, {"extra_attributes": {"hkDT9pep": {}, "fD7n9O7y": {}, "rUMv7r7K": {}}, "user_id": "XTRSdk8k"}], "ticket_id": "Gzq9SyZx"}]}, {"matching_parties": [{"first_ticket_created_at": 81, "party_attributes": {"nqCqB7jo": {}, "V1olirDH": {}, "IK0oUGhg": {}}, "party_id": "SqWqI0Tv", "party_members": [{"extra_attributes": {"pbaNufog": {}, "Z8YziI69": {}, "3QcXPr4x": {}}, "user_id": "OBEPPAPn"}, {"extra_attributes": {"jOaKekx9": {}, "SD2fsm7T": {}, "IsS15eE0": {}}, "user_id": "KD8pnCvq"}, {"extra_attributes": {"zFYxbnyY": {}, "zhX50NpY": {}, "SLjLYC8P": {}}, "user_id": "TVTjVTSQ"}], "ticket_id": "upElCQv1"}, {"first_ticket_created_at": 75, "party_attributes": {"zdBAc3zj": {}, "63eM2jIm": {}, "WViNgRkP": {}}, "party_id": "hL4nGiwa", "party_members": [{"extra_attributes": {"JXjfd4hv": {}, "LTlGptMe": {}, "QM8CfYHk": {}}, "user_id": "ltVxvRsU"}, {"extra_attributes": {"nBAL5xIx": {}, "6liRI8J9": {}, "8yiBooNq": {}}, "user_id": "oV8N66jZ"}, {"extra_attributes": {"fvrD5sbk": {}, "7bB46ceb": {}, "g0havWag": {}}, "user_id": "mKU1Si8f"}], "ticket_id": "t2e5UY1G"}, {"first_ticket_created_at": 87, "party_attributes": {"c6N6Zlil": {}, "M0I0iGQ8": {}, "qMfS5Una": {}}, "party_id": "M0h8oOea", "party_members": [{"extra_attributes": {"cTiyFwLL": {}, "KRXN9mQD": {}, "zbI3mOm0": {}}, "user_id": "7qrfzOAN"}, {"extra_attributes": {"FMuN5ro1": {}, "ZN1CITWT": {}, "qX92bV0w": {}}, "user_id": "85S2QL4p"}, {"extra_attributes": {"EiSB3i25": {}, "dpw1AyaS": {}, "uEoHaQZG": {}}, "user_id": "MtJtpiTM"}], "ticket_id": "vzVuP8EN"}]}, {"matching_parties": [{"first_ticket_created_at": 79, "party_attributes": {"ROIHsb8Y": {}, "iDmcY1Xo": {}, "WjOkHDHN": {}}, "party_id": "8MsoLytq", "party_members": [{"extra_attributes": {"ehTklgdP": {}, "8vm6v4LG": {}, "BSRZyAz2": {}}, "user_id": "2ATBnVVX"}, {"extra_attributes": {"JRpZQGXY": {}, "uE8ihohB": {}, "WNIeB2L5": {}}, "user_id": "DgvCDA0G"}, {"extra_attributes": {"iiTlLnaR": {}, "aE3P5jZj": {}, "n7Cp75HY": {}}, "user_id": "PMihRMKm"}], "ticket_id": "ujF6DVQU"}, {"first_ticket_created_at": 97, "party_attributes": {"GoqPOICo": {}, "WECcp6j9": {}, "bHzzcOpw": {}}, "party_id": "8tYsW9cH", "party_members": [{"extra_attributes": {"mGzgBW7M": {}, "1O8rlHdh": {}, "KjUMq2np": {}}, "user_id": "Jj0QCmcb"}, {"extra_attributes": {"ZWZxhsEw": {}, "7j1rExBz": {}, "GAkel248": {}}, "user_id": "sCuYw1oZ"}, {"extra_attributes": {"Iwfe6FC8": {}, "8pMxhYSS": {}, "I69YHrMB": {}}, "user_id": "GOGTk2Qz"}], "ticket_id": "4SzULWkb"}, {"first_ticket_created_at": 70, "party_attributes": {"uwfKZxLp": {}, "nF8GpZeF": {}, "L7gBm9Io": {}}, "party_id": "FlvT7Njs", "party_members": [{"extra_attributes": {"QhyW0hja": {}, "cRx9M3FF": {}, "XWm1mV1K": {}}, "user_id": "HXAZDEZO"}, {"extra_attributes": {"NZzrPrCS": {}, "69RVWjyi": {}, "bzIzuHDZ": {}}, "user_id": "QwjLbg0Z"}, {"extra_attributes": {"q1KyG6bu": {}, "B5hDPJjY": {}, "tHWWlD7z": {}}, "user_id": "8OGy3UgV"}], "ticket_id": "HVC493XI"}]}], "namespace": "tTa1ZL7p", "party_attributes": {"kbnEclSa": {}, "C9bVBFVU": {}, "bPrLn5Er": {}}, "party_id": "Mcn6uZVS", "queued_at": 33, "region": "OLFkwdTP", "server_name": "HWNVCeSz", "status": "kr6seRkI", "ticket_id": "DJeOkiYU", "updated_at": "1988-10-08T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op QueueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'QueueSessionHandler' test.out

#- 10 DequeueSessionHandler
# body param: body
echo '{"match_id": "FH6C3X8N"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op DequeueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'DequeueSessionHandler' test.out

#- 11 QuerySessionHandler
$CLI_EXE \
    --sn matchmaking \
    --op QuerySessionHandler \
    --matchID 'uNALKdsH' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'QuerySessionHandler' test.out

#- 12 UpdatePlayTimeWeight
# body param: body
echo '{"playtime": 54, "userID": "3Xy3AGZ5", "weight": 0.05605609117185195}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdatePlayTimeWeight \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'UpdatePlayTimeWeight' test.out

#- 13 GetAllPartyInAllChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInAllChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'GetAllPartyInAllChannel' test.out

#- 14 BulkGetSessions
$CLI_EXE \
    --sn matchmaking \
    --op BulkGetSessions \
    --namespace $AB_NAMESPACE \
    --matchIDs 'TRo16VIz' \
    > test.out 2>&1
eval_tap $? 14 'BulkGetSessions' test.out

#- 15 ExportChannels
$CLI_EXE \
    --sn matchmaking \
    --op ExportChannels \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 15 'ExportChannels' test.out

#- 16 ImportChannels
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn matchmaking \
    --op ImportChannels \
    --namespace $AB_NAMESPACE \
    --upload $TEMP_FILE_UPLOAD \
    --strategy '7a8P6vyI' \
    > test.out 2>&1
eval_tap $? 16 'ImportChannels' test.out

#- 17 GetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetSingleMatchmakingChannel \
    --channelName 'yWm88MIj' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 17 'GetSingleMatchmakingChannel' test.out

#- 18 UpdateMatchmakingChannel
# body param: body
echo '{"deployment": "2L7r4BY2", "description": "r77OWah6", "findMatchTimeoutSeconds": 48, "joinable": false, "max_delay_ms": 59, "ruleSet": {"alliance": {"combination": {"alliances": [{"max": 59, "min": 84, "name": "9W6H1suT"}, {"max": 62, "min": 57, "name": "pCae1xm9"}, {"max": 56, "min": 88, "name": "ezi7WrYz"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 80, "role_flexing_second": 46}, "maxNumber": 86, "minNumber": 72, "playerMaxNumber": 90, "playerMinNumber": 37}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 53, "min": 36, "name": "Kr0QW03p"}, {"max": 23, "min": 18, "name": "Z9qHjb1h"}, {"max": 55, "min": 10, "name": "qqK5IgRU"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 57, "role_flexing_second": 38}, "duration": 79, "max_number": 55, "min_number": 91, "player_max_number": 11, "player_min_number": 77}, {"combination": {"alliances": [{"max": 49, "min": 73, "name": "r4DJ9rRd"}, {"max": 82, "min": 94, "name": "NZZNf3Cx"}, {"max": 12, "min": 69, "name": "0btbvyum"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 12, "role_flexing_second": 74}, "duration": 78, "max_number": 64, "min_number": 28, "player_max_number": 23, "player_min_number": 62}, {"combination": {"alliances": [{"max": 52, "min": 52, "name": "We5APzy5"}, {"max": 24, "min": 90, "name": "2Lp3sjEz"}, {"max": 15, "min": 66, "name": "WXUvV2Oh"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 89, "role_flexing_second": 21}, "duration": 60, "max_number": 3, "min_number": 87, "player_max_number": 54, "player_min_number": 49}], "flexingRules": [{"attribute": "duPkyT7s", "criteria": "5qNkXqEk", "duration": 72, "reference": 0.5481812174306678}, {"attribute": "4V6nZjG0", "criteria": "SU1yfBrR", "duration": 10, "reference": 0.5982774417375976}, {"attribute": "1GZdKdxL", "criteria": "VQR6y6rZ", "duration": 10, "reference": 0.30976779919445785}], "match_options": {"options": [{"name": "gP9LBHtt", "type": "1gzm6JWo"}, {"name": "9Fhw6xMa", "type": "Irm6ITtJ"}, {"name": "3A1B4kG2", "type": "gF8KyWps"}]}, "matchingRules": [{"attribute": "PcPX8N2y", "criteria": "MMtej6K2", "reference": 0.9268608444782619}, {"attribute": "3lkvLi7o", "criteria": "APvlDIoi", "reference": 0.9212281997489244}, {"attribute": "gXB78LSm", "criteria": "Ea27dtub", "reference": 0.2221336956023876}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 87, "socialMatchmaking": false, "use_sub_gamemode": true}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdateMatchmakingChannel \
    --channelName 'jyhkAk41' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'UpdateMatchmakingChannel' test.out

#- 19 GetAllPartyInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInChannel \
    --channelName 'QIPPoo0j' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 19 'GetAllPartyInChannel' test.out

#- 20 GetAllSessionsInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllSessionsInChannel \
    --channelName 'fy3DtIa7' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 20 'GetAllSessionsInChannel' test.out

#- 21 AddUserIntoSessionInChannel
# body param: body
echo '{"blocked_players": ["0zwzFD0Z", "NcbvRGsy", "jWp91hBP"], "party_id": "0LXcj6h4", "user_id": "9KLHnmY6"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op AddUserIntoSessionInChannel \
    --channelName 'ugNDmYhr' \
    --matchID '5scaZXlt' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AddUserIntoSessionInChannel' test.out

#- 22 DeleteSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteSessionInChannel \
    --channelName 'ky6WEPys' \
    --matchID 'BP9E9ZBO' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 22 'DeleteSessionInChannel' test.out

#- 23 DeleteUserFromSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteUserFromSessionInChannel \
    --channelName 'sH7ANRzf' \
    --matchID 'poERlmcx' \
    --namespace $AB_NAMESPACE \
    --userID '2aWsGoxl' \
    > test.out 2>&1
eval_tap $? 23 'DeleteUserFromSessionInChannel' test.out

#- 24 SearchSessions
eval_tap 0 24 'SearchSessions # SKIP deprecated' test.out

#- 25 GetSessionHistoryDetailed
eval_tap 0 25 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 26 PublicGetMessages
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetMessages \
    > test.out 2>&1
eval_tap $? 26 'PublicGetMessages' test.out

#- 27 PublicGetAllMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetAllMatchmakingChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 27 'PublicGetAllMatchmakingChannel' test.out

#- 28 PublicGetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetSingleMatchmakingChannel \
    --channelName 'KoBbwAF6' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 28 'PublicGetSingleMatchmakingChannel' test.out

#- 29 SearchSessionsV2
eval_tap 0 29 'SearchSessionsV2 # SKIP deprecated' test.out

#- 30 VersionCheckHandler
$CLI_EXE \
    --sn matchmaking \
    --op VersionCheckHandler \
    > test.out 2>&1
eval_tap $? 30 'VersionCheckHandler' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE