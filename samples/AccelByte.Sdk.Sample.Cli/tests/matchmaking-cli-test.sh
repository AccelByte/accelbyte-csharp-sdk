#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..30"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn matchmaking \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 HandlerV3Healthz
$CLI_EXE \
    --sn matchmaking \
    --op HandlerV3Healthz \
    > test.out 2>&1
eval_tap $? 3 'HandlerV3Healthz' test.out

#- 4 GetAllChannelsHandler
$CLI_EXE \
    --sn matchmaking \
    --op GetAllChannelsHandler \
    --namespace $AB_NAMESPACE \
    --limit '29' \
    --offset '60' \
    > test.out 2>&1
eval_tap $? 4 'GetAllChannelsHandler' test.out

#- 5 CreateChannelHandler
# body param: body
echo '{"deployment": "LQXYRVhd", "description": "pO1TK8Bu", "find_match_timeout_seconds": 99, "game_mode": "va2HzQAW", "joinable": true, "max_delay_ms": 68, "rule_set": {"alliance": {"combination": {"alliances": [{"max": 77, "min": 53, "name": "iSdRxMKF"}, {"max": 25, "min": 47, "name": "GRQ4aAua"}, {"max": 29, "min": 5, "name": "ZZ0DdhXq"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 24, "role_flexing_second": 13}, "max_number": 2, "min_number": 86, "player_max_number": 38, "player_min_number": 82}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 38, "min": 30, "name": "Y56IPQYl"}, {"max": 40, "min": 74, "name": "OYN9DBHc"}, {"max": 52, "min": 66, "name": "4pFY3Ec4"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 60, "role_flexing_second": 60}, "duration": 32, "max_number": 87, "min_number": 69, "player_max_number": 43, "player_min_number": 84}, {"combination": {"alliances": [{"max": 11, "min": 90, "name": "3yqlVJ3w"}, {"max": 38, "min": 3, "name": "62Qj97oE"}, {"max": 7, "min": 8, "name": "iLw3k29O"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 0, "role_flexing_second": 75}, "duration": 12, "max_number": 74, "min_number": 73, "player_max_number": 48, "player_min_number": 17}, {"combination": {"alliances": [{"max": 16, "min": 26, "name": "HNQ0B8DR"}, {"max": 75, "min": 72, "name": "ioo99hAe"}, {"max": 40, "min": 40, "name": "A7pi2FHM"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 18, "role_flexing_second": 53}, "duration": 60, "max_number": 76, "min_number": 36, "player_max_number": 50, "player_min_number": 41}], "flexing_rule": [{"attribute": "TRuATi5G", "criteria": "sWColmMe", "duration": 8, "reference": 0.6116466207689898}, {"attribute": "iLOlKfZh", "criteria": "JgCAEt8K", "duration": 56, "reference": 0.056770932868600466}, {"attribute": "q0UVpU8D", "criteria": "zms93Hpd", "duration": 54, "reference": 0.41453651033831806}], "match_options": {"options": [{"name": "rB62xee7", "type": "ssKjQ54o"}, {"name": "jWI2BP6H", "type": "97VbYOIG"}, {"name": "I4o1Lwic", "type": "jIgcNqyU"}]}, "matching_rule": [{"attribute": "2XEjZ8le", "criteria": "izLuPBWl", "reference": 0.1881685714376693}, {"attribute": "o7HDUT4K", "criteria": "IZJfeDJh", "reference": 0.6901552304322566}, {"attribute": "XnsMTjCE", "criteria": "4OaSSWsZ", "reference": 0.2735132169150283}], "rebalance_enable": true, "sub_game_modes": {"sIlpkErE": {"alliance": {"combination": {"alliances": [{"max": 13, "min": 45, "name": "ZaqMbXfb"}, {"max": 6, "min": 30, "name": "GTS5T2mG"}, {"max": 86, "min": 92, "name": "FnaiSUoq"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 21, "role_flexing_second": 6}, "max_number": 15, "min_number": 16, "player_max_number": 29, "player_min_number": 2}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 74, "min": 7, "name": "XKcAF73P"}, {"max": 94, "min": 79, "name": "trO2OBXb"}, {"max": 80, "min": 95, "name": "oahAx5zZ"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 38, "role_flexing_second": 65}, "duration": 49, "max_number": 35, "min_number": 65, "player_max_number": 39, "player_min_number": 3}, {"combination": {"alliances": [{"max": 89, "min": 66, "name": "hbKQLrhi"}, {"max": 2, "min": 32, "name": "QgngUrnR"}, {"max": 30, "min": 11, "name": "hnalYf5w"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 76, "role_flexing_second": 86}, "duration": 40, "max_number": 83, "min_number": 92, "player_max_number": 9, "player_min_number": 51}, {"combination": {"alliances": [{"max": 9, "min": 74, "name": "BHKLwkz9"}, {"max": 8, "min": 78, "name": "O5d5czUU"}, {"max": 39, "min": 60, "name": "eo5qqIkD"}], "has_combination": false, "role_flexing_enable": true, "role_flexing_player": 72, "role_flexing_second": 61}, "duration": 14, "max_number": 96, "min_number": 32, "player_max_number": 47, "player_min_number": 3}], "name": "VnYHo8X9"}, "7rzpiTcu": {"alliance": {"combination": {"alliances": [{"max": 16, "min": 65, "name": "YbKJBjyC"}, {"max": 25, "min": 24, "name": "NOYCNTm9"}, {"max": 27, "min": 95, "name": "PFh2EHoe"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 28, "role_flexing_second": 13}, "max_number": 47, "min_number": 25, "player_max_number": 28, "player_min_number": 50}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 68, "min": 23, "name": "GxXwVQPW"}, {"max": 26, "min": 20, "name": "tx4QRzdD"}, {"max": 1, "min": 22, "name": "U4YwVOdQ"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 72, "role_flexing_second": 70}, "duration": 47, "max_number": 59, "min_number": 17, "player_max_number": 22, "player_min_number": 35}, {"combination": {"alliances": [{"max": 16, "min": 62, "name": "CYOoYPY8"}, {"max": 69, "min": 21, "name": "hpbOf9Xz"}, {"max": 97, "min": 38, "name": "U8epinfP"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 28, "role_flexing_second": 66}, "duration": 78, "max_number": 28, "min_number": 27, "player_max_number": 71, "player_min_number": 39}, {"combination": {"alliances": [{"max": 40, "min": 2, "name": "FazsCRbK"}, {"max": 36, "min": 55, "name": "9Vl7LkR1"}, {"max": 30, "min": 6, "name": "VCncvVKo"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 47, "role_flexing_second": 60}, "duration": 73, "max_number": 83, "min_number": 49, "player_max_number": 98, "player_min_number": 56}], "name": "I0CdxgyR"}, "fDtJyhJJ": {"alliance": {"combination": {"alliances": [{"max": 34, "min": 27, "name": "5J7aIldu"}, {"max": 88, "min": 96, "name": "ChP0ClTt"}, {"max": 41, "min": 78, "name": "N1C5PkOv"}], "has_combination": true, "role_flexing_enable": true, "role_flexing_player": 42, "role_flexing_second": 65}, "max_number": 82, "min_number": 5, "player_max_number": 59, "player_min_number": 38}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 9, "min": 82, "name": "bVjZ4RaX"}, {"max": 37, "min": 52, "name": "JQJ24MTQ"}, {"max": 31, "min": 9, "name": "YTd8GGC5"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 50, "role_flexing_second": 36}, "duration": 100, "max_number": 26, "min_number": 57, "player_max_number": 83, "player_min_number": 97}, {"combination": {"alliances": [{"max": 49, "min": 58, "name": "aSHCeq6C"}, {"max": 82, "min": 38, "name": "Xnv6Y6pI"}, {"max": 65, "min": 32, "name": "JY4gsmja"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 4, "role_flexing_second": 46}, "duration": 19, "max_number": 5, "min_number": 56, "player_max_number": 72, "player_min_number": 55}, {"combination": {"alliances": [{"max": 60, "min": 59, "name": "IBnzmAkM"}, {"max": 92, "min": 75, "name": "SHKPkNYl"}, {"max": 14, "min": 45, "name": "FOAayyyk"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 77, "role_flexing_second": 93}, "duration": 62, "max_number": 84, "min_number": 50, "player_max_number": 69, "player_min_number": 7}], "name": "kEo1IpBy"}}}, "session_queue_timeout_seconds": 11, "social_matchmaking": true, "use_sub_gamemode": false}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op CreateChannelHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'CreateChannelHandler' test.out

#- 6 DeleteChannelHandler
$CLI_EXE \
    --sn matchmaking \
    --op DeleteChannelHandler \
    --channel 'sjdaJSci' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'DeleteChannelHandler' test.out

#- 7 StoreMatchResults
# body param: body
echo '{"match_id": "pKDRrHFm", "players": [{"results": [{"attribute": "hg20EqU0", "value": 0.35392748463257706}, {"attribute": "mJYb79x9", "value": 0.7747006533792448}, {"attribute": "2qPqB5Nq", "value": 0.4473308745975826}], "user_id": "wIdFtCxo"}, {"results": [{"attribute": "c1NuRx7s", "value": 0.9787244954390649}, {"attribute": "jDsoEzkJ", "value": 0.8528247545850057}, {"attribute": "QCaRXUI6", "value": 0.4022085568754643}], "user_id": "ZOZSS2BM"}, {"results": [{"attribute": "dRtRW58w", "value": 0.6531914564406072}, {"attribute": "IpGaYjrn", "value": 0.5626872404937112}, {"attribute": "sjza2bsJ", "value": 0.5165387868344384}], "user_id": "JW62x8PP"}]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op StoreMatchResults \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'StoreMatchResults' test.out

#- 8 Rebalance
# body param: body
echo '{"match_id": "pEd5jG3e"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op Rebalance \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 8 'Rebalance' test.out

#- 9 QueueSessionHandler
# body param: body
echo '{"channel": "MxRrTDW8", "client_version": "HL9l6s52", "deployment": "XSwB6vQX", "error_code": 6, "error_message": "NXZD4W7t", "game_mode": "HrusfcLi", "joinable": false, "match_id": "64Cxm8KM", "matching_allies": [{"matching_parties": [{"first_ticket_created_at": 97, "party_attributes": {"huP41tTL": {}, "8WCZK966": {}, "tNEGD8qb": {}}, "party_id": "fy6ARV8F", "party_members": [{"extra_attributes": {"CjpNnWau": {}, "n5sVSU6p": {}, "YNipw9g5": {}}, "user_id": "d9bRZama"}, {"extra_attributes": {"rCSu7oW5": {}, "dPa9k6PV": {}, "AWKfRNW2": {}}, "user_id": "XqFfRjwv"}, {"extra_attributes": {"Nk3FtgdQ": {}, "A3PtJePn": {}, "xtoUYgZJ": {}}, "user_id": "RfWGoSH7"}], "ticket_id": "UhGnv39o"}, {"first_ticket_created_at": 6, "party_attributes": {"kWkqp5Re": {}, "7PhWFO8n": {}, "zSf8O7e2": {}}, "party_id": "BBynRaQI", "party_members": [{"extra_attributes": {"9PFc2k0i": {}, "Owm6puiX": {}, "oEDaiIOI": {}}, "user_id": "P7XP8mM6"}, {"extra_attributes": {"lotOuStd": {}, "FG8rwhC1": {}, "OvxYKCgL": {}}, "user_id": "HkAj6Lko"}, {"extra_attributes": {"OhS7XqJ0": {}, "qKY0KelQ": {}, "Grep5Ifu": {}}, "user_id": "mKKTSbn3"}], "ticket_id": "uEt0AnIi"}, {"first_ticket_created_at": 6, "party_attributes": {"smTDhmg1": {}, "QC86TozC": {}, "oLxILVzJ": {}}, "party_id": "GymsNfNV", "party_members": [{"extra_attributes": {"IeHJNeg6": {}, "SLz0fvpI": {}, "lFlSwoGL": {}}, "user_id": "GFUNHG99"}, {"extra_attributes": {"vmr8xuFu": {}, "wuQciNOF": {}, "S84yblU4": {}}, "user_id": "YHC3AQTF"}, {"extra_attributes": {"AS1SwJEA": {}, "UEVYczXo": {}, "utOmWH3S": {}}, "user_id": "aFHSbM1o"}], "ticket_id": "feTYIYiX"}]}, {"matching_parties": [{"first_ticket_created_at": 7, "party_attributes": {"OMKJmUAw": {}, "uMqaXmAY": {}, "fOfFpOT1": {}}, "party_id": "u5iFfip1", "party_members": [{"extra_attributes": {"5dGJT8C9": {}, "Xh7EMqLe": {}, "6b6RR4RS": {}}, "user_id": "8vOXlOYA"}, {"extra_attributes": {"H1CBaTE0": {}, "2MDzoGFo": {}, "2wvX8NtC": {}}, "user_id": "1h6LE3Vp"}, {"extra_attributes": {"Wc7AYaaN": {}, "W8E9Sukc": {}, "V4avZwef": {}}, "user_id": "sL4nVHw1"}], "ticket_id": "fQXJtNbD"}, {"first_ticket_created_at": 93, "party_attributes": {"sEAvJnio": {}, "oWJsQUMh": {}, "tnwcd64z": {}}, "party_id": "CrENI3yb", "party_members": [{"extra_attributes": {"7tyInzvz": {}, "lxD7yIU4": {}, "c93dkH6g": {}}, "user_id": "4C3TeB1k"}, {"extra_attributes": {"XfgGRjXa": {}, "bXXoDMZ0": {}, "KDlVloct": {}}, "user_id": "UwCuAlcB"}, {"extra_attributes": {"zOILjZZ8": {}, "VyKzUI5f": {}, "3tTotoCK": {}}, "user_id": "hH5slSEi"}], "ticket_id": "FMV7Viuh"}, {"first_ticket_created_at": 72, "party_attributes": {"9ltuv9mr": {}, "BM8GeNfb": {}, "64JnUYAH": {}}, "party_id": "pvzEH5Tq", "party_members": [{"extra_attributes": {"uKACjSSO": {}, "IXC6ysXO": {}, "b9cVRJVj": {}}, "user_id": "OgGAIqoy"}, {"extra_attributes": {"QJAq8I9U": {}, "9CfFvBzY": {}, "QKSl31aa": {}}, "user_id": "xxTaLToY"}, {"extra_attributes": {"qPjx30Qq": {}, "PdKPfOhj": {}, "OiyYe6ws": {}}, "user_id": "k860giyQ"}], "ticket_id": "HCxvNFJP"}]}, {"matching_parties": [{"first_ticket_created_at": 77, "party_attributes": {"TMTdAHQV": {}, "I0IuqLDT": {}, "K7DWwZKA": {}}, "party_id": "QJajvJHG", "party_members": [{"extra_attributes": {"oDIz52Wq": {}, "LSd1P24d": {}, "JD2ZWpyS": {}}, "user_id": "MN977gSy"}, {"extra_attributes": {"9GZ4U5GJ": {}, "4NFHDpfa": {}, "7yhb3eZK": {}}, "user_id": "ab8sf4Ft"}, {"extra_attributes": {"yWgkMixy": {}, "MMRFI4ef": {}, "rHToCsRV": {}}, "user_id": "wmOL40OJ"}], "ticket_id": "5x51ZaWr"}, {"first_ticket_created_at": 80, "party_attributes": {"g9NT3I8T": {}, "8U9otIUd": {}, "TJ9Hb6eL": {}}, "party_id": "a2CadPEc", "party_members": [{"extra_attributes": {"eGgtzXUj": {}, "vFRolLIk": {}, "CenIZAc4": {}}, "user_id": "rjYReEzI"}, {"extra_attributes": {"A6WQZtQI": {}, "d6eFij8s": {}, "wlOI1SQV": {}}, "user_id": "JEkQEQ3e"}, {"extra_attributes": {"KC4cG6pH": {}, "YOXFx0Lc": {}, "vCRC3krb": {}}, "user_id": "V0FVFc3P"}], "ticket_id": "Rmz6GinM"}, {"first_ticket_created_at": 30, "party_attributes": {"wjVC40HM": {}, "6AP2uZrp": {}, "oThXsz11": {}}, "party_id": "QfsvXw8S", "party_members": [{"extra_attributes": {"bjNl9TN7": {}, "dZqmoLJh": {}, "CSPzqQ5Y": {}}, "user_id": "pYv4x1Dr"}, {"extra_attributes": {"KQ6Ee60U": {}, "lhKQildM": {}, "zXMGVdUZ": {}}, "user_id": "utL4RmD9"}, {"extra_attributes": {"cDRZ3AaS": {}, "UKO7brf5": {}, "9PfGDtvM": {}}, "user_id": "Ox8iqXQs"}], "ticket_id": "vKYhmeRE"}]}], "namespace": "dmsgewa3", "party_attributes": {"XlJHuh3x": {}, "GyqO6ZvQ": {}, "053oIXAD": {}}, "party_id": "2S14fzXs", "queued_at": 11, "region": "9yDRq3wp", "server_name": "LAeRcJFv", "status": "NHWeQrZH", "ticket_id": "8HWgWKjN", "updated_at": "1993-11-02T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op QueueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'QueueSessionHandler' test.out

#- 10 DequeueSessionHandler
# body param: body
echo '{"match_id": "Bk8mbzzb"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op DequeueSessionHandler \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'DequeueSessionHandler' test.out

#- 11 QuerySessionHandler
$CLI_EXE \
    --sn matchmaking \
    --op QuerySessionHandler \
    --matchID 'RgUywJOM' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'QuerySessionHandler' test.out

#- 12 UpdatePlayTimeWeight
# body param: body
echo '{"playtime": 60, "userID": "Vo7kZeuJ", "weight": 0.6128707672949891}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdatePlayTimeWeight \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'UpdatePlayTimeWeight' test.out

#- 13 GetAllPartyInAllChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInAllChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'GetAllPartyInAllChannel' test.out

#- 14 BulkGetSessions
$CLI_EXE \
    --sn matchmaking \
    --op BulkGetSessions \
    --namespace $AB_NAMESPACE \
    --matchIDs 'FxaZtp7d' \
    > test.out 2>&1
eval_tap $? 14 'BulkGetSessions' test.out

#- 15 ExportChannels
$CLI_EXE \
    --sn matchmaking \
    --op ExportChannels \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 15 'ExportChannels' test.out

#- 16 ImportChannels
# form data upload: file
echo 'tmp.dat' > $TEMP_FILE_UPLOAD
$CLI_EXE \
    --sn matchmaking \
    --op ImportChannels \
    --namespace $AB_NAMESPACE \
    --upload $TEMP_FILE_UPLOAD \
    --strategy 'IMSX9Xqp' \
    > test.out 2>&1
eval_tap $? 16 'ImportChannels' test.out

#- 17 GetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetSingleMatchmakingChannel \
    --channelName 'NNgWqAGM' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 17 'GetSingleMatchmakingChannel' test.out

#- 18 UpdateMatchmakingChannel
# body param: body
echo '{"deployment": "Xbtmh1AA", "description": "Zp38uEzc", "findMatchTimeoutSeconds": 68, "joinable": true, "max_delay_ms": 37, "ruleSet": {"alliance": {"combination": {"alliances": [{"max": 34, "min": 81, "name": "ZrgegOEQ"}, {"max": 82, "min": 70, "name": "g9YVoXZV"}, {"max": 30, "min": 3, "name": "IuZOCLtJ"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 19, "role_flexing_second": 55}, "maxNumber": 99, "minNumber": 65, "playerMaxNumber": 86, "playerMinNumber": 74}, "alliance_flexing_rule": [{"combination": {"alliances": [{"max": 75, "min": 97, "name": "woBbYs4U"}, {"max": 2, "min": 38, "name": "vGj7T37Q"}, {"max": 29, "min": 20, "name": "DpHYBTc3"}], "has_combination": false, "role_flexing_enable": false, "role_flexing_player": 92, "role_flexing_second": 31}, "duration": 26, "max_number": 80, "min_number": 88, "player_max_number": 40, "player_min_number": 57}, {"combination": {"alliances": [{"max": 75, "min": 78, "name": "raxK5UTi"}, {"max": 74, "min": 58, "name": "7asgby1j"}, {"max": 80, "min": 35, "name": "Bux9Ol8f"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 15, "role_flexing_second": 88}, "duration": 74, "max_number": 37, "min_number": 94, "player_max_number": 32, "player_min_number": 67}, {"combination": {"alliances": [{"max": 50, "min": 38, "name": "YmGSpVOZ"}, {"max": 80, "min": 72, "name": "pOQ15QDZ"}, {"max": 79, "min": 0, "name": "bUGjavYi"}], "has_combination": true, "role_flexing_enable": false, "role_flexing_player": 68, "role_flexing_second": 42}, "duration": 35, "max_number": 59, "min_number": 91, "player_max_number": 29, "player_min_number": 96}], "flexingRules": [{"attribute": "Bf7aDkob", "criteria": "B0CZHey2", "duration": 67, "reference": 0.23834942802499615}, {"attribute": "QKpt5Q0n", "criteria": "hnEL67lU", "duration": 68, "reference": 0.8499902883868105}, {"attribute": "lV1grW65", "criteria": "gtmnxBCn", "duration": 94, "reference": 0.04629854051476634}], "match_options": {"options": [{"name": "NQwk6ws8", "type": "2yQI1zV7"}, {"name": "F8prglX0", "type": "SySVmFAk"}, {"name": "XzFGt27W", "type": "Yr9rIpCK"}]}, "matchingRules": [{"attribute": "ZYv2l2RA", "criteria": "20Juywxe", "reference": 0.5173268341711983}, {"attribute": "2z9UFKMB", "criteria": "4SiICUwQ", "reference": 0.26219178838445967}, {"attribute": "HP0tYsXs", "criteria": "hNA4fXlD", "reference": 0.1264142129090281}], "sub_game_modes": {}}, "sessionQueueTimeoutSeconds": 99, "socialMatchmaking": false, "use_sub_gamemode": true}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op UpdateMatchmakingChannel \
    --channelName 'FA7T9B41' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'UpdateMatchmakingChannel' test.out

#- 19 GetAllPartyInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllPartyInChannel \
    --channelName 'tYbLHsPL' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 19 'GetAllPartyInChannel' test.out

#- 20 GetAllSessionsInChannel
$CLI_EXE \
    --sn matchmaking \
    --op GetAllSessionsInChannel \
    --channelName '7DLVHfR4' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 20 'GetAllSessionsInChannel' test.out

#- 21 AddUserIntoSessionInChannel
# body param: body
echo '{"blocked_players": ["mu0bBgKr", "xBBnGBWd", "ECeVGQcg"], "party_id": "DJQGn4e3", "user_id": "DIxFmy98"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn matchmaking \
    --op AddUserIntoSessionInChannel \
    --channelName '9WD9ODTi' \
    --matchID 'MmPjDjjO' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AddUserIntoSessionInChannel' test.out

#- 22 DeleteSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteSessionInChannel \
    --channelName 'o7YanHCS' \
    --matchID 'Vsy5N7uI' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 22 'DeleteSessionInChannel' test.out

#- 23 DeleteUserFromSessionInChannel
$CLI_EXE \
    --sn matchmaking \
    --op DeleteUserFromSessionInChannel \
    --channelName 'vwtBijy6' \
    --matchID 'k4xrSWRr' \
    --namespace $AB_NAMESPACE \
    --userID '7NpneinU' \
    > test.out 2>&1
eval_tap $? 23 'DeleteUserFromSessionInChannel' test.out

#- 24 SearchSessions
eval_tap 0 24 'SearchSessions # SKIP deprecated' test.out

#- 25 GetSessionHistoryDetailed
eval_tap 0 25 'GetSessionHistoryDetailed # SKIP deprecated' test.out

#- 26 PublicGetMessages
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetMessages \
    > test.out 2>&1
eval_tap $? 26 'PublicGetMessages' test.out

#- 27 PublicGetAllMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetAllMatchmakingChannel \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 27 'PublicGetAllMatchmakingChannel' test.out

#- 28 PublicGetSingleMatchmakingChannel
$CLI_EXE \
    --sn matchmaking \
    --op PublicGetSingleMatchmakingChannel \
    --channelName 'wPajImnP' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 28 'PublicGetSingleMatchmakingChannel' test.out

#- 29 SearchSessionsV2
eval_tap 0 29 'SearchSessionsV2 # SKIP deprecated' test.out

#- 30 VersionCheckHandler
$CLI_EXE \
    --sn matchmaking \
    --op VersionCheckHandler \
    > test.out 2>&1
eval_tap $? 30 'VersionCheckHandler' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE