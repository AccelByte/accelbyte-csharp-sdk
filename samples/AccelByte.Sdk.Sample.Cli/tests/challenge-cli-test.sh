#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..38"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 AdminGetChallenges
$CLI_EXE \
    --sn challenge \
    --op AdminGetChallenges \
    --namespace $AB_NAMESPACE \
    --keyword 'bBuz5zkoaUEzGS3q' \
    --limit '12' \
    --offset '79' \
    --sortBy 'updatedAt:asc' \
    --status 'TIED' \
    --tags '["qpQwkRRHkaiKsmIi", "RLR3IlNJKxhPfWV6", "dIabcFbSmeuIBroF"]' \
    > test.out 2>&1
eval_tap $? 2 'AdminGetChallenges' test.out

#- 3 AdminCreateChallenge
# body param: body
echo '{"activeGoalsPerRotation": 99, "assignmentRule": "CUSTOM", "code": "oXFeqeuI2oMJ0cgA", "description": "oGfXepE3r5AQUBqS", "endAfter": 75, "endDate": "1975-06-14T00:00:00Z", "goalsVisibility": "PERIODONLY", "name": "J58QqcV3IcuNs9MF", "randomizedPerRotation": true, "repeatAfter": 17, "resetConfig": {"resetDate": 93, "resetDay": 1, "resetTime": "2KD18yrWorpC65VJ"}, "rotation": "DAILY", "startDate": "1976-02-04T00:00:00Z", "tags": ["q1z1KJmKedBfbWvK", "a5Ou124TsbQsxYFx", "GGHrfQkgXkiA5IZP"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminCreateChallenge \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'AdminCreateChallenge' test.out

#- 4 AdminGetActiveChallenges
$CLI_EXE \
    --sn challenge \
    --op AdminGetActiveChallenges \
    --namespace $AB_NAMESPACE \
    --userId 'qCqp9vcyt67WAfWX' \
    --limit '11' \
    --offset '30' \
    > test.out 2>&1
eval_tap $? 4 'AdminGetActiveChallenges' test.out

#- 5 AdminGetChallenge
$CLI_EXE \
    --sn challenge \
    --op AdminGetChallenge \
    --challengeCode 'UfwGB03tz8qIH4uR' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetChallenge' test.out

#- 6 AdminUpdateChallenge
# body param: body
echo '{"activeGoalsPerRotation": 7, "assignmentRule": "UNSCHEDULED", "description": "08HN6s9p8Y5c9eIt", "endAfter": 73, "endDate": "1996-06-06T00:00:00Z", "goalsVisibility": "PERIODONLY", "name": "BywsSSZTGlubsmhj", "randomizedPerRotation": true, "repeatAfter": 4, "resetConfig": {"resetDate": 81, "resetDay": 92, "resetTime": "tj8FOvKZjs1tLpER"}, "rotation": "DAILY", "startDate": "1989-05-10T00:00:00Z", "tags": ["7LzPoORBkRmZ0A2z", "yZsb4FvWFIHPIbOj", "pls9BZTYc5BsdSSV"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminUpdateChallenge \
    --challengeCode 'aAzzn4GbgkKeCaS6' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 6 'AdminUpdateChallenge' test.out

#- 7 AdminDeleteChallenge
$CLI_EXE \
    --sn challenge \
    --op AdminDeleteChallenge \
    --challengeCode 'qyUCscHXs8PlOBlf' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 7 'AdminDeleteChallenge' test.out

#- 8 AdminGetGoals
$CLI_EXE \
    --sn challenge \
    --op AdminGetGoals \
    --challengeCode 'UOqv7WmCuqcsNM7Y' \
    --namespace $AB_NAMESPACE \
    --limit '54' \
    --offset '37' \
    --sortBy 'createdAt:asc' \
    > test.out 2>&1
eval_tap $? 8 'AdminGetGoals' test.out

#- 9 AdminCreateGoal
# body param: body
echo '{"code": "cQfucSq2X8gFuJOR", "description": "k4j04YfnXTsQUrA0", "isActive": true, "name": "WyKl2K5mCSoGeQCa", "requirementGroups": [{"operator": "AND", "predicates": [{"matcher": "EQUAL", "parameterName": "0JHfof2Hwi7vg3os", "parameterType": "ACHIEVEMENT", "statCycleId": "oSTxNCK9AIjNmbfo", "targetValue": 0.7745398898284622}, {"matcher": "GREATER_THAN", "parameterName": "bDq5jPqzhN0YdGSr", "parameterType": "STATISTIC_CYCLE", "statCycleId": "Pewrf19Njm50xCDl", "targetValue": 0.6678047284770188}, {"matcher": "EQUAL", "parameterName": "hBC0uyMR4Xf2nfYv", "parameterType": "USERACCOUNT", "statCycleId": "vG8uQ14AhsxaALiB", "targetValue": 0.3606180248101345}]}, {"operator": "AND", "predicates": [{"matcher": "LESS_THAN_EQUAL", "parameterName": "JornrCQpMJj5igqa", "parameterType": "STATISTIC", "statCycleId": "LBN9YGVPtkjt0OyB", "targetValue": 0.18749482223021008}, {"matcher": "LESS_THAN_EQUAL", "parameterName": "rHlPcXGGl0Xw3veB", "parameterType": "ACHIEVEMENT", "statCycleId": "zZVcGomWF1oAqUNF", "targetValue": 0.47712538418779127}, {"matcher": "GREATER_THAN_EQUAL", "parameterName": "H91fC3aJEoqWaFAG", "parameterType": "STATISTIC_CYCLE", "statCycleId": "7pRVZVLJiDx3au9b", "targetValue": 0.9984266571835294}]}, {"operator": "AND", "predicates": [{"matcher": "GREATER_THAN", "parameterName": "eiMRkcOr1L0TMIcz", "parameterType": "ACHIEVEMENT", "statCycleId": "jfdUQHa3RxspSqwd", "targetValue": 0.028385446983700713}, {"matcher": "LESS_THAN_EQUAL", "parameterName": "2sgzfaQrUCW9fgo6", "parameterType": "USERACCOUNT", "statCycleId": "uv1bkFx8DmbC9UqY", "targetValue": 0.050241698391830014}, {"matcher": "GREATER_THAN_EQUAL", "parameterName": "QTpvLH6QPEBP8kSS", "parameterType": "USERACCOUNT", "statCycleId": "etxObeisZelKuD0i", "targetValue": 0.5686017699127481}]}], "rewards": [{"itemId": "6fs3zL9H4WxGWRH7", "itemName": "fz4BdPhLtHRJOImS", "qty": 0.2722188379901215, "type": "STATISTIC"}, {"itemId": "7aeAaGq0NIj53gXk", "itemName": "mrayvcIYiWxIAxfv", "qty": 0.6089764736884469, "type": "STATISTIC"}, {"itemId": "k10b27RdU8VceYQ9", "itemName": "erPYQ5yVcQuvDbGM", "qty": 0.2624789129991921, "type": "ENTITLEMENT"}], "schedule": {"endTime": "1986-07-26T00:00:00Z", "order": 68, "startTime": "1976-07-04T00:00:00Z"}, "tags": ["CQwMBcQUNPHN8YZT", "0yJJ0uCjjaNCRV3h", "SIiTEoTCSxjAqg9o"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminCreateGoal \
    --challengeCode 'GVEdC8mQir1Af0G6' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 9 'AdminCreateGoal' test.out

#- 10 AdminGetGoal
$CLI_EXE \
    --sn challenge \
    --op AdminGetGoal \
    --challengeCode 'OrPH6ZsjpPgHKISH' \
    --code 'tB8tWdJM9Qc5HmR0' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 10 'AdminGetGoal' test.out

#- 11 AdminUpdateGoals
# body param: body
echo '{"description": "vknXO45AUtNXSTIt", "isActive": true, "name": "XVmrtRlq1jv60HTn", "requirementGroups": [{"operator": "AND", "predicates": [{"matcher": "LESS_THAN_EQUAL", "parameterName": "RDrlzPFQmNu3ERxV", "parameterType": "STATISTIC_CYCLE", "statCycleId": "UTaiSzfi0FnBERe8", "targetValue": 0.2658146763717527}, {"matcher": "EQUAL", "parameterName": "YRTYSaZw4NqSNylc", "parameterType": "ENTITLEMENT", "statCycleId": "fKmUkzj9mHFpff2v", "targetValue": 0.4715378706549552}, {"matcher": "GREATER_THAN", "parameterName": "dGIOAZ86un0L98WU", "parameterType": "ENTITLEMENT", "statCycleId": "OgO5W8SUaZjCpNtJ", "targetValue": 0.7197127858161474}]}, {"operator": "AND", "predicates": [{"matcher": "GREATER_THAN", "parameterName": "wRYbtdK2r4wWs6Ip", "parameterType": "STATISTIC_CYCLE", "statCycleId": "447Oa51m6VLfjsw2", "targetValue": 0.9655740276174728}, {"matcher": "GREATER_THAN_EQUAL", "parameterName": "UuNlT86N9yO0vyD6", "parameterType": "USERACCOUNT", "statCycleId": "sf2qSAtizV9hzsVb", "targetValue": 0.24444896304655028}, {"matcher": "LESS_THAN_EQUAL", "parameterName": "VVovpAAXNzcpbmX3", "parameterType": "ENTITLEMENT", "statCycleId": "bknfVv4nm70TCayY", "targetValue": 0.4319119104637936}]}, {"operator": "AND", "predicates": [{"matcher": "LESS_THAN_EQUAL", "parameterName": "V9TVauFcGkPgQ0hb", "parameterType": "USERACCOUNT", "statCycleId": "tLrsMeoZiRYkbhEM", "targetValue": 0.8673578589267221}, {"matcher": "LESS_THAN", "parameterName": "RrReRajlpk8lfuiJ", "parameterType": "ACHIEVEMENT", "statCycleId": "vKfFRqBam8jPtKHT", "targetValue": 0.20594730633920166}, {"matcher": "LESS_THAN", "parameterName": "EWQMmCkIqwqpoTVC", "parameterType": "USERACCOUNT", "statCycleId": "rcaVozsjIXO2EUsA", "targetValue": 0.09663625284300248}]}], "rewards": [{"itemId": "Bvo6Llcalks2R3VM", "itemName": "tipTVxXAF8KhOKqb", "qty": 0.28372938561183725, "type": "STATISTIC"}, {"itemId": "CzRV1paELj5dw3LK", "itemName": "0gPYhPPG5sAIfYtY", "qty": 0.23679576308154082, "type": "STATISTIC"}, {"itemId": "6XITL0QEkadMSQlu", "itemName": "AoED9oYwS8oLyErK", "qty": 0.3485605129718019, "type": "STATISTIC"}], "schedule": {"endTime": "1984-10-05T00:00:00Z", "order": 64, "startTime": "1976-09-29T00:00:00Z"}, "tags": ["R7c4x5bIk8pVpxdU", "WOPel3TiwTycqpVd", "INXzvkSp0WbvxQWI"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminUpdateGoals \
    --challengeCode '0QGCOx7eICkauWbF' \
    --code 'rSnU7d1BuhdwliTS' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 11 'AdminUpdateGoals' test.out

#- 12 AdminDeleteGoal
$CLI_EXE \
    --sn challenge \
    --op AdminDeleteGoal \
    --challengeCode 'DdmGVfegiD3mrVQa' \
    --code 'Ur3oT88Dfc7114QF' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 12 'AdminDeleteGoal' test.out

#- 13 AdminListSchedulesByGoal
$CLI_EXE \
    --sn challenge \
    --op AdminListSchedulesByGoal \
    --challengeCode 'GwTzBVDg5v71kGCE' \
    --code 't7h1mVwIQCJmQkvW' \
    --namespace $AB_NAMESPACE \
    --limit '3' \
    --offset '88' \
    --userId 'ErwIxkaTnYtr1YDn' \
    > test.out 2>&1
eval_tap $? 13 'AdminListSchedulesByGoal' test.out

#- 14 AdminGetPeriods
$CLI_EXE \
    --sn challenge \
    --op AdminGetPeriods \
    --challengeCode 'aXB0JOS4XKVT66sH' \
    --namespace $AB_NAMESPACE \
    --limit '58' \
    --offset '86' \
    > test.out 2>&1
eval_tap $? 14 'AdminGetPeriods' test.out

#- 15 AdminRandomizeChallenge
$CLI_EXE \
    --sn challenge \
    --op AdminRandomizeChallenge \
    --challengeCode 'aOyATBFgqLeAzvdc' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 15 'AdminRandomizeChallenge' test.out

#- 16 AdminListSchedules
$CLI_EXE \
    --sn challenge \
    --op AdminListSchedules \
    --challengeCode 'UEhWRo6ROvbuPQwl' \
    --namespace $AB_NAMESPACE \
    --dateTime '1983-01-25T00:00:00Z' \
    --limit '79' \
    --offset '98' \
    --userId 'roT2hNfKJ7q8sifS' \
    > test.out 2>&1
eval_tap $? 16 'AdminListSchedules' test.out

#- 17 AdminDeleteTiedChallenge
$CLI_EXE \
    --sn challenge \
    --op AdminDeleteTiedChallenge \
    --challengeCode 'PmYSsBxtyKWssEn5' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 17 'AdminDeleteTiedChallenge' test.out

#- 18 AdminUpdateTiedChallengeSchedule
# body param: body
echo '{"action": "STOP", "endDate": "1996-06-18T00:00:00Z"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminUpdateTiedChallengeSchedule \
    --challengeCode 'v6OuG6RR1jPh8Rbl' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'AdminUpdateTiedChallengeSchedule' test.out

#- 19 AdminGetAssignmentPlugin
$CLI_EXE \
    --sn challenge \
    --op AdminGetAssignmentPlugin \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 19 'AdminGetAssignmentPlugin' test.out

#- 20 AdminUpdateAssignmentPlugin
# body param: body
echo '{"appName": "vnfNiABRf1gdXM7Q", "extendType": "APP", "grpcServerAddress": "Sw1J42fthKUobas2"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminUpdateAssignmentPlugin \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 20 'AdminUpdateAssignmentPlugin' test.out

#- 21 AdminCreateAssignmentPlugin
# body param: body
echo '{"appName": "CAlSxxVhDR9hlazn", "extendType": "APP", "grpcServerAddress": "rL31HuYKsCBBgwb1"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminCreateAssignmentPlugin \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AdminCreateAssignmentPlugin' test.out

#- 22 AdminDeleteAssignmentPlugin
$CLI_EXE \
    --sn challenge \
    --op AdminDeleteAssignmentPlugin \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 22 'AdminDeleteAssignmentPlugin' test.out

#- 23 AdminEvaluateProgress
# body param: body
echo '{"userIds": ["hGjHJgxrcEvnfJqU", "4hCv5egSQDePKSZK", "p6zwDQS1atvJrALa"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminEvaluateProgress \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'AdminEvaluateProgress' test.out

#- 24 AdminClaimUsersRewards
# body param: body
echo '[{"rewardIds": ["iplJgRhedl5Ewh3j", "DayYStUiBB1yz3iP", "8gH88UenlMVzIOP8"], "userId": "NOf91LsD7cWWOgAs"}, {"rewardIds": ["8ThMpAGIapYftYZk", "BXiEhdiS41VBAEUv", "oBlbH02bobxtljIf"], "userId": "HBgjP9onbxFcxS2O"}, {"rewardIds": ["ZZfXO3HkJTOPscPA", "2n25C1zEnAMGmFy7", "w6eqnMeKFo7U8Scr"], "userId": "9xm68w7s9RMx2hc4"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminClaimUsersRewards \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'AdminClaimUsersRewards' test.out

#- 25 AdminClaimUserRewardsByGoalCode
# body param: body
echo '{"goalCode": "5QX234xnqlbRAPFQ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminClaimUserRewardsByGoalCode \
    --challengeCode 'sca6n9vGZTCCXQ2L' \
    --namespace $AB_NAMESPACE \
    --userId 'f7jtexB613cbiJEU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'AdminClaimUserRewardsByGoalCode' test.out

#- 26 AdminGetUserProgression
$CLI_EXE \
    --sn challenge \
    --op AdminGetUserProgression \
    --challengeCode 'ePVZQaoEY2zrpLuv' \
    --namespace $AB_NAMESPACE \
    --userId 'rx96OOz45vMiR3QY' \
    --dateTime '1997-10-15T00:00:00Z' \
    --goalCode 'RVypSvYXKz4BGjbs' \
    --limit '36' \
    --offset '55' \
    --tags '["RBV8aztJ86yQK1As", "C18UO6JcXmwQfkse", "TpH6l2Dv8SvqYKc5"]' \
    > test.out 2>&1
eval_tap $? 26 'AdminGetUserProgression' test.out

#- 27 AdminGetUserRewards
$CLI_EXE \
    --sn challenge \
    --op AdminGetUserRewards \
    --namespace $AB_NAMESPACE \
    --userId '6PcPSL2xmjViKkKw' \
    --challengeCode '4gHA4CaLsPqRsTdK' \
    --goalProgressionId 'zcKtkGcvn44NWse6' \
    --limit '98' \
    --offset '77' \
    --sortBy 'updatedAt:desc' \
    --status 'UNCLAIMED' \
    > test.out 2>&1
eval_tap $? 27 'AdminGetUserRewards' test.out

#- 28 AdminClaimUserRewards
# body param: body
echo '{"rewardIDs": ["kM1VTrQBywhJ7lbB", "Lw9xy1WQM5qUS8ba", "UqkzSr41y6RPBHJu"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op AdminClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --userId 'Pjj8zDwOk0IgmYfU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 28 'AdminClaimUserRewards' test.out

#- 29 GetChallenges
$CLI_EXE \
    --sn challenge \
    --op GetChallenges \
    --namespace $AB_NAMESPACE \
    --keyword 'TpFzyQhPVhRGX9xl' \
    --limit '96' \
    --offset '54' \
    --sortBy 'updatedAt:asc' \
    --status 'RETIRED' \
    --tags '["hXI8mL8OIhvP68xE", "68dzohxhbej2caII", "fkXDY7jnhp3qY6T7"]' \
    > test.out 2>&1
eval_tap $? 29 'GetChallenges' test.out

#- 30 PublicGetScheduledGoals
$CLI_EXE \
    --sn challenge \
    --op PublicGetScheduledGoals \
    --challengeCode 'TUEBotSNIwGhia6c' \
    --namespace $AB_NAMESPACE \
    --limit '34' \
    --offset '96' \
    --tags '["oWmnhtuzxir12r0V", "UWI0kJAczj5Apcsi", "EQ65llgGnTHAsTCZ"]' \
    > test.out 2>&1
eval_tap $? 30 'PublicGetScheduledGoals' test.out

#- 31 PublicListSchedulesByGoal
$CLI_EXE \
    --sn challenge \
    --op PublicListSchedulesByGoal \
    --challengeCode 'a7xE4nwGKlbPRxfu' \
    --code 'cxoRKFLxxcL9SyuH' \
    --namespace $AB_NAMESPACE \
    --limit '2' \
    --offset '44' \
    > test.out 2>&1
eval_tap $? 31 'PublicListSchedulesByGoal' test.out

#- 32 PublicListSchedules
$CLI_EXE \
    --sn challenge \
    --op PublicListSchedules \
    --challengeCode 'x0ACteueMOmYP4Sg' \
    --namespace $AB_NAMESPACE \
    --dateTime '1983-03-08T00:00:00Z' \
    --limit '55' \
    --offset '9' \
    > test.out 2>&1
eval_tap $? 32 'PublicListSchedules' test.out

#- 33 PublicClaimUserRewardsByGoalCode
# body param: body
echo '{"goalCode": "IQTTKsdmtHu1dG0u"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op PublicClaimUserRewardsByGoalCode \
    --challengeCode 's7kIWLcgKgU9406t' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 33 'PublicClaimUserRewardsByGoalCode' test.out

#- 34 EvaluateMyProgress
$CLI_EXE \
    --sn challenge \
    --op EvaluateMyProgress \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 34 'EvaluateMyProgress' test.out

#- 35 PublicGetUserProgression
$CLI_EXE \
    --sn challenge \
    --op PublicGetUserProgression \
    --challengeCode 'dRDqr3cpVbaH69Ny' \
    --namespace $AB_NAMESPACE \
    --dateTime '1994-02-12T00:00:00Z' \
    --goalCode 'fGE59942bCwgpzUf' \
    --limit '5' \
    --offset '26' \
    --tags '["Q0ixpqYtkZuhL6qb", "AhRExsnbWSH45Lar", "TmOqto4OtwF9uPUA"]' \
    > test.out 2>&1
eval_tap $? 35 'PublicGetUserProgression' test.out

#- 36 PublicGetPastUserProgression
$CLI_EXE \
    --sn challenge \
    --op PublicGetPastUserProgression \
    --challengeCode 'xerdIqWmOoMyYp2t' \
    --index '91' \
    --namespace $AB_NAMESPACE \
    --goalCode 'xug8MpqczRvUdK1u' \
    --limit '83' \
    --offset '97' \
    --tags '["WuNQq4v8FnVzdbNW", "1xuV7rVei1o9zV6r", "hVfcQmLfEn5ZUGeY"]' \
    > test.out 2>&1
eval_tap $? 36 'PublicGetPastUserProgression' test.out

#- 37 PublicGetUserRewards
$CLI_EXE \
    --sn challenge \
    --op PublicGetUserRewards \
    --namespace $AB_NAMESPACE \
    --challengeCode 'lOwODWBAz6skHMfl' \
    --goalProgressionId '4Hjw9KEnx8cNfDK4' \
    --limit '52' \
    --offset '84' \
    --sortBy 'createdAt:desc' \
    --status 'CLAIMED' \
    > test.out 2>&1
eval_tap $? 37 'PublicGetUserRewards' test.out

#- 38 PublicClaimUserRewards
# body param: body
echo '{"rewardIDs": ["wYhRoNPwKema6caM", "TOcivPAkmP8Awb0N", "qtvSR9q6l5k9BLQM"]}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn challenge \
    --op PublicClaimUserRewards \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 38 'PublicClaimUserRewards' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE