#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..34"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 AdminListInventories
$CLI_EXE \
    --sn inventory \
    --op AdminListInventories \
    --namespace $AB_NAMESPACE \
    --inventoryConfigurationCode 'bBuz5zkoaUEzGS3q' \
    --limit '12' \
    --offset '79' \
    --sortBy 'inventoryConfigurationCode:asc' \
    --userId 'bemSBELbZ0VBUGA7' \
    > test.out 2>&1
eval_tap $? 2 'AdminListInventories' test.out

#- 3 AdminCreateInventory
# body param: body
echo '{"inventoryConfigurationCode": "nkDeev2Oj060HnOf", "userId": "5S8X1LxkZs4233oQ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateInventory \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 3 'AdminCreateInventory' test.out

#- 4 AdminGetInventory
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventory \
    --inventoryId 'WoXFeqeuI2oMJ0cg' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 4 'AdminGetInventory' test.out

#- 5 AdminUpdateInventory
# body param: body
echo '{"incMaxSlots": 54}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminUpdateInventory \
    --inventoryId 'dEs4igdKeLmy8tZ5' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 5 'AdminUpdateInventory' test.out

#- 6 DeleteInventory
# body param: body
echo '{"message": "GZi5P12c61ts3fMI"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op DeleteInventory \
    --inventoryId '04rm2jUc9iav3tTq' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 6 'DeleteInventory' test.out

#- 7 AdminListItems
$CLI_EXE \
    --sn inventory \
    --op AdminListItems \
    --inventoryId 'lE9oLDPD0Lfle8ES' \
    --namespace $AB_NAMESPACE \
    --limit '95' \
    --offset '75' \
    --qtyGte '74' \
    --sortBy 'qty' \
    --sourceItemId 'O8XnVaEyjmifJDYa' \
    --tags '1TJPUszmFGEkJVvq' \
    > test.out 2>&1
eval_tap $? 7 'AdminListItems' test.out

#- 8 AdminGetInventoryItem
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventoryItem \
    --inventoryId 'DSU3PDyIAGfGq1FN' \
    --namespace $AB_NAMESPACE \
    --slotId 'mRWvUvDPnKoECjGU' \
    --sourceItemId 'g867xodwuG14ID5l' \
    > test.out 2>&1
eval_tap $? 8 'AdminGetInventoryItem' test.out

#- 9 AdminListInventoryConfigurations
$CLI_EXE \
    --sn inventory \
    --op AdminListInventoryConfigurations \
    --namespace $AB_NAMESPACE \
    --code '5wj6K2wEMnckjlW6' \
    --limit '57' \
    --offset '82' \
    --sortBy 'updatedAt' \
    > test.out 2>&1
eval_tap $? 9 'AdminListInventoryConfigurations' test.out

#- 10 AdminCreateInventoryConfiguration
# body param: body
echo '{"code": "mY3y3n2Rim4NBqhu", "description": "Ntj8FOvKZjs1tLpE", "initialMaxSlots": 90, "maxInstancesPerUser": 10, "maxUpgradeSlots": 75, "name": "77LzPoORBkRmZ0A2"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateInventoryConfiguration \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 10 'AdminCreateInventoryConfiguration' test.out

#- 11 AdminGetInventoryConfiguration
$CLI_EXE \
    --sn inventory \
    --op AdminGetInventoryConfiguration \
    --inventoryConfigurationId 'zyZsb4FvWFIHPIbO' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 11 'AdminGetInventoryConfiguration' test.out

#- 12 AdminUpdateInventoryConfiguration
# body param: body
echo '{"code": "jpls9BZTYc5BsdSS", "description": "VaAzzn4GbgkKeCaS", "initialMaxSlots": 12, "maxInstancesPerUser": 34, "maxUpgradeSlots": 50, "name": "nq4Hf32SL5PjaYED"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminUpdateInventoryConfiguration \
    --inventoryConfigurationId 'xaYN8w9KUW0py8Kr' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'AdminUpdateInventoryConfiguration' test.out

#- 13 AdminDeleteInventoryConfiguration
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteInventoryConfiguration \
    --inventoryConfigurationId 'cQfucSq2X8gFuJOR' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 13 'AdminDeleteInventoryConfiguration' test.out

#- 14 AdminListItemTypes
$CLI_EXE \
    --sn inventory \
    --op AdminListItemTypes \
    --namespace $AB_NAMESPACE \
    --limit '21' \
    --offset '60' \
    --sortBy 'createdAt:asc' \
    > test.out 2>&1
eval_tap $? 14 'AdminListItemTypes' test.out

#- 15 AdminCreateItemType
# body param: body
echo '{"name": "56pVsUtNanddzgwx"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateItemType \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 15 'AdminCreateItemType' test.out

#- 16 AdminDeleteItemType
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteItemType \
    --itemTypeName 'YdQc5hEfefdopcEM' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 16 'AdminDeleteItemType' test.out

#- 17 AdminListTags
$CLI_EXE \
    --sn inventory \
    --op AdminListTags \
    --namespace $AB_NAMESPACE \
    --limit '29' \
    --offset '72' \
    --owner 'x63cyDxAAYcRXJdo' \
    --sortBy 'name:desc' \
    > test.out 2>&1
eval_tap $? 17 'AdminListTags' test.out

#- 18 AdminCreateTag
# body param: body
echo '{"name": "0fL2h7eJvAS2W4uq", "owner": "CLIENT"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminCreateTag \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'AdminCreateTag' test.out

#- 19 AdminDeleteTag
$CLI_EXE \
    --sn inventory \
    --op AdminDeleteTag \
    --namespace $AB_NAMESPACE \
    --tagName 'bDq5jPqzhN0YdGSr' \
    > test.out 2>&1
eval_tap $? 19 'AdminDeleteTag' test.out

#- 20 AdminConsumeUserItem
# body param: body
echo '{"qty": 54, "slotId": "Pewrf19Njm50xCDl", "sourceItemId": "PeNq0CvMXtyUWXrd"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminConsumeUserItem \
    --inventoryId 'ZaFeacGT2x6o28Nj' \
    --namespace $AB_NAMESPACE \
    --userId 'xyw7RHldq0m7NjUZ' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 20 'AdminConsumeUserItem' test.out

#- 21 AdminBulkUpdateMyItems
# body param: body
echo '[{"customAttributes": {"95Z5XDLBN9YGVPtk": {}, "jt0OyBlJi4RbZ0Iy": {}, "11mfOFjCzZVcGomW": {}}, "serverCustomAttributes": {"F1oAqUNFDtXnXLvO": {}, "AsW8wYh4gq7pRVZV": {}, "LJiDx3au9b9QjhzD": {}}, "slotId": "lnJmi4XaBTgoXjfd", "sourceItemId": "UQHa3RxspSqwdbTR", "tags": ["2sgzfaQrUCW9fgo6", "9uv1bkFx8DmbC9Uq", "YdYrdxNnuMcAwrSz"], "type": "YnrcetxObeisZelK"}, {"customAttributes": {"uD0iJ6fs3zL9H4Wx": {}, "GWRH7fz4BdPhLtHR": {}, "JOImSq37aeAaGq0N": {}}, "serverCustomAttributes": {"Ij53gXkmrayvcIYi": {}, "WxIAxfvLzSpDFY3l": {}, "xe16KsSRzkf2HzBc": {}}, "slotId": "Eio5UyvuFv5z6wos", "sourceItemId": "JGnUyCMEbHh1uE4D", "tags": ["mJ4Suj6DjUw36GtZ", "83Jp2f9f1FCoIo3L", "24DKGwgZ85vyFJR8"], "type": "euQBLVu27iwplLJd"}, {"customAttributes": {"zYS9K0VvwE6MAqPc": {}, "8lGIYWTwxyqQQIXV": {}, "mrtRlq1jv60HTnmF": {}}, "serverCustomAttributes": {"rl3gYx6Xmv1DzPHu": {}, "x3k3skhn3mWZjTYM": {}, "95e4aa8xOJu7rNRV": {}}, "slotId": "dygfKmUkzj9mHFpf", "sourceItemId": "f2vDkz68zorEgcEx", "tags": ["v9nKMOgO5W8SUaZj", "CpNtJSMm8kDi3Rwu", "bq7wtRGdT447Oa51"], "type": "m6VLfjsw270pMmOQ"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminBulkUpdateMyItems \
    --inventoryId 'JrpEBbVvBn8Lsf2q' \
    --namespace $AB_NAMESPACE \
    --userId 'SAtizV9hzsVbpJLt' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 21 'AdminBulkUpdateMyItems' test.out

#- 22 AdminSaveItemToInventory
# body param: body
echo '{"customAttributes": {"EZjuyFhvbxX2DNbk": {}, "nfVv4nm70TCayYAk": {}, "F18YBwRxcREyU5Cw": {}}, "qty": 34, "serverCustomAttributes": {"2tLrsMeoZiRYkbhE": {}, "M1zTNY3lpincuf5d": {}, "5saQvKfFRqBam8jP": {}}, "slotId": "tKHTmzo0JmcQmnsU", "slotUsed": 16, "sourceItemId": "poTVCNrcaVozsjIX", "tags": ["O2EUsAfBvo6Llcal", "ks2R3VMtipTVxXAF", "8KhOKqbrECijFxOp"], "type": "OzxeTLJQsZcTEzXa"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminSaveItemToInventory \
    --inventoryId 'XUzpsAV6ct6XITL0' \
    --namespace $AB_NAMESPACE \
    --userId 'QEkadMSQluAoED9o' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 22 'AdminSaveItemToInventory' test.out

#- 23 AdminBulkRemoveItems
# body param: body
echo '[{"slotId": "YwS8oLyErKvRtHFG", "sourceItemId": "JRoGW7VBG1VB2sp2"}, {"slotId": "x9mszGGoyhGZAzt2", "sourceItemId": "OVBTLwSH8hWRU9pb"}, {"slotId": "ItGQ7VUWBhGolwaf", "sourceItemId": "IfbF1GLFnrQ4T5cm"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminBulkRemoveItems \
    --inventoryId 'w7U1TxiS06UEoaDZ' \
    --namespace $AB_NAMESPACE \
    --userId 'pXOWzpXOi2cpajtq' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'AdminBulkRemoveItems' test.out

#- 24 AdminSaveItem
# body param: body
echo '{"customAttributes": {"cXjPkj2IzU3MEpCt": {}, "1IjlfHJM92t9j1XT": {}, "2ErwIxkaTnYtr1YD": {}}, "inventoryConfigurationCode": "naXB0JOS4XKVT66s", "qty": 68, "serverCustomAttributes": {"NCaOyATBFgqLeAzv": {}, "dcUEhWRo6ROvbuPQ": {}, "wl9dVfJQGkDR00of": {}}, "slotId": "XsbnEzHiRs0NmGhx", "slotUsed": 44, "sourceItemId": "sEn5VEvIMEB4pl50", "tags": ["6fLCG6EAl7d3Ks65", "thtnjcMSw1J42fth", "KUobas2CAlSxxVhD"], "type": "R9hlaznetBUGcQz2"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op AdminSaveItem \
    --namespace $AB_NAMESPACE \
    --userId 'WvdiclkYGDL2ckC9' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 24 'AdminSaveItem' test.out

#- 25 PublicListInventoryConfigurations
$CLI_EXE \
    --sn inventory \
    --op PublicListInventoryConfigurations \
    --namespace $AB_NAMESPACE \
    --code 'cdzaLnajQ8GnJpAL' \
    --limit '17' \
    --offset '60' \
    --sortBy 'code' \
    > test.out 2>&1
eval_tap $? 25 'PublicListInventoryConfigurations' test.out

#- 26 PublicListItemTypes
$CLI_EXE \
    --sn inventory \
    --op PublicListItemTypes \
    --namespace $AB_NAMESPACE \
    --limit '9' \
    --offset '8' \
    --sortBy 'name:desc' \
    > test.out 2>&1
eval_tap $? 26 'PublicListItemTypes' test.out

#- 27 PublicListTags
$CLI_EXE \
    --sn inventory \
    --op PublicListTags \
    --namespace $AB_NAMESPACE \
    --limit '45' \
    --offset '74' \
    --sortBy 'name:desc' \
    > test.out 2>&1
eval_tap $? 27 'PublicListTags' test.out

#- 28 PublicListInventories
$CLI_EXE \
    --sn inventory \
    --op PublicListInventories \
    --namespace $AB_NAMESPACE \
    --inventoryConfigurationCode 'UUtG1tEECsm8xaDO' \
    --limit '53' \
    --offset '77' \
    --sortBy 'createdAt' \
    > test.out 2>&1
eval_tap $? 28 'PublicListInventories' test.out

#- 29 PublicConsumeMyItem
# body param: body
echo '{"qty": 40, "slotId": "iplJgRhedl5Ewh3j", "sourceItemId": "DayYStUiBB1yz3iP"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicConsumeMyItem \
    --inventoryId '8gH88UenlMVzIOP8' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicConsumeMyItem' test.out

#- 30 PublicListItems
$CLI_EXE \
    --sn inventory \
    --op PublicListItems \
    --inventoryId 'NOf91LsD7cWWOgAs' \
    --namespace $AB_NAMESPACE \
    --limit '43' \
    --offset '93' \
    --qtyGte '73' \
    --sortBy 'createdAt:asc' \
    --sourceItemId 'ziuDNbOydiu3lOar' \
    --tags 'uuYw0iUuts6bChMK' \
    > test.out 2>&1
eval_tap $? 30 'PublicListItems' test.out

#- 31 PublicBulkUpdateMyItems
# body param: body
echo '[{"customAttributes": {"1gcx8p9fyv5PoMJe": {}, "TIQix1FEvzlipE7r": {}, "0vhh21v5772Aopmj": {}}, "slotId": "I7CbY2WuwRUT9Iiv", "sourceItemId": "gC4mJ5OHuNEVQK4M", "tags": ["vk00I9GqAhhjNIiv", "dIcaEQfNETQCBPK1", "mYwKVQoydbYjXZyB"]}, {"customAttributes": {"pqhCJBtFOm3iCpu0": {}, "lhhgutt3rQuKP1OE": {}, "tKFBjNihHU8GP8TR": {}}, "slotId": "VypSvYXKz4BGjbsr", "sourceItemId": "RBV8aztJ86yQK1As", "tags": ["C18UO6JcXmwQfkse", "TpH6l2Dv8SvqYKc5", "6PcPSL2xmjViKkKw"]}, {"customAttributes": {"4gHA4CaLsPqRsTdK": {}, "zcKtkGcvn44NWse6": {}, "VLPkM1VTrQBywhJ7": {}}, "slotId": "lbBLw9xy1WQM5qUS", "sourceItemId": "8baUqkzSr41y6RPB", "tags": ["HJuPjj8zDwOk0Igm", "YfUTpFzyQhPVhRGX", "9xlUKhXI8mL8OIhv"]}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicBulkUpdateMyItems \
    --inventoryId 'P68xE68dzohxhbej' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 31 'PublicBulkUpdateMyItems' test.out

#- 32 PublicBulkRemoveMyItems
# body param: body
echo '[{"slotId": "2caIIfkXDY7jnhp3", "sourceItemId": "qY6T7TUEBotSNIwG"}, {"slotId": "hia6cqoWmnhtuzxi", "sourceItemId": "r12r0VUWI0kJAczj"}, {"slotId": "5ApcsiEQ65llgGnT", "sourceItemId": "HAsTCZa7xE4nwGKl"}]' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicBulkRemoveMyItems \
    --inventoryId 'bPRxfucxoRKFLxxc' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 32 'PublicBulkRemoveMyItems' test.out

#- 33 PublicMoveMyItems
# body param: body
echo '{"items": [{"qty": 78, "slotId": "2uH8S4Zx0ACteueM", "sourceItemId": "OmYP4SgxAIQTTKsd"}, {"qty": 26, "slotId": "9J4dPRGzoQLYIWPP", "sourceItemId": "ZvyPupimCENHEenq"}, {"qty": 19, "slotId": "VbaH69NyTfGE5994", "sourceItemId": "2bCwgpzUfcmTQjRm"}], "srcInventoryId": "V0CPt1LUaTvrFaxz"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn inventory \
    --op PublicMoveMyItems \
    --inventoryId 'OfG3pTddIA0Rt6wM' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 33 'PublicMoveMyItems' test.out

#- 34 PublicGetItem
$CLI_EXE \
    --sn inventory \
    --op PublicGetItem \
    --inventoryId '5oQvTMICtWyUtVDn' \
    --namespace $AB_NAMESPACE \
    --slotId 'hgTGXO8Utpwxug8M' \
    --sourceItemId 'pqczRvUdK1uOV1ZJ' \
    > test.out 2>&1
eval_tap $? 34 'PublicGetItem' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE