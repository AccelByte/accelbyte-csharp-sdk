#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..37"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 GetHealthcheckInfoV1
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfoV1 \
    > test.out 2>&1
eval_tap $? 3 'GetHealthcheckInfoV1' test.out

#- 4 AdminCreateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "okKpQugd", "deployment": "kt7PAgo0", "inactiveTimeout": 94, "inviteTimeout": 28, "joinability": "8H7faJHB", "maxPlayers": 30, "minPlayers": 77, "name": "aj5GwZX0", "requestedRegions": ["hQ9h1XkS", "rKNhIObB", "McJGApd3"], "type": "nlGHreE1"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminCreateConfigurationTemplateV1 \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'AdminCreateConfigurationTemplateV1' test.out

#- 5 AdminGetAllConfigurationTemplatesV1
$CLI_EXE \
    --sn session \
    --op AdminGetAllConfigurationTemplatesV1 \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetAllConfigurationTemplatesV1' test.out

#- 6 AdminGetConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminGetConfigurationTemplateV1 \
    --name 'Tv8N79gY' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetConfigurationTemplateV1' test.out

#- 7 AdminUpdateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "Qnd9cods", "deployment": "C7liaREx", "inactiveTimeout": 3, "inviteTimeout": 80, "joinability": "81dvQVKv", "maxPlayers": 71, "minPlayers": 49, "name": "b8Ll6Ujt", "requestedRegions": ["Z1w2aU2T", "Nd7z2gt2", "BjMqSKdn"], "type": "8xbtCYvL"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminUpdateConfigurationTemplateV1 \
    --name '0S0UHAsp' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateConfigurationTemplateV1' test.out

#- 8 AdminDeleteConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminDeleteConfigurationTemplateV1 \
    --name 'fWnQcVEJ' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteConfigurationTemplateV1' test.out

#- 9 AdminQueryGameSessions
$CLI_EXE \
    --sn session \
    --op AdminQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --configurationName 'Xil1AeGh' \
    --dsPodName 'bzRmOybM' \
    --fromTime '2QQU36zF' \
    --gameMode 'KM0Z7TjZ' \
    --joinability 'QSW2jSK9' \
    --limit '8' \
    --matchPool 'EuY8Kcgp' \
    --memberID '3kk4vrau' \
    --offset '11' \
    --order 'RDog6DuS' \
    --orderBy 'YnGQ6vFT' \
    --sessionID 'sbraWjyK' \
    --status 'gzqfADwQ' \
    --toTime 'qrmMWaVP' \
    > test.out 2>&1
eval_tap $? 9 'AdminQueryGameSessions' test.out

#- 10 AdminUpdateGameSessionMember
$CLI_EXE \
    --sn session \
    --op AdminUpdateGameSessionMember \
    --memberId 'gZ5tbE55' \
    --namespace $AB_NAMESPACE \
    --sessionId 'Ugw590qZ' \
    --statusType 'JgZX2SZE' \
    > test.out 2>&1
eval_tap $? 10 'AdminUpdateGameSessionMember' test.out

#- 11 AdminQueryParties
$CLI_EXE \
    --sn session \
    --op AdminQueryParties \
    --namespace $AB_NAMESPACE \
    --joinability 'S3GPwuhs' \
    --key 'OXAG9PO9' \
    --leaderID 'OLUTGAAH' \
    --limit '90' \
    --memberID 'jeX0ubwB' \
    --memberStatus 'oGDu2sck' \
    --offset '6' \
    --order '0t9jdBN9' \
    --orderBy '9x80MTTw' \
    --value 'hL93tlkh' \
    > test.out 2>&1
eval_tap $? 11 'AdminQueryParties' test.out

#- 12 CreateGameSession
# body param: body
echo '{"attributes": {"ZmBJ6WlO": {}, "5lVk3ONx": {}, "vSJP0Js4": {}}, "backfillTicketID": "COeuUu1O", "clientVersion": "Fjr7K72Q", "configurationName": "XQJKjU3H", "deployment": "g3KGkT9m", "inactiveTimeout": 31, "inviteTimeout": 86, "joinability": "1wFwd11X", "matchPool": "k2kvILK5", "maxPlayers": 8, "minPlayers": 37, "requestedRegions": ["82FFjEzA", "QReL17xv", "10EFwsxe"], "serverName": "qiVk6nnH", "teams": [{"UserIDs": ["AftNZl2q", "KA9OTByx", "PjsergfS"]}, {"UserIDs": ["KsXY8CYH", "M65h0qvo", "EGUeKLDX"]}, {"UserIDs": ["rlb0tiVp", "AdWbLiS1", "fbkd2yZh"]}], "ticketIDs": ["EXp6YXiD", "ADFkcHu9", "2WwMY7fk"], "type": "dmVzTPKo"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op CreateGameSession \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreateGameSession' test.out

#- 13 PublicQueryGameSessions
# body param: body
echo '{"awrQRbTA": {}, "olILOQGs": {}, "fNBeevwr": {}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'PublicQueryGameSessions' test.out

#- 14 GetGameSessionByPodName
$CLI_EXE \
    --sn session \
    --op GetGameSessionByPodName \
    --namespace $AB_NAMESPACE \
    --podName 'YjOVQeVo' \
    > test.out 2>&1
eval_tap $? 14 'GetGameSessionByPodName' test.out

#- 15 GetGameSession
$CLI_EXE \
    --sn session \
    --op GetGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'OQUnVP1C' \
    > test.out 2>&1
eval_tap $? 15 'GetGameSession' test.out

#- 16 UpdateGameSession
# body param: body
echo '{"attributes": {"I03dblZ1": {}, "SCTbiXfd": {}, "7PnhMtxO": {}}, "backfillTicketID": "dkUix9x3", "clientVersion": "HmkwvQQ4", "deployment": "BOX1gMZu", "inactiveTimeout": 15, "inviteTimeout": 28, "joinability": "Q94fNj1r", "matchPool": "7txmuQeW", "maxPlayers": 76, "minPlayers": 48, "requestedRegions": ["SfvDIbdn", "9MW8x2md", "2nSFTXD9"], "teams": [{"UserIDs": ["sQjaiSFg", "POEVHuer", "p2LZ7joc"]}, {"UserIDs": ["p2MbTgpw", "YmRLHxu2", "biow0fUZ"]}, {"UserIDs": ["zza7FJVW", "2MzY19Ny", "ExphZuIA"]}], "ticketIDs": ["sp1sUDpU", "Yod6nnvk", "DJZugLIb"], "type": "NG4NkWNF", "version": 25}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op UpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'SLEVLlWv' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdateGameSession' test.out

#- 17 DeleteGameSession
$CLI_EXE \
    --sn session \
    --op DeleteGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'KGgC2ws5' \
    > test.out 2>&1
eval_tap $? 17 'DeleteGameSession' test.out

#- 18 PatchUpdateGameSession
# body param: body
echo '{"attributes": {"uM4qvODd": {}, "zaTsndYo": {}, "se34zwEa": {}}, "backfillTicketID": "pIYmeurB", "clientVersion": "aoIU0bDI", "deployment": "LArkBtRy", "inactiveTimeout": 8, "inviteTimeout": 3, "joinability": "RcvtKNdP", "matchPool": "1rLOpxgm", "maxPlayers": 56, "minPlayers": 89, "requestedRegions": ["QFMT3Cq9", "3XP01tzL", "nvOGNKFJ"], "teams": [{"UserIDs": ["LjaeHZMz", "y8SNYoQA", "RTbX7IOT"]}, {"UserIDs": ["0R8BNB3y", "Rd4A2DR4", "IY2XjSsh"]}, {"UserIDs": ["hrIupMur", "bFLiEpd1", "LOOZtkHD"]}], "ticketIDs": ["A6qWnDxX", "siqO3nIm", "ocYjeftY"], "type": "gQHWPJ8o", "version": 11}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PatchUpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'RFJDJwjR' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'PatchUpdateGameSession' test.out

#- 19 PublicGameSessionInvite
# body param: body
echo '{"userID": "KOq3VjKH"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicGameSessionInvite \
    --namespace $AB_NAMESPACE \
    --sessionId 'KS6DmJF8' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'PublicGameSessionInvite' test.out

#- 20 JoinGameSession
$CLI_EXE \
    --sn session \
    --op JoinGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'YInrSNUq' \
    > test.out 2>&1
eval_tap $? 20 'JoinGameSession' test.out

#- 21 LeaveGameSession
$CLI_EXE \
    --sn session \
    --op LeaveGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId '4iICRNZw' \
    > test.out 2>&1
eval_tap $? 21 'LeaveGameSession' test.out

#- 22 PublicGameSessionReject
$CLI_EXE \
    --sn session \
    --op PublicGameSessionReject \
    --namespace $AB_NAMESPACE \
    --sessionId 'wdiiwFPx' \
    > test.out 2>&1
eval_tap $? 22 'PublicGameSessionReject' test.out

#- 23 PublicPartyJoinCode
# body param: body
echo '{"code": "c2hThRu0"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyJoinCode \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'PublicPartyJoinCode' test.out

#- 24 PublicGetParty
$CLI_EXE \
    --sn session \
    --op PublicGetParty \
    --namespace $AB_NAMESPACE \
    --partyId '3fux3r0r' \
    > test.out 2>&1
eval_tap $? 24 'PublicGetParty' test.out

#- 25 PublicUpdateParty
# body param: body
echo '{"attributes": {"tdSM60vo": {}, "KSwe8XgJ": {}, "aR5AQD8k": {}}, "inactiveTimeout": 3, "inviteTimeout": 39, "joinability": "CQpGXOA5", "maxPlayers": 35, "minPlayers": 19, "type": "JrtVcSnL", "version": 61}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'R8xcHBjU' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'PublicUpdateParty' test.out

#- 26 PublicPatchUpdateParty
# body param: body
echo '{"attributes": {"lOReIc8I": {}, "Qa4sGzPv": {}, "L8NwbjTm": {}}, "inactiveTimeout": 66, "inviteTimeout": 44, "joinability": "i22AqMqr", "maxPlayers": 8, "minPlayers": 60, "type": "fjSMQ43j", "version": 15}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPatchUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId '9eZVu7Cd' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'PublicPatchUpdateParty' test.out

#- 27 PublicGeneratePartyCode
$CLI_EXE \
    --sn session \
    --op PublicGeneratePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'LxBc22PP' \
    > test.out 2>&1
eval_tap $? 27 'PublicGeneratePartyCode' test.out

#- 28 PublicRevokePartyCode
$CLI_EXE \
    --sn session \
    --op PublicRevokePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'eX3xVC3Y' \
    > test.out 2>&1
eval_tap $? 28 'PublicRevokePartyCode' test.out

#- 29 PublicPartyInvite
# body param: body
echo '{"userID": "xodiE6eJ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyInvite \
    --namespace $AB_NAMESPACE \
    --partyId 'H95ErJus' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicPartyInvite' test.out

#- 30 PublicPromotePartyLeader
# body param: body
echo '{"leaderID": "SCcTsC5C"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPromotePartyLeader \
    --namespace $AB_NAMESPACE \
    --partyId 'Ql0Jl4EN' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'PublicPromotePartyLeader' test.out

#- 31 PublicPartyJoin
$CLI_EXE \
    --sn session \
    --op PublicPartyJoin \
    --namespace $AB_NAMESPACE \
    --partyId 'SFEueNiE' \
    > test.out 2>&1
eval_tap $? 31 'PublicPartyJoin' test.out

#- 32 PublicPartyLeave
$CLI_EXE \
    --sn session \
    --op PublicPartyLeave \
    --namespace $AB_NAMESPACE \
    --partyId '56kzmbpK' \
    > test.out 2>&1
eval_tap $? 32 'PublicPartyLeave' test.out

#- 33 PublicPartyReject
$CLI_EXE \
    --sn session \
    --op PublicPartyReject \
    --namespace $AB_NAMESPACE \
    --partyId 'ByvHPH4n' \
    > test.out 2>&1
eval_tap $? 33 'PublicPartyReject' test.out

#- 34 PublicPartyKick
$CLI_EXE \
    --sn session \
    --op PublicPartyKick \
    --namespace $AB_NAMESPACE \
    --partyId 'rTNtRtaN' \
    --userId 'cBrvHSXY' \
    > test.out 2>&1
eval_tap $? 34 'PublicPartyKick' test.out

#- 35 PublicCreateParty
# body param: body
echo '{"attributes": {"piZXnSIk": {}, "ztWer5LL": {}, "3cbwAw3X": {}}, "configurationName": "UF0g55DB", "inactiveTimeout": 43, "inviteTimeout": 8, "joinability": "zKzIL53G", "maxPlayers": 25, "members": [{"ID": "5zxTHnZj", "PlatformID": "AvQsvdYf", "PlatformUserID": "947EGvXm"}, {"ID": "mzH8TjHA", "PlatformID": "xcSNIWnm", "PlatformUserID": "zxGMHFLG"}, {"ID": "m39I5UQp", "PlatformID": "RiAbUgUE", "PlatformUserID": "JYRDohkk"}], "minPlayers": 15, "type": "OLnOaJsd"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicCreateParty \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'PublicCreateParty' test.out

#- 36 PublicQueryMyGameSessions
$CLI_EXE \
    --sn session \
    --op PublicQueryMyGameSessions \
    --namespace $AB_NAMESPACE \
    --order 'VbLRO28l' \
    --orderBy 'SQO5E0yk' \
    --status 'Mz1fLJdi' \
    > test.out 2>&1
eval_tap $? 36 'PublicQueryMyGameSessions' test.out

#- 37 PublicQueryMyParties
$CLI_EXE \
    --sn session \
    --op PublicQueryMyParties \
    --namespace $AB_NAMESPACE \
    --order 'bZkOv3tM' \
    --orderBy 'vHI3jDA4' \
    --status 'zbHJRkWR' \
    > test.out 2>&1
eval_tap $? 37 'PublicQueryMyParties' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE