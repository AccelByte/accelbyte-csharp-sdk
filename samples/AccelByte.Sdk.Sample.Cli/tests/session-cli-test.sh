#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..37"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 GetHealthcheckInfoV1
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfoV1 \
    > test.out 2>&1
eval_tap $? 3 'GetHealthcheckInfoV1' test.out

#- 4 AdminCreateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "4ov16mxr", "deployment": "Y5MbpRjY", "inactiveTimeout": 94, "inviteTimeout": 3, "joinability": "JWxJh9FU", "maxPlayers": 11, "minPlayers": 44, "name": "fg6DzRct", "requestedRegions": ["Nds0RqBg", "aFw9K40T", "dxX4GyP2"], "textChat": true, "type": "afkAObq4"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminCreateConfigurationTemplateV1 \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'AdminCreateConfigurationTemplateV1' test.out

#- 5 AdminGetAllConfigurationTemplatesV1
$CLI_EXE \
    --sn session \
    --op AdminGetAllConfigurationTemplatesV1 \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetAllConfigurationTemplatesV1' test.out

#- 6 AdminGetConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminGetConfigurationTemplateV1 \
    --name '8Dwnabhv' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetConfigurationTemplateV1' test.out

#- 7 AdminUpdateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "1AVH5SHt", "deployment": "YGf9j3o4", "inactiveTimeout": 12, "inviteTimeout": 40, "joinability": "UnLyYI9y", "maxPlayers": 99, "minPlayers": 72, "name": "xoPaX84c", "requestedRegions": ["U4fxPRKf", "VVk3IzgO", "idGGSpaP"], "textChat": true, "type": "y6fHSPl1"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminUpdateConfigurationTemplateV1 \
    --name 'wnyZa8yN' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateConfigurationTemplateV1' test.out

#- 8 AdminDeleteConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminDeleteConfigurationTemplateV1 \
    --name 'b4TWGWYV' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteConfigurationTemplateV1' test.out

#- 9 AdminQueryGameSessions
$CLI_EXE \
    --sn session \
    --op AdminQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --configurationName '8NqFw2Kq' \
    --dsPodName '05sSMAzk' \
    --fromTime 'jVcZQeOu' \
    --gameMode 'F6rU3ghc' \
    --joinability 'ettAvVGb' \
    --limit '47' \
    --matchPool 'MICyqNhU' \
    --memberID 'nwC0qcOg' \
    --offset '25' \
    --order 'je3qKKIC' \
    --orderBy '63uVtUoc' \
    --sessionID 'AKIQTgZ6' \
    --status 'KcnJaze8' \
    --toTime 'RHGCkww8' \
    > test.out 2>&1
eval_tap $? 9 'AdminQueryGameSessions' test.out

#- 10 AdminUpdateGameSessionMember
$CLI_EXE \
    --sn session \
    --op AdminUpdateGameSessionMember \
    --memberId '4c3P1yve' \
    --namespace $AB_NAMESPACE \
    --sessionId 'PpP1WKUq' \
    --statusType 'ToHJX0PB' \
    > test.out 2>&1
eval_tap $? 10 'AdminUpdateGameSessionMember' test.out

#- 11 AdminQueryParties
$CLI_EXE \
    --sn session \
    --op AdminQueryParties \
    --namespace $AB_NAMESPACE \
    --joinability 'ddXQLyAT' \
    --key 'NyJ2se7M' \
    --leaderID '7sbXVUw8' \
    --limit '14' \
    --memberID 'T7X1zJ0m' \
    --memberStatus 'Cr9y9X8W' \
    --offset '79' \
    --order 'fFTSdMfK' \
    --orderBy 'RuKV4fVb' \
    --value '3NZu2WKr' \
    > test.out 2>&1
eval_tap $? 11 'AdminQueryParties' test.out

#- 12 CreateGameSession
# body param: body
echo '{"attributes": {"bk3vmZf4": {}, "VDTfsDgA": {}, "RzaeFVQY": {}}, "backfillTicketID": "IaZkYUu1", "clientVersion": "LLu4BjJ4", "configurationName": "fT4kayQF", "deployment": "T5W2qddh", "inactiveTimeout": 65, "inviteTimeout": 93, "joinability": "MQ5TVvBc", "matchPool": "gGy3X4X8", "maxPlayers": 66, "minPlayers": 71, "requestedRegions": ["9XRc4rx2", "7FUFmeWX", "fGCKH9Cq"], "serverName": "TPxzzqYz", "teams": [{"UserIDs": ["4LbDTjft", "8wAgjE3K", "iObfpxc8"]}, {"UserIDs": ["TScGNfQh", "0TdzsIqk", "VssPlhni"]}, {"UserIDs": ["cxI0VH7Q", "Ylp8KvK0", "9ZtwmrGp"]}], "textChat": false, "ticketIDs": ["QrrcYfTA", "DHZJjmCr", "hAtRsWAO"], "type": "5rmonVpO"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op CreateGameSession \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreateGameSession' test.out

#- 13 PublicQueryGameSessions
# body param: body
echo '{"fg5zVeDQ": {}, "CP4SRqq7": {}, "ptZsK0uz": {}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'PublicQueryGameSessions' test.out

#- 14 GetGameSessionByPodName
$CLI_EXE \
    --sn session \
    --op GetGameSessionByPodName \
    --namespace $AB_NAMESPACE \
    --podName '3Mt76mtk' \
    > test.out 2>&1
eval_tap $? 14 'GetGameSessionByPodName' test.out

#- 15 GetGameSession
$CLI_EXE \
    --sn session \
    --op GetGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'dAnWEwYe' \
    > test.out 2>&1
eval_tap $? 15 'GetGameSession' test.out

#- 16 UpdateGameSession
# body param: body
echo '{"attributes": {"jevGZMYQ": {}, "XGc2Mq6p": {}, "t6EXi9L4": {}}, "backfillTicketID": "kz71Q9LK", "clientVersion": "eQsYbNXc", "deployment": "mZbTthHP", "inactiveTimeout": 95, "inviteTimeout": 35, "joinability": "gnh2ssuc", "matchPool": "hCpOtJ4a", "maxPlayers": 60, "minPlayers": 0, "requestedRegions": ["p6Twqh1G", "sM68rx1p", "vlWUtzMM"], "teams": [{"UserIDs": ["0vbcHkeS", "N3rKNPoE", "oL0dsZTZ"]}, {"UserIDs": ["wHhniYEb", "mTLGjhC2", "XPXhDt3M"]}, {"UserIDs": ["eclDsz8c", "2qUwBGJB", "oYuw576K"]}], "ticketIDs": ["JeC78FUn", "ByrfN4Wj", "jHK4GxQw"], "type": "4JtOtp90", "version": 25}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op UpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'tolXvtoh' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdateGameSession' test.out

#- 17 DeleteGameSession
$CLI_EXE \
    --sn session \
    --op DeleteGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'PZqpAJEZ' \
    > test.out 2>&1
eval_tap $? 17 'DeleteGameSession' test.out

#- 18 PatchUpdateGameSession
# body param: body
echo '{"attributes": {"5u02Asbg": {}, "kSQ6UFcJ": {}, "73GeZUTJ": {}}, "backfillTicketID": "jmnlpM3E", "clientVersion": "svDNMzhn", "deployment": "586x6iAa", "inactiveTimeout": 3, "inviteTimeout": 99, "joinability": "hUiif1sZ", "matchPool": "ExNWUKKu", "maxPlayers": 100, "minPlayers": 5, "requestedRegions": ["lgysz7WN", "pkDEW34s", "zUcmxtIx"], "teams": [{"UserIDs": ["gwoTKkaa", "BaaCQ9lB", "XaOoi0BE"]}, {"UserIDs": ["HK8EpUHY", "Lq7oI1En", "hJMnABuq"]}, {"UserIDs": ["tLhJvYIi", "rrP3t140", "M4na44tv"]}], "ticketIDs": ["odAIJw4z", "HobT6dv8", "YVXhwnJK"], "type": "m56MmDzv", "version": 64}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PatchUpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'LzfhEcwa' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'PatchUpdateGameSession' test.out

#- 19 PublicGameSessionInvite
# body param: body
echo '{"userID": "Udj65ffm"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicGameSessionInvite \
    --namespace $AB_NAMESPACE \
    --sessionId 'gL0lRYBk' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'PublicGameSessionInvite' test.out

#- 20 JoinGameSession
$CLI_EXE \
    --sn session \
    --op JoinGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'kXqAzEsH' \
    > test.out 2>&1
eval_tap $? 20 'JoinGameSession' test.out

#- 21 LeaveGameSession
$CLI_EXE \
    --sn session \
    --op LeaveGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'Knphm0zG' \
    > test.out 2>&1
eval_tap $? 21 'LeaveGameSession' test.out

#- 22 PublicGameSessionReject
$CLI_EXE \
    --sn session \
    --op PublicGameSessionReject \
    --namespace $AB_NAMESPACE \
    --sessionId '1CEbbxOr' \
    > test.out 2>&1
eval_tap $? 22 'PublicGameSessionReject' test.out

#- 23 PublicPartyJoinCode
# body param: body
echo '{"code": "O5Z6D3OV"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyJoinCode \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'PublicPartyJoinCode' test.out

#- 24 PublicGetParty
$CLI_EXE \
    --sn session \
    --op PublicGetParty \
    --namespace $AB_NAMESPACE \
    --partyId 'q9fp7Q9r' \
    > test.out 2>&1
eval_tap $? 24 'PublicGetParty' test.out

#- 25 PublicUpdateParty
# body param: body
echo '{"attributes": {"794A5kks": {}, "Mu3H8B9Q": {}, "e2lad64e": {}}, "inactiveTimeout": 78, "inviteTimeout": 99, "joinability": "I9ovVaee", "maxPlayers": 36, "minPlayers": 87, "type": "SEbaHR8I", "version": 8}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'Wx0jFZY4' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'PublicUpdateParty' test.out

#- 26 PublicPatchUpdateParty
# body param: body
echo '{"attributes": {"zcvvxeB2": {}, "chw1aCFd": {}, "leKIYjmL": {}}, "inactiveTimeout": 76, "inviteTimeout": 51, "joinability": "GdiZ3hYT", "maxPlayers": 67, "minPlayers": 85, "type": "54hnB1ak", "version": 27}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPatchUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'SbbtZDYS' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'PublicPatchUpdateParty' test.out

#- 27 PublicGeneratePartyCode
$CLI_EXE \
    --sn session \
    --op PublicGeneratePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'PzDJvwNX' \
    > test.out 2>&1
eval_tap $? 27 'PublicGeneratePartyCode' test.out

#- 28 PublicRevokePartyCode
$CLI_EXE \
    --sn session \
    --op PublicRevokePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'j9lapmgn' \
    > test.out 2>&1
eval_tap $? 28 'PublicRevokePartyCode' test.out

#- 29 PublicPartyInvite
# body param: body
echo '{"userID": "MnovSaEC"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyInvite \
    --namespace $AB_NAMESPACE \
    --partyId 'e7udns6A' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicPartyInvite' test.out

#- 30 PublicPromotePartyLeader
# body param: body
echo '{"leaderID": "tKfhQS0X"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPromotePartyLeader \
    --namespace $AB_NAMESPACE \
    --partyId 'Z7yEfBhj' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'PublicPromotePartyLeader' test.out

#- 31 PublicPartyJoin
$CLI_EXE \
    --sn session \
    --op PublicPartyJoin \
    --namespace $AB_NAMESPACE \
    --partyId 'WJHiV80T' \
    > test.out 2>&1
eval_tap $? 31 'PublicPartyJoin' test.out

#- 32 PublicPartyLeave
$CLI_EXE \
    --sn session \
    --op PublicPartyLeave \
    --namespace $AB_NAMESPACE \
    --partyId 'D8Ri21Cx' \
    > test.out 2>&1
eval_tap $? 32 'PublicPartyLeave' test.out

#- 33 PublicPartyReject
$CLI_EXE \
    --sn session \
    --op PublicPartyReject \
    --namespace $AB_NAMESPACE \
    --partyId 'qnJ6jlAv' \
    > test.out 2>&1
eval_tap $? 33 'PublicPartyReject' test.out

#- 34 PublicPartyKick
$CLI_EXE \
    --sn session \
    --op PublicPartyKick \
    --namespace $AB_NAMESPACE \
    --partyId 'hKmXcZcf' \
    --userId 'bQW527UA' \
    > test.out 2>&1
eval_tap $? 34 'PublicPartyKick' test.out

#- 35 PublicCreateParty
# body param: body
echo '{"attributes": {"KsvIQhhc": {}, "aY22Fh1C": {}, "aWR66SFb": {}}, "configurationName": "O9yvypxC", "inactiveTimeout": 8, "inviteTimeout": 85, "joinability": "HNdXoNec", "maxPlayers": 98, "members": [{"ID": "EF4JVEA1", "PlatformID": "YIomavmm", "PlatformUserID": "iyPYSTI4"}, {"ID": "9y2k7ppi", "PlatformID": "NlfmEbBH", "PlatformUserID": "gJdF0Vx3"}, {"ID": "VSAXObFw", "PlatformID": "8nq4UBWM", "PlatformUserID": "JWp1Na8X"}], "minPlayers": 43, "textChat": false, "type": "pXRt7jvt"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicCreateParty \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'PublicCreateParty' test.out

#- 36 PublicQueryMyGameSessions
$CLI_EXE \
    --sn session \
    --op PublicQueryMyGameSessions \
    --namespace $AB_NAMESPACE \
    --order '7ysBRgcU' \
    --orderBy 'XelEg3Nh' \
    --status 's2Sbl2II' \
    > test.out 2>&1
eval_tap $? 36 'PublicQueryMyGameSessions' test.out

#- 37 PublicQueryMyParties
$CLI_EXE \
    --sn session \
    --op PublicQueryMyParties \
    --namespace $AB_NAMESPACE \
    --order 'MRx8t4nx' \
    --orderBy 'ltBfHIQ7' \
    --status 'tS7mQIAT' \
    > test.out 2>&1
eval_tap $? 37 'PublicQueryMyParties' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE