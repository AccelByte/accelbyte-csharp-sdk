#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..37"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 GetHealthcheckInfoV1
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfoV1 \
    > test.out 2>&1
eval_tap $? 3 'GetHealthcheckInfoV1' test.out

#- 4 AdminCreateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "7tPmty4d", "deployment": "gVE12y7W", "inactiveTimeout": 53, "inviteTimeout": 82, "joinability": "bMRTKGgF", "maxPlayers": 30, "minPlayers": 69, "name": "vV5M3q4n", "requestedRegions": ["uudNKwAZ", "Wl7WjrAZ", "Q2xbMRsl"], "type": "E9TXNH0O"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminCreateConfigurationTemplateV1 \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'AdminCreateConfigurationTemplateV1' test.out

#- 5 AdminGetAllConfigurationTemplatesV1
$CLI_EXE \
    --sn session \
    --op AdminGetAllConfigurationTemplatesV1 \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetAllConfigurationTemplatesV1' test.out

#- 6 AdminGetConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminGetConfigurationTemplateV1 \
    --name 'BHLCanT2' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetConfigurationTemplateV1' test.out

#- 7 AdminUpdateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "I5APkHIE", "deployment": "ZTaZZvfU", "inactiveTimeout": 51, "inviteTimeout": 61, "joinability": "DIDtU4rQ", "maxPlayers": 71, "minPlayers": 18, "name": "9Terh5yN", "requestedRegions": ["xDJmG90S", "U4JAGQYc", "JFgbMBGv"], "type": "LCDSgDm4"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminUpdateConfigurationTemplateV1 \
    --name '2uFGiGa1' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateConfigurationTemplateV1' test.out

#- 8 AdminDeleteConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminDeleteConfigurationTemplateV1 \
    --name 'CL5KZ71Y' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteConfigurationTemplateV1' test.out

#- 9 AdminQueryGameSessions
$CLI_EXE \
    --sn session \
    --op AdminQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --configurationName 'wE4JzchC' \
    --dsPodName 'E9SMUmTy' \
    --fromTime 'YCxJGm3a' \
    --gameMode 'mg2bZZoV' \
    --joinability 'x7EQqrsL' \
    --limit '46' \
    --matchPool 'KqrNkTUM' \
    --memberID 'pDSQL9u9' \
    --offset '72' \
    --order 'oY2DYXjB' \
    --orderBy 'AzN9qmB2' \
    --sessionID 'PTh7Fd9V' \
    --status 'GT75vQuN' \
    --toTime '6KetZ3jo' \
    > test.out 2>&1
eval_tap $? 9 'AdminQueryGameSessions' test.out

#- 10 AdminUpdateGameSessionMember
$CLI_EXE \
    --sn session \
    --op AdminUpdateGameSessionMember \
    --memberId 'H0EKkztz' \
    --namespace $AB_NAMESPACE \
    --sessionId 'DKRNbOYk' \
    --statusType 'SkNiJgxN' \
    > test.out 2>&1
eval_tap $? 10 'AdminUpdateGameSessionMember' test.out

#- 11 AdminQueryParties
$CLI_EXE \
    --sn session \
    --op AdminQueryParties \
    --namespace $AB_NAMESPACE \
    --joinability 'JHbISPmN' \
    --key 'bJTCU8eS' \
    --leaderID '8vLWJK3h' \
    --limit '10' \
    --memberID 'kmnO1dP6' \
    --memberStatus 'TsUe0W4Y' \
    --offset '56' \
    --order 'PfcqP1BI' \
    --orderBy '6H0eUmQG' \
    --value 'Sk7VORnh' \
    > test.out 2>&1
eval_tap $? 11 'AdminQueryParties' test.out

#- 12 CreateGameSession
# body param: body
echo '{"attributes": {"kt1ubBd4": {}, "3yIqMEi1": {}, "kHTQVqqJ": {}}, "backfillTicketID": "Il5CRoQY", "clientVersion": "FiMaxJpA", "configurationName": "cEeH6Rdi", "deployment": "wnsSd8tw", "inactiveTimeout": 20, "inviteTimeout": 13, "joinability": "56TNG5Z2", "matchPool": "DtCnAmZQ", "maxPlayers": 55, "minPlayers": 20, "requestedRegions": ["KXDHG4VC", "ulZy9HKf", "a49x1wDK"], "serverName": "PLDHQ9XW", "teams": [{"UserIDs": ["EHLOvkl4", "wgqxIipJ", "80hpzjXI"]}, {"UserIDs": ["0auGtNYu", "XaoyumoO", "8Rka9tDY"]}, {"UserIDs": ["vObkS3S1", "EuAlk8Dk", "uYxBfdG0"]}], "ticketIDs": ["woIgL5pP", "5XloSBYN", "Ub3BszOY"], "type": "bThshixf"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op CreateGameSession \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreateGameSession' test.out

#- 13 PublicQueryGameSessions
# body param: body
echo '{"1BwXj2wI": {}, "Bg5sQpDZ": {}, "pYzh9pgZ": {}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'PublicQueryGameSessions' test.out

#- 14 GetGameSessionByPodName
$CLI_EXE \
    --sn session \
    --op GetGameSessionByPodName \
    --namespace $AB_NAMESPACE \
    --podName 'dR2xnf7t' \
    > test.out 2>&1
eval_tap $? 14 'GetGameSessionByPodName' test.out

#- 15 GetGameSession
$CLI_EXE \
    --sn session \
    --op GetGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'ahZguChn' \
    > test.out 2>&1
eval_tap $? 15 'GetGameSession' test.out

#- 16 UpdateGameSession
# body param: body
echo '{"attributes": {"sAKstV1V": {}, "O3yoaZIX": {}, "Gv6NxW4h": {}}, "backfillTicketID": "zZzrLmv0", "clientVersion": "LzCTvzi3", "deployment": "ZWDADeFc", "inactiveTimeout": 59, "inviteTimeout": 50, "joinability": "L4lk32Io", "matchPool": "w6OWHSBP", "maxPlayers": 76, "minPlayers": 4, "requestedRegions": ["p2azwhRy", "5HajNi7p", "pbgJzxGk"], "teams": [{"UserIDs": ["3jylsZ7V", "BSsVQrTs", "Vqf4IGzS"]}, {"UserIDs": ["gFBme5Pi", "HAtxOuY8", "aIeSs5x6"]}, {"UserIDs": ["Suirsjfy", "O0NktEOE", "Ti4dWUTn"]}], "ticketIDs": ["85zGhoBM", "0igK1ZNz", "Czke1pX9"], "type": "AOsCp3Nu", "version": 92}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op UpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'jNkVxskg' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdateGameSession' test.out

#- 17 DeleteGameSession
$CLI_EXE \
    --sn session \
    --op DeleteGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'lcyTkHnQ' \
    > test.out 2>&1
eval_tap $? 17 'DeleteGameSession' test.out

#- 18 PatchUpdateGameSession
# body param: body
echo '{"attributes": {"JY49uTcP": {}, "4MLdn7OG": {}, "oCQloz1a": {}}, "backfillTicketID": "3cAof6zs", "clientVersion": "R0cdjzfc", "deployment": "ZovV4gNI", "inactiveTimeout": 88, "inviteTimeout": 15, "joinability": "BzZ9hxlj", "matchPool": "w5DSddq3", "maxPlayers": 81, "minPlayers": 1, "requestedRegions": ["zM0CO2cC", "eSeLFoms", "eI4EBJgX"], "teams": [{"UserIDs": ["uCwkFktw", "vIBMp8Sq", "5gW1ObU3"]}, {"UserIDs": ["YbMDKU8d", "T5QfWTGa", "v0ng9JLG"]}, {"UserIDs": ["Z1l9k393", "qcAJv9AR", "jUkBbyLc"]}], "ticketIDs": ["bml3OqRt", "nfOCWupR", "ulnvejNw"], "type": "oE5j83HI", "version": 21}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PatchUpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'U8N64dTy' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'PatchUpdateGameSession' test.out

#- 19 PublicGameSessionInvite
# body param: body
echo '{"userID": "YwNTBrgg"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicGameSessionInvite \
    --namespace $AB_NAMESPACE \
    --sessionId '8Pba4xxe' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'PublicGameSessionInvite' test.out

#- 20 JoinGameSession
$CLI_EXE \
    --sn session \
    --op JoinGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'T8miKGaO' \
    > test.out 2>&1
eval_tap $? 20 'JoinGameSession' test.out

#- 21 LeaveGameSession
$CLI_EXE \
    --sn session \
    --op LeaveGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'gmX75GhR' \
    > test.out 2>&1
eval_tap $? 21 'LeaveGameSession' test.out

#- 22 PublicGameSessionReject
$CLI_EXE \
    --sn session \
    --op PublicGameSessionReject \
    --namespace $AB_NAMESPACE \
    --sessionId 'ULyAN3Ro' \
    > test.out 2>&1
eval_tap $? 22 'PublicGameSessionReject' test.out

#- 23 PublicPartyJoinCode
# body param: body
echo '{"code": "xi5mOS8M"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyJoinCode \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'PublicPartyJoinCode' test.out

#- 24 PublicGetParty
$CLI_EXE \
    --sn session \
    --op PublicGetParty \
    --namespace $AB_NAMESPACE \
    --partyId 'bb8IetHY' \
    > test.out 2>&1
eval_tap $? 24 'PublicGetParty' test.out

#- 25 PublicUpdateParty
# body param: body
echo '{"attributes": {"2eCvNt89": {}, "5551YlXn": {}, "wwJxJMqv": {}}, "inactiveTimeout": 15, "inviteTimeout": 8, "joinability": "s0Mq7XYh", "maxPlayers": 9, "minPlayers": 99, "type": "hBiCgUnD", "version": 32}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'kQSPD5BB' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'PublicUpdateParty' test.out

#- 26 PublicPatchUpdateParty
# body param: body
echo '{"attributes": {"RmAyyfBU": {}, "UlnPas6W": {}, "CLETDALh": {}}, "inactiveTimeout": 37, "inviteTimeout": 9, "joinability": "VswLtFei", "maxPlayers": 37, "minPlayers": 85, "type": "Un0jrCOQ", "version": 52}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPatchUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId '4yevocQ5' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'PublicPatchUpdateParty' test.out

#- 27 PublicGeneratePartyCode
$CLI_EXE \
    --sn session \
    --op PublicGeneratePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'ct7pDy1W' \
    > test.out 2>&1
eval_tap $? 27 'PublicGeneratePartyCode' test.out

#- 28 PublicRevokePartyCode
$CLI_EXE \
    --sn session \
    --op PublicRevokePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'VyQezDqz' \
    > test.out 2>&1
eval_tap $? 28 'PublicRevokePartyCode' test.out

#- 29 PublicPartyInvite
# body param: body
echo '{"userID": "3gFUt4k4"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyInvite \
    --namespace $AB_NAMESPACE \
    --partyId 'gxKRuWZ2' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicPartyInvite' test.out

#- 30 PublicPromotePartyLeader
# body param: body
echo '{"leaderID": "v8D3Ormv"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPromotePartyLeader \
    --namespace $AB_NAMESPACE \
    --partyId 'tT8obHdW' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'PublicPromotePartyLeader' test.out

#- 31 PublicPartyJoin
$CLI_EXE \
    --sn session \
    --op PublicPartyJoin \
    --namespace $AB_NAMESPACE \
    --partyId 'D4WihNYh' \
    > test.out 2>&1
eval_tap $? 31 'PublicPartyJoin' test.out

#- 32 PublicPartyLeave
$CLI_EXE \
    --sn session \
    --op PublicPartyLeave \
    --namespace $AB_NAMESPACE \
    --partyId 'vi5QrLOM' \
    > test.out 2>&1
eval_tap $? 32 'PublicPartyLeave' test.out

#- 33 PublicPartyReject
$CLI_EXE \
    --sn session \
    --op PublicPartyReject \
    --namespace $AB_NAMESPACE \
    --partyId 'brilVx7S' \
    > test.out 2>&1
eval_tap $? 33 'PublicPartyReject' test.out

#- 34 PublicPartyKick
$CLI_EXE \
    --sn session \
    --op PublicPartyKick \
    --namespace $AB_NAMESPACE \
    --partyId 'Pdk5rTcj' \
    --userId 'G9mFtEPU' \
    > test.out 2>&1
eval_tap $? 34 'PublicPartyKick' test.out

#- 35 PublicCreateParty
# body param: body
echo '{"attributes": {"eL7S8goM": {}, "F8ERzkTA": {}, "PJCSOjnd": {}}, "configurationName": "ts2v0e2x", "inactiveTimeout": 19, "inviteTimeout": 90, "joinability": "ogt7vmMp", "maxPlayers": 52, "members": [{"ID": "ehIvL6eJ", "PlatformID": "suHuMp7i", "PlatformUserID": "dRGr37QR"}, {"ID": "QrZ5Z1TD", "PlatformID": "62GTMhYV", "PlatformUserID": "acmh9ee0"}, {"ID": "6ZEgKLik", "PlatformID": "IBu90JUK", "PlatformUserID": "LeDofPAc"}], "minPlayers": 31, "type": "akeux9VL"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicCreateParty \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'PublicCreateParty' test.out

#- 36 PublicQueryMyGameSessions
$CLI_EXE \
    --sn session \
    --op PublicQueryMyGameSessions \
    --namespace $AB_NAMESPACE \
    --order '3MWOQ1o8' \
    --orderBy '6hLjExcN' \
    --status '1ltEcGpL' \
    > test.out 2>&1
eval_tap $? 36 'PublicQueryMyGameSessions' test.out

#- 37 PublicQueryMyParties
$CLI_EXE \
    --sn session \
    --op PublicQueryMyParties \
    --namespace $AB_NAMESPACE \
    --order '6CkKVHdr' \
    --orderBy 'xmxF1zL0' \
    --status 'gs9mECmO' \
    > test.out 2>&1
eval_tap $? 37 'PublicQueryMyParties' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE