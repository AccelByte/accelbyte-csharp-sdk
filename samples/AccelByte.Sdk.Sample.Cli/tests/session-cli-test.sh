#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..37"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 GetHealthcheckInfoV1
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfoV1 \
    > test.out 2>&1
eval_tap $? 3 'GetHealthcheckInfoV1' test.out

#- 4 AdminCreateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "f6muX7c4", "deployment": "CyDPb6qs", "inactiveTimeout": 100, "inviteTimeout": 89, "joinability": "wvoIJU9T", "maxPlayers": 29, "minPlayers": 17, "name": "9Ay57YrJ", "requestedRegions": ["o6IhG0pm", "kRZfo0go", "mH6AAfU3"], "type": "ahWam3Eh"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminCreateConfigurationTemplateV1 \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'AdminCreateConfigurationTemplateV1' test.out

#- 5 AdminGetAllConfigurationTemplatesV1
$CLI_EXE \
    --sn session \
    --op AdminGetAllConfigurationTemplatesV1 \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetAllConfigurationTemplatesV1' test.out

#- 6 AdminGetConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminGetConfigurationTemplateV1 \
    --name 'tfM8Irhb' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetConfigurationTemplateV1' test.out

#- 7 AdminUpdateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "P74ujIJs", "deployment": "MUxP9Tl5", "inactiveTimeout": 74, "inviteTimeout": 23, "joinability": "pVY7JQkP", "maxPlayers": 42, "minPlayers": 40, "name": "YpzfeOqt", "requestedRegions": ["ZY3TEfQQ", "bVTBh33g", "TOT4VCXA"], "type": "rdcHWNC2"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminUpdateConfigurationTemplateV1 \
    --name '33l1FZ1X' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateConfigurationTemplateV1' test.out

#- 8 AdminDeleteConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminDeleteConfigurationTemplateV1 \
    --name 'cm2bHyi2' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteConfigurationTemplateV1' test.out

#- 9 AdminQueryGameSessions
$CLI_EXE \
    --sn session \
    --op AdminQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --configurationName 'SV4vMrCW' \
    --dsPodName 'TEi68tGv' \
    --fromTime '49eup77Y' \
    --gameMode 'BSErMXxa' \
    --joinability 'yOf5Ziin' \
    --limit '31' \
    --matchPool 'NDx9L41e' \
    --memberID 'zdBAdejS' \
    --offset '18' \
    --order 't2Y9UKyZ' \
    --orderBy 'xvRJPqD6' \
    --sessionID 'mAPJeaFj' \
    --status 'NCD54Ijh' \
    --toTime '8ojKCP8W' \
    > test.out 2>&1
eval_tap $? 9 'AdminQueryGameSessions' test.out

#- 10 AdminUpdateGameSessionMember
$CLI_EXE \
    --sn session \
    --op AdminUpdateGameSessionMember \
    --memberId 'BsDmj2XG' \
    --namespace $AB_NAMESPACE \
    --sessionId 'tstoiDoX' \
    --statusType 'NuUKymTA' \
    > test.out 2>&1
eval_tap $? 10 'AdminUpdateGameSessionMember' test.out

#- 11 AdminQueryParties
$CLI_EXE \
    --sn session \
    --op AdminQueryParties \
    --namespace $AB_NAMESPACE \
    --joinability '0PMAjf79' \
    --key 'mE213QTj' \
    --leaderID 'kVaISKRx' \
    --limit '77' \
    --memberID '8dlEu6EN' \
    --memberStatus '1bawIXBv' \
    --offset '41' \
    --order 'twOjyu14' \
    --orderBy 'G1CdjYJ1' \
    --value 'dVnIyLbn' \
    > test.out 2>&1
eval_tap $? 11 'AdminQueryParties' test.out

#- 12 CreateGameSession
# body param: body
echo '{"attributes": {"M0k4r8GQ": {}, "WV8v8RR3": {}, "OO0mQOF1": {}}, "backfillTicketID": "xZegg1yl", "clientVersion": "aKHbuqMQ", "configurationName": "E17pm4lF", "deployment": "HT7quaJd", "inactiveTimeout": 76, "inviteTimeout": 50, "joinability": "5LduxDMQ", "matchPool": "G0Jb9Ejf", "maxPlayers": 16, "minPlayers": 80, "requestedRegions": ["CvCcjlby", "TU3jDVtl", "u5WxjR6O"], "serverName": "m13AtD3Z", "teams": [{"UserIDs": ["XONjyx0Y", "L0zaA3Xk", "bpa7Mb4S"]}, {"UserIDs": ["95dH7nHa", "TuqF7ocz", "BIjIPBvU"]}, {"UserIDs": ["THf4IH9f", "xakneo4Y", "2fyi8EjD"]}], "ticketIDs": ["7R5WsKed", "uBexueRS", "S2yu986F"], "type": "9YT2TEVA"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op CreateGameSession \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreateGameSession' test.out

#- 13 PublicQueryGameSessions
# body param: body
echo '{"P6ajcpCa": {}, "B0g1vhUK": {}, "zq5fdBFf": {}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'PublicQueryGameSessions' test.out

#- 14 GetGameSessionByPodName
$CLI_EXE \
    --sn session \
    --op GetGameSessionByPodName \
    --namespace $AB_NAMESPACE \
    --podName 'f8YL8WPt' \
    > test.out 2>&1
eval_tap $? 14 'GetGameSessionByPodName' test.out

#- 15 GetGameSession
$CLI_EXE \
    --sn session \
    --op GetGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'kbrlnq6h' \
    > test.out 2>&1
eval_tap $? 15 'GetGameSession' test.out

#- 16 UpdateGameSession
# body param: body
echo '{"attributes": {"nt83R2kq": {}, "yRKB0vag": {}, "7BKyqM0l": {}}, "backfillTicketID": "FC3QKKhS", "clientVersion": "trrAjUyv", "deployment": "dku4pnMr", "inactiveTimeout": 69, "inviteTimeout": 76, "joinability": "w7HPogcj", "matchPool": "uCq1fBQb", "maxPlayers": 1, "minPlayers": 95, "requestedRegions": ["QRHvGA30", "UBw67LSA", "We7CkxbM"], "teams": [{"UserIDs": ["Y82wufAE", "GYdGiSgA", "b98VoMMS"]}, {"UserIDs": ["93I45thQ", "AVDI0UmA", "OMOz3ZAv"]}, {"UserIDs": ["3itTLmpo", "vQtIF49m", "skavuKai"]}], "ticketIDs": ["8lidXuTp", "21DBc8YY", "613Tku8s"], "type": "rnGob7I2", "version": 2}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op UpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'SZGWmZTV' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdateGameSession' test.out

#- 17 DeleteGameSession
$CLI_EXE \
    --sn session \
    --op DeleteGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'MPkFsgdQ' \
    > test.out 2>&1
eval_tap $? 17 'DeleteGameSession' test.out

#- 18 PatchUpdateGameSession
# body param: body
echo '{"attributes": {"K3iEvsU0": {}, "t8JnoS4G": {}, "iK8iXW9D": {}}, "backfillTicketID": "ZTmkddSN", "clientVersion": "hC8uTjWX", "deployment": "wFiiMEnY", "inactiveTimeout": 47, "inviteTimeout": 84, "joinability": "4dmFl1ck", "matchPool": "HqM9jF3N", "maxPlayers": 62, "minPlayers": 20, "requestedRegions": ["41LDqv8m", "JVH6opE8", "6Ew5eLj3"], "teams": [{"UserIDs": ["dWT8EhkZ", "jfu65ZQj", "LtITKacj"]}, {"UserIDs": ["sePKXL3z", "e6UTlc8o", "sQY7mbsh"]}, {"UserIDs": ["u4V3NnoK", "g86nB91J", "NG2omhkR"]}], "ticketIDs": ["3qw9NkaR", "v3EGIiCl", "MH6stSvW"], "type": "1vzRnuqQ", "version": 20}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PatchUpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'CNUzyPHi' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'PatchUpdateGameSession' test.out

#- 19 PublicGameSessionInvite
# body param: body
echo '{"userID": "hnKIYpJt"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicGameSessionInvite \
    --namespace $AB_NAMESPACE \
    --sessionId 'UQNt1wxo' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'PublicGameSessionInvite' test.out

#- 20 JoinGameSession
$CLI_EXE \
    --sn session \
    --op JoinGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId '2gmaEro5' \
    > test.out 2>&1
eval_tap $? 20 'JoinGameSession' test.out

#- 21 LeaveGameSession
$CLI_EXE \
    --sn session \
    --op LeaveGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId '0yXrEFwB' \
    > test.out 2>&1
eval_tap $? 21 'LeaveGameSession' test.out

#- 22 PublicGameSessionReject
$CLI_EXE \
    --sn session \
    --op PublicGameSessionReject \
    --namespace $AB_NAMESPACE \
    --sessionId 'b2sx2QTp' \
    > test.out 2>&1
eval_tap $? 22 'PublicGameSessionReject' test.out

#- 23 PublicPartyJoinCode
# body param: body
echo '{"code": "kNlkJjMu"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyJoinCode \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'PublicPartyJoinCode' test.out

#- 24 PublicGetParty
$CLI_EXE \
    --sn session \
    --op PublicGetParty \
    --namespace $AB_NAMESPACE \
    --partyId 'eHH0Gxt8' \
    > test.out 2>&1
eval_tap $? 24 'PublicGetParty' test.out

#- 25 PublicUpdateParty
# body param: body
echo '{"attributes": {"1oYC7Msc": {}, "WYc3cytN": {}, "kCa0ovHo": {}}, "inactiveTimeout": 97, "inviteTimeout": 95, "joinability": "ZEChYuaR", "maxPlayers": 45, "minPlayers": 50, "type": "2e2Kequa", "version": 4}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'dIrEc6hq' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'PublicUpdateParty' test.out

#- 26 PublicPatchUpdateParty
# body param: body
echo '{"attributes": {"KbIDDz8f": {}, "67NxFdBC": {}, "vc8lioeM": {}}, "inactiveTimeout": 76, "inviteTimeout": 34, "joinability": "JO2b02Wu", "maxPlayers": 92, "minPlayers": 99, "type": "vQNtzwPj", "version": 56}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPatchUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'Ak2uXI39' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'PublicPatchUpdateParty' test.out

#- 27 PublicGeneratePartyCode
$CLI_EXE \
    --sn session \
    --op PublicGeneratePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'TOiVWgn3' \
    > test.out 2>&1
eval_tap $? 27 'PublicGeneratePartyCode' test.out

#- 28 PublicRevokePartyCode
$CLI_EXE \
    --sn session \
    --op PublicRevokePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'FvcM2BkW' \
    > test.out 2>&1
eval_tap $? 28 'PublicRevokePartyCode' test.out

#- 29 PublicPartyInvite
# body param: body
echo '{"userID": "yPy2rStm"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyInvite \
    --namespace $AB_NAMESPACE \
    --partyId 'cbFcjXH3' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicPartyInvite' test.out

#- 30 PublicPromotePartyLeader
# body param: body
echo '{"leaderID": "qroirV6h"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPromotePartyLeader \
    --namespace $AB_NAMESPACE \
    --partyId '8B6FB8Ro' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'PublicPromotePartyLeader' test.out

#- 31 PublicPartyJoin
$CLI_EXE \
    --sn session \
    --op PublicPartyJoin \
    --namespace $AB_NAMESPACE \
    --partyId 'cWRKNUpj' \
    > test.out 2>&1
eval_tap $? 31 'PublicPartyJoin' test.out

#- 32 PublicPartyLeave
$CLI_EXE \
    --sn session \
    --op PublicPartyLeave \
    --namespace $AB_NAMESPACE \
    --partyId 'swdGqWKf' \
    > test.out 2>&1
eval_tap $? 32 'PublicPartyLeave' test.out

#- 33 PublicPartyReject
$CLI_EXE \
    --sn session \
    --op PublicPartyReject \
    --namespace $AB_NAMESPACE \
    --partyId 'kBiaqlly' \
    > test.out 2>&1
eval_tap $? 33 'PublicPartyReject' test.out

#- 34 PublicPartyKick
$CLI_EXE \
    --sn session \
    --op PublicPartyKick \
    --namespace $AB_NAMESPACE \
    --partyId 'ybuLm8Pf' \
    --userId 'ItIUtPfT' \
    > test.out 2>&1
eval_tap $? 34 'PublicPartyKick' test.out

#- 35 PublicCreateParty
# body param: body
echo '{"attributes": {"rDJ1NneV": {}, "JvVqs93G": {}, "D2pTyMy8": {}}, "configurationName": "nRYjiaCT", "inactiveTimeout": 94, "inviteTimeout": 25, "joinability": "Ea5J3B1C", "maxPlayers": 16, "members": [{"ID": "Dmtoucju", "PlatformID": "sp3CyPgg", "PlatformUserID": "1bQOpich"}, {"ID": "qgyo6AHI", "PlatformID": "Ii9qZL6I", "PlatformUserID": "lpTsvRx0"}, {"ID": "BL0Yxcua", "PlatformID": "om27ZDD4", "PlatformUserID": "zrfLwjys"}], "minPlayers": 49, "type": "ViVDQSQq"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicCreateParty \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'PublicCreateParty' test.out

#- 36 PublicQueryMyGameSessions
$CLI_EXE \
    --sn session \
    --op PublicQueryMyGameSessions \
    --namespace $AB_NAMESPACE \
    --order 'mpRH4RuA' \
    --orderBy 'WTFAMcbj' \
    --status 'QZ31i29c' \
    > test.out 2>&1
eval_tap $? 36 'PublicQueryMyGameSessions' test.out

#- 37 PublicQueryMyParties
$CLI_EXE \
    --sn session \
    --op PublicQueryMyParties \
    --namespace $AB_NAMESPACE \
    --order 'fkNXf0e0' \
    --orderBy 'xbfXt6zE' \
    --status 'res4WsLp' \
    > test.out 2>&1
eval_tap $? 37 'PublicQueryMyParties' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE