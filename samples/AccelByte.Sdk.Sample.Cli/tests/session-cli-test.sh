#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..37"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 GetHealthcheckInfoV1
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfoV1 \
    > test.out 2>&1
eval_tap $? 3 'GetHealthcheckInfoV1' test.out

#- 4 AdminCreateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "G95aTCoN", "deployment": "KJQzfxcb", "inactiveTimeout": 82, "inviteTimeout": 65, "joinability": "kJ9UeMRk", "maxPlayers": 82, "minPlayers": 90, "name": "SE14lXbj", "requestedRegions": ["9EIsr8ED", "96f4PZ8X", "bOabSkst"], "textChat": true, "type": "BGWv7NUF"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminCreateConfigurationTemplateV1 \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'AdminCreateConfigurationTemplateV1' test.out

#- 5 AdminGetAllConfigurationTemplatesV1
$CLI_EXE \
    --sn session \
    --op AdminGetAllConfigurationTemplatesV1 \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetAllConfigurationTemplatesV1' test.out

#- 6 AdminGetConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminGetConfigurationTemplateV1 \
    --name '9KESCKil' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetConfigurationTemplateV1' test.out

#- 7 AdminUpdateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "REjsTpFt", "deployment": "8PIbZw3s", "inactiveTimeout": 54, "inviteTimeout": 9, "joinability": "BeR9IBl7", "maxPlayers": 70, "minPlayers": 51, "name": "s4d0sJ1z", "requestedRegions": ["jWhlIc83", "BTydKVa0", "FO69QqUE"], "textChat": false, "type": "6tKscCBC"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminUpdateConfigurationTemplateV1 \
    --name 'vXKPCCUD' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateConfigurationTemplateV1' test.out

#- 8 AdminDeleteConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminDeleteConfigurationTemplateV1 \
    --name 'qrfZ8YUr' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteConfigurationTemplateV1' test.out

#- 9 AdminQueryGameSessions
$CLI_EXE \
    --sn session \
    --op AdminQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --configurationName 'H0jsQiqq' \
    --dsPodName 'QrBeNXDn' \
    --fromTime 'rsiXJjhH' \
    --gameMode 'RryJBMUD' \
    --joinability 'bZZ7jGGh' \
    --limit '14' \
    --matchPool 'za9Pvs4Q' \
    --memberID 'qH4WTtXQ' \
    --offset '50' \
    --order 'xRYqKz3Z' \
    --orderBy '1N9rAxkY' \
    --sessionID '3V3LoQCa' \
    --status '690srQuc' \
    --statusV2 'qoEaWRKV' \
    --toTime 'sx2YDnVn' \
    > test.out 2>&1
eval_tap $? 9 'AdminQueryGameSessions' test.out

#- 10 AdminUpdateGameSessionMember
$CLI_EXE \
    --sn session \
    --op AdminUpdateGameSessionMember \
    --memberId 'YKcCzdnP' \
    --namespace $AB_NAMESPACE \
    --sessionId 'iiVOzDg6' \
    --statusType 'VZ4OZr24' \
    > test.out 2>&1
eval_tap $? 10 'AdminUpdateGameSessionMember' test.out

#- 11 AdminQueryParties
$CLI_EXE \
    --sn session \
    --op AdminQueryParties \
    --namespace $AB_NAMESPACE \
    --joinability '01qkgZeW' \
    --key 'rzpqSuG6' \
    --leaderID 'Os6Khjg9' \
    --limit '73' \
    --memberID 'rLtpLwRP' \
    --memberStatus 'Boofh6m4' \
    --offset '98' \
    --order 'NwdaXAlE' \
    --orderBy 'JTx1jks3' \
    --value 'lDoikzpA' \
    > test.out 2>&1
eval_tap $? 11 'AdminQueryParties' test.out

#- 12 CreateGameSession
# body param: body
echo '{"attributes": {"6P6ZOw8i": {}, "DBvVWxtF": {}, "paxwRVMt": {}}, "backfillTicketID": "Bjh4Lrcv", "clientVersion": "abbFD2z0", "configurationName": "FEEN5PIZ", "deployment": "MoHVNwsD", "inactiveTimeout": 96, "inviteTimeout": 56, "joinability": "E0iNpCKz", "matchPool": "uLh5kCIc", "maxPlayers": 85, "minPlayers": 81, "requestedRegions": ["ALG6qTzk", "gJm5r4VB", "P0ksd7rj"], "serverName": "1JCgXVSk", "teams": [{"UserIDs": ["rL9Ot9as", "pAbkOEgY", "xuc80Pcx"], "parties": [{"partyID": "0q5jaBYx", "userIDs": ["RJHlyrr7", "73WAy7Tk", "kTER54Zh"]}, {"partyID": "NTfo0LCv", "userIDs": ["61swqZAO", "k3ZEfc1n", "LInZD1tQ"]}, {"partyID": "f9cZumin", "userIDs": ["ZVaPxbm8", "7tUnpPRH", "4XiPHLPL"]}]}, {"UserIDs": ["4kmCYDNo", "7WFWJouv", "e8AweBzo"], "parties": [{"partyID": "u6I6ia3V", "userIDs": ["OAQ1MQIl", "k9jyDrk3", "rTxWwYqh"]}, {"partyID": "P8TsaYvJ", "userIDs": ["TiktgCmw", "tSBEvgkN", "1RLdVGYt"]}, {"partyID": "I9zoJqDt", "userIDs": ["XaW0q5bY", "OaW9jsQ4", "Da4Ewlyt"]}]}, {"UserIDs": ["Q9WL0z17", "YRxhTYgc", "opzCmiyk"], "parties": [{"partyID": "aqNurvd3", "userIDs": ["YF3PyMxF", "NIMbahpd", "Ylztnvg8"]}, {"partyID": "Q5vXLmAM", "userIDs": ["HcJ2LwNS", "4IXQlwdJ", "xtVmUOFU"]}, {"partyID": "XyFL2Xga", "userIDs": ["YIa84ArC", "HkY6JPlA", "EXPRwn1z"]}]}], "textChat": true, "ticketIDs": ["GV3IpNEc", "XP0cJK3g", "3RNvcfNz"], "type": "UmhgwVhu"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op CreateGameSession \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreateGameSession' test.out

#- 13 PublicQueryGameSessions
# body param: body
echo '{"r29AEzXc": {}, "9moYaTm5": {}, "pT9RHesw": {}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'PublicQueryGameSessions' test.out

#- 14 GetGameSessionByPodName
$CLI_EXE \
    --sn session \
    --op GetGameSessionByPodName \
    --namespace $AB_NAMESPACE \
    --podName 'qp7aa0Y1' \
    > test.out 2>&1
eval_tap $? 14 'GetGameSessionByPodName' test.out

#- 15 GetGameSession
$CLI_EXE \
    --sn session \
    --op GetGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId '7PTWt9Nn' \
    > test.out 2>&1
eval_tap $? 15 'GetGameSession' test.out

#- 16 UpdateGameSession
# body param: body
echo '{"attributes": {"qllRQvSF": {}, "rGAcavmi": {}, "CDlOtJsz": {}}, "backfillTicketID": "AlwydMke", "clientVersion": "a7WEZaFu", "deployment": "KGiK81pJ", "inactiveTimeout": 37, "inviteTimeout": 94, "joinability": "RFZZGbEP", "matchPool": "GyDjt2V8", "maxPlayers": 76, "minPlayers": 20, "requestedRegions": ["UAMDj2oS", "gz8tOimG", "w5uMY69J"], "teams": [{"UserIDs": ["UCfwJBOq", "OJLf2w75", "pMo5H3ke"], "parties": [{"partyID": "uJ0laokR", "userIDs": ["CBnXPMQ1", "o7eb9ej7", "NKFObuoZ"]}, {"partyID": "8WQ6hrH6", "userIDs": ["6Ss8M0pj", "IFGJQHLs", "aeHLT14j"]}, {"partyID": "JGYv1nhn", "userIDs": ["DxDfYkgZ", "QsLLBQSV", "hpZOVuLG"]}]}, {"UserIDs": ["yrS410jy", "Mbak5Fef", "aD1A0rFG"], "parties": [{"partyID": "sYwXhJgF", "userIDs": ["mtx4A8LS", "GHTP97GR", "C10aPJhz"]}, {"partyID": "x6Sn2C29", "userIDs": ["Un2Mr2G8", "ZVNBixNc", "nwHSJWkv"]}, {"partyID": "deZqvux6", "userIDs": ["FEH85G7x", "hQy5pbgY", "L9i6CDp3"]}]}, {"UserIDs": ["SnDam48w", "0hpq7vvx", "DKuCSscv"], "parties": [{"partyID": "bKsItODS", "userIDs": ["16YP4PFE", "R6azBVH5", "rtg8Kw3W"]}, {"partyID": "BHyxsmFp", "userIDs": ["GnVLMmrB", "rGrCoVvh", "xAoTQUvR"]}, {"partyID": "MVyuqKXC", "userIDs": ["es7U6AWi", "ekfRANmU", "mtN8jI2j"]}]}], "ticketIDs": ["3Y8TjmPK", "8iWGoIUp", "4ViDJN7G"], "type": "jwMtqrY2", "version": 37}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op UpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'Qdv0GdOh' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdateGameSession' test.out

#- 17 DeleteGameSession
$CLI_EXE \
    --sn session \
    --op DeleteGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'GLWDvAza' \
    > test.out 2>&1
eval_tap $? 17 'DeleteGameSession' test.out

#- 18 PatchUpdateGameSession
# body param: body
echo '{"attributes": {"CNhihh8u": {}, "0lwTVSvu": {}, "s0YxamjQ": {}}, "backfillTicketID": "NeQ8bgu2", "clientVersion": "MqaFyaUG", "deployment": "Uyili2V7", "inactiveTimeout": 6, "inviteTimeout": 93, "joinability": "97CVjiz2", "matchPool": "zGXhChtz", "maxPlayers": 52, "minPlayers": 95, "requestedRegions": ["DIArv19X", "uJghAHlu", "PcnNGyU9"], "teams": [{"UserIDs": ["Mt5jGSM3", "pxBeF40K", "1j0yrmih"], "parties": [{"partyID": "KZli7HFK", "userIDs": ["AATwOXjA", "TRqgQs7W", "FXUDyQb6"]}, {"partyID": "TBRAIteR", "userIDs": ["nTLTWSDN", "AbdWtS9x", "MOIoIG6R"]}, {"partyID": "nC298Rv7", "userIDs": ["AATLKEcA", "fFWPYgS0", "L7DIYe0R"]}]}, {"UserIDs": ["Cfe6VgaL", "t39Zifps", "NqVw0FZu"], "parties": [{"partyID": "dgjUNRYC", "userIDs": ["N01GXQwn", "r9rBS9zC", "Pcbn4rCd"]}, {"partyID": "1Bh5HgYl", "userIDs": ["Y45qGjqe", "QUKFjncL", "OLMQmlKh"]}, {"partyID": "ZhrRYZtb", "userIDs": ["DjKi5XIH", "DQUQIK3M", "L7lShDDj"]}]}, {"UserIDs": ["qkcgEtKK", "kImhEjuo", "e4vAB2qM"], "parties": [{"partyID": "5wv2YfCa", "userIDs": ["v8ZuEzTD", "xyyJTOyA", "UnlwuOUc"]}, {"partyID": "kDiEY8mW", "userIDs": ["reKj0EtA", "1PE6xkqj", "GGXB73pN"]}, {"partyID": "nrokJyeu", "userIDs": ["nOHi36iA", "vbwTw46o", "rQZcUKku"]}]}], "ticketIDs": ["ZYLs3K0W", "ontRHcpn", "qhaPmKNk"], "type": "el1AiyUv", "version": 91}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PatchUpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'nUZhnrW1' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'PatchUpdateGameSession' test.out

#- 19 PublicGameSessionInvite
# body param: body
echo '{"userID": "c9qmAj26"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicGameSessionInvite \
    --namespace $AB_NAMESPACE \
    --sessionId 'laiz7F0A' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'PublicGameSessionInvite' test.out

#- 20 JoinGameSession
$CLI_EXE \
    --sn session \
    --op JoinGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId '13F1FEKY' \
    > test.out 2>&1
eval_tap $? 20 'JoinGameSession' test.out

#- 21 LeaveGameSession
$CLI_EXE \
    --sn session \
    --op LeaveGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'K2xZsTd3' \
    > test.out 2>&1
eval_tap $? 21 'LeaveGameSession' test.out

#- 22 PublicGameSessionReject
$CLI_EXE \
    --sn session \
    --op PublicGameSessionReject \
    --namespace $AB_NAMESPACE \
    --sessionId 'YUan19Jh' \
    > test.out 2>&1
eval_tap $? 22 'PublicGameSessionReject' test.out

#- 23 PublicPartyJoinCode
# body param: body
echo '{"code": "b3C20LAF"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyJoinCode \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'PublicPartyJoinCode' test.out

#- 24 PublicGetParty
$CLI_EXE \
    --sn session \
    --op PublicGetParty \
    --namespace $AB_NAMESPACE \
    --partyId 'rn8AO5cz' \
    > test.out 2>&1
eval_tap $? 24 'PublicGetParty' test.out

#- 25 PublicUpdateParty
# body param: body
echo '{"attributes": {"zeNLQ84j": {}, "c03Xyooi": {}, "CY7iJbqZ": {}}, "inactiveTimeout": 17, "inviteTimeout": 23, "joinability": "7bWGSyAh", "maxPlayers": 71, "minPlayers": 80, "type": "b64l5efG", "version": 99}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'FuZK9bV4' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'PublicUpdateParty' test.out

#- 26 PublicPatchUpdateParty
# body param: body
echo '{"attributes": {"zhbFXXRQ": {}, "UFTYtMQs": {}, "YaTPhYdJ": {}}, "inactiveTimeout": 35, "inviteTimeout": 7, "joinability": "nrWfuDne", "maxPlayers": 29, "minPlayers": 89, "type": "uaNNHCyK", "version": 48}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPatchUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'HW75WLZT' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'PublicPatchUpdateParty' test.out

#- 27 PublicGeneratePartyCode
$CLI_EXE \
    --sn session \
    --op PublicGeneratePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId '4l1bDbz7' \
    > test.out 2>&1
eval_tap $? 27 'PublicGeneratePartyCode' test.out

#- 28 PublicRevokePartyCode
$CLI_EXE \
    --sn session \
    --op PublicRevokePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'yz2PwFPL' \
    > test.out 2>&1
eval_tap $? 28 'PublicRevokePartyCode' test.out

#- 29 PublicPartyInvite
# body param: body
echo '{"userID": "hRqBPKhW"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyInvite \
    --namespace $AB_NAMESPACE \
    --partyId 'HlJusDC6' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicPartyInvite' test.out

#- 30 PublicPromotePartyLeader
# body param: body
echo '{"leaderID": "YhncsLzJ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPromotePartyLeader \
    --namespace $AB_NAMESPACE \
    --partyId 'wYsGczlv' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'PublicPromotePartyLeader' test.out

#- 31 PublicPartyJoin
$CLI_EXE \
    --sn session \
    --op PublicPartyJoin \
    --namespace $AB_NAMESPACE \
    --partyId 'iF6qVLkQ' \
    > test.out 2>&1
eval_tap $? 31 'PublicPartyJoin' test.out

#- 32 PublicPartyLeave
$CLI_EXE \
    --sn session \
    --op PublicPartyLeave \
    --namespace $AB_NAMESPACE \
    --partyId 'VB4EFx20' \
    > test.out 2>&1
eval_tap $? 32 'PublicPartyLeave' test.out

#- 33 PublicPartyReject
$CLI_EXE \
    --sn session \
    --op PublicPartyReject \
    --namespace $AB_NAMESPACE \
    --partyId 'eozS0HOA' \
    > test.out 2>&1
eval_tap $? 33 'PublicPartyReject' test.out

#- 34 PublicPartyKick
$CLI_EXE \
    --sn session \
    --op PublicPartyKick \
    --namespace $AB_NAMESPACE \
    --partyId 'zTidIjd9' \
    --userId 'lJXojkbm' \
    > test.out 2>&1
eval_tap $? 34 'PublicPartyKick' test.out

#- 35 PublicCreateParty
# body param: body
echo '{"attributes": {"pPo8eGbl": {}, "VXXKtRlO": {}, "FJvBafD1": {}}, "configurationName": "g9ExWZDZ", "inactiveTimeout": 84, "inviteTimeout": 87, "joinability": "lRK7USr0", "maxPlayers": 91, "members": [{"ID": "IGmxdG9d", "PlatformID": "3yK6DZDM", "PlatformUserID": "4Vgk9l23"}, {"ID": "Fv4jELfl", "PlatformID": "rlYXkDaR", "PlatformUserID": "iiNdkqk1"}, {"ID": "QVSBKadz", "PlatformID": "rqV3Fv77", "PlatformUserID": "W734zMky"}], "minPlayers": 33, "textChat": false, "type": "YJqGoShd"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicCreateParty \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'PublicCreateParty' test.out

#- 36 PublicQueryMyGameSessions
$CLI_EXE \
    --sn session \
    --op PublicQueryMyGameSessions \
    --namespace $AB_NAMESPACE \
    --order 'MeMU5f7q' \
    --orderBy 'Wytu3x2L' \
    --status 'WQvdZSJU' \
    > test.out 2>&1
eval_tap $? 36 'PublicQueryMyGameSessions' test.out

#- 37 PublicQueryMyParties
$CLI_EXE \
    --sn session \
    --op PublicQueryMyParties \
    --namespace $AB_NAMESPACE \
    --order 'EPkhOGMb' \
    --orderBy 'MGStsoG7' \
    --status 'oNL90r5M' \
    > test.out 2>&1
eval_tap $? 37 'PublicQueryMyParties' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE