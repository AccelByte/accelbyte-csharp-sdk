#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..37"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 GetHealthcheckInfoV1
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfoV1 \
    > test.out 2>&1
eval_tap $? 3 'GetHealthcheckInfoV1' test.out

#- 4 AdminCreateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "71AeG36r", "deployment": "FUtfUxtv", "inactiveTimeout": 63, "inviteTimeout": 6, "joinability": "QQgARicc", "maxPlayers": 97, "minPlayers": 79, "name": "QMZH8zJp", "requestedRegions": ["PnVz42LY", "AmeftaOD", "t7EvuHk8"], "textChat": false, "type": "IfZyjSme"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminCreateConfigurationTemplateV1 \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'AdminCreateConfigurationTemplateV1' test.out

#- 5 AdminGetAllConfigurationTemplatesV1
$CLI_EXE \
    --sn session \
    --op AdminGetAllConfigurationTemplatesV1 \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetAllConfigurationTemplatesV1' test.out

#- 6 AdminGetConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminGetConfigurationTemplateV1 \
    --name 'j4ykSmiT' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetConfigurationTemplateV1' test.out

#- 7 AdminUpdateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "1pPl2MAi", "deployment": "Ia4CIFpE", "inactiveTimeout": 81, "inviteTimeout": 95, "joinability": "l24PVwMV", "maxPlayers": 10, "minPlayers": 22, "name": "bZdmQ54N", "requestedRegions": ["QTKFUHBQ", "ufDGRfaZ", "abu62MBh"], "textChat": true, "type": "bDnWRpPA"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminUpdateConfigurationTemplateV1 \
    --name '49wJNB9a' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateConfigurationTemplateV1' test.out

#- 8 AdminDeleteConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminDeleteConfigurationTemplateV1 \
    --name 'uZDmw8Or' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteConfigurationTemplateV1' test.out

#- 9 AdminQueryGameSessions
$CLI_EXE \
    --sn session \
    --op AdminQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --configurationName 'rNBzAKnv' \
    --dsPodName 'ByECIfRc' \
    --fromTime '45DTfFP9' \
    --gameMode 'p9iNSqNj' \
    --joinability 'ktxZpbMO' \
    --limit '98' \
    --matchPool 'NHLGuhfo' \
    --memberID 'zsUZTvoA' \
    --offset '86' \
    --order '8smz8P5k' \
    --orderBy 'Hi5bVGQA' \
    --sessionID 'VUDQ2scv' \
    --status 'mHlQVCze' \
    --toTime 'SqXUqOhX' \
    > test.out 2>&1
eval_tap $? 9 'AdminQueryGameSessions' test.out

#- 10 AdminUpdateGameSessionMember
$CLI_EXE \
    --sn session \
    --op AdminUpdateGameSessionMember \
    --memberId '8gy9sOFE' \
    --namespace $AB_NAMESPACE \
    --sessionId 'BtiETZPG' \
    --statusType 'dL7Io5s5' \
    > test.out 2>&1
eval_tap $? 10 'AdminUpdateGameSessionMember' test.out

#- 11 AdminQueryParties
$CLI_EXE \
    --sn session \
    --op AdminQueryParties \
    --namespace $AB_NAMESPACE \
    --joinability 'D3t0Ol1M' \
    --key 'XBL1wLeR' \
    --leaderID 'QaS3tovs' \
    --limit '89' \
    --memberID '26nLd4Rj' \
    --memberStatus '41K8cLwp' \
    --offset '81' \
    --order 'Ya08NZQ4' \
    --orderBy 'SXxa8qwV' \
    --value 'AR00iNKz' \
    > test.out 2>&1
eval_tap $? 11 'AdminQueryParties' test.out

#- 12 CreateGameSession
# body param: body
echo '{"attributes": {"gFHAyu5V": {}, "pzTj8EYv": {}, "HVTS3VIy": {}}, "backfillTicketID": "ecvhKEUP", "clientVersion": "Ts2Eblwd", "configurationName": "g0zQsq1v", "deployment": "Io6O1KhZ", "inactiveTimeout": 81, "inviteTimeout": 28, "joinability": "t0MLqOQe", "matchPool": "1bGnnyDb", "maxPlayers": 86, "minPlayers": 89, "requestedRegions": ["IuYOytV2", "qnZZYSsP", "bJ3vSmI7"], "serverName": "BKjvxbVi", "teams": [{"UserIDs": ["uopbck1a", "pRtoLzxp", "FH3PxWF4"]}, {"UserIDs": ["mVSpZUg1", "Skxs91p9", "wRWTo6ye"]}, {"UserIDs": ["PFoyqHev", "B1a3mnFj", "61F5Dyly"]}], "textChat": true, "ticketIDs": ["sWYwiisQ", "K3yexNfs", "MNVMVQiF"], "type": "B0QY1aTh"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op CreateGameSession \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreateGameSession' test.out

#- 13 PublicQueryGameSessions
# body param: body
echo '{"rfnWNkU6": {}, "ksK1DRUD": {}, "lAIvtMNI": {}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'PublicQueryGameSessions' test.out

#- 14 GetGameSessionByPodName
$CLI_EXE \
    --sn session \
    --op GetGameSessionByPodName \
    --namespace $AB_NAMESPACE \
    --podName 'SRJ2n5yp' \
    > test.out 2>&1
eval_tap $? 14 'GetGameSessionByPodName' test.out

#- 15 GetGameSession
$CLI_EXE \
    --sn session \
    --op GetGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'bwa68Ck8' \
    > test.out 2>&1
eval_tap $? 15 'GetGameSession' test.out

#- 16 UpdateGameSession
# body param: body
echo '{"attributes": {"zGOe5yNv": {}, "UId4ZEvr": {}, "CB87SBQp": {}}, "backfillTicketID": "4VDuUJXu", "clientVersion": "mHMXitpF", "deployment": "b3gcd3BH", "inactiveTimeout": 65, "inviteTimeout": 26, "joinability": "y7PeNEVi", "matchPool": "GMRysZr6", "maxPlayers": 22, "minPlayers": 6, "requestedRegions": ["pqjyqMTL", "zWKypOgR", "A86YAjgm"], "teams": [{"UserIDs": ["cvwEGqil", "Me3xhHLL", "6frdELX9"]}, {"UserIDs": ["hymvXrzL", "gat38Gye", "j4w29yJY"]}, {"UserIDs": ["8sx6JF7b", "ipvzzuLz", "q7orFgQO"]}], "ticketIDs": ["C4myRC16", "nYMJvfZj", "7IhMPiL6"], "type": "5vaXXxUf", "version": 61}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op UpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'uxnQpF1d' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdateGameSession' test.out

#- 17 DeleteGameSession
$CLI_EXE \
    --sn session \
    --op DeleteGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'vupNEGRL' \
    > test.out 2>&1
eval_tap $? 17 'DeleteGameSession' test.out

#- 18 PatchUpdateGameSession
# body param: body
echo '{"attributes": {"6aDQoooh": {}, "VtqCIx8q": {}, "2Dmh6AMH": {}}, "backfillTicketID": "Vd15wpRm", "clientVersion": "nQD6q77s", "deployment": "AnrX99qY", "inactiveTimeout": 74, "inviteTimeout": 24, "joinability": "lpFEm53W", "matchPool": "UKUf4yhd", "maxPlayers": 30, "minPlayers": 58, "requestedRegions": ["djbxx0yx", "5lLfZkhv", "YwO2ks2n"], "teams": [{"UserIDs": ["zo6cPHkJ", "N3Ie7O22", "4fY5jiPM"]}, {"UserIDs": ["RuyHIKkm", "gSKuHMwu", "apzNbiYg"]}, {"UserIDs": ["xBsQh68O", "Q5GpxVl6", "NShUu3HA"]}], "ticketIDs": ["SkAXp09b", "dMMVr3uO", "muSg9CeT"], "type": "qYI9lCuZ", "version": 65}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PatchUpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'GGfetdML' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'PatchUpdateGameSession' test.out

#- 19 PublicGameSessionInvite
# body param: body
echo '{"userID": "rj6GN7Hn"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicGameSessionInvite \
    --namespace $AB_NAMESPACE \
    --sessionId '2CQZYdnH' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'PublicGameSessionInvite' test.out

#- 20 JoinGameSession
$CLI_EXE \
    --sn session \
    --op JoinGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'M1W0URCa' \
    > test.out 2>&1
eval_tap $? 20 'JoinGameSession' test.out

#- 21 LeaveGameSession
$CLI_EXE \
    --sn session \
    --op LeaveGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId '3uOs9o1d' \
    > test.out 2>&1
eval_tap $? 21 'LeaveGameSession' test.out

#- 22 PublicGameSessionReject
$CLI_EXE \
    --sn session \
    --op PublicGameSessionReject \
    --namespace $AB_NAMESPACE \
    --sessionId 'CeCA9FBr' \
    > test.out 2>&1
eval_tap $? 22 'PublicGameSessionReject' test.out

#- 23 PublicPartyJoinCode
# body param: body
echo '{"code": "xutuwti5"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyJoinCode \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'PublicPartyJoinCode' test.out

#- 24 PublicGetParty
$CLI_EXE \
    --sn session \
    --op PublicGetParty \
    --namespace $AB_NAMESPACE \
    --partyId 'JIyoI6X3' \
    > test.out 2>&1
eval_tap $? 24 'PublicGetParty' test.out

#- 25 PublicUpdateParty
# body param: body
echo '{"attributes": {"6MqqKSv4": {}, "ZQSaySl5": {}, "pPwngcDY": {}}, "inactiveTimeout": 60, "inviteTimeout": 35, "joinability": "QxC9eK6F", "maxPlayers": 87, "minPlayers": 50, "type": "U3TXIDCC", "version": 16}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'KfDf1gkr' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'PublicUpdateParty' test.out

#- 26 PublicPatchUpdateParty
# body param: body
echo '{"attributes": {"9MF7AN79": {}, "cb0MRU6s": {}, "cv5QgSNd": {}}, "inactiveTimeout": 72, "inviteTimeout": 13, "joinability": "Oqv3SCMd", "maxPlayers": 100, "minPlayers": 43, "type": "aQMOzLnL", "version": 3}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPatchUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'caOxBZ2V' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'PublicPatchUpdateParty' test.out

#- 27 PublicGeneratePartyCode
$CLI_EXE \
    --sn session \
    --op PublicGeneratePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'zJRXxpBm' \
    > test.out 2>&1
eval_tap $? 27 'PublicGeneratePartyCode' test.out

#- 28 PublicRevokePartyCode
$CLI_EXE \
    --sn session \
    --op PublicRevokePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'PDjpnWJy' \
    > test.out 2>&1
eval_tap $? 28 'PublicRevokePartyCode' test.out

#- 29 PublicPartyInvite
# body param: body
echo '{"userID": "gnetgvbA"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyInvite \
    --namespace $AB_NAMESPACE \
    --partyId '1G3OjIbE' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicPartyInvite' test.out

#- 30 PublicPromotePartyLeader
# body param: body
echo '{"leaderID": "vAxXkqTQ"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPromotePartyLeader \
    --namespace $AB_NAMESPACE \
    --partyId 'GCEijGJz' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'PublicPromotePartyLeader' test.out

#- 31 PublicPartyJoin
$CLI_EXE \
    --sn session \
    --op PublicPartyJoin \
    --namespace $AB_NAMESPACE \
    --partyId 'wJJosRpE' \
    > test.out 2>&1
eval_tap $? 31 'PublicPartyJoin' test.out

#- 32 PublicPartyLeave
$CLI_EXE \
    --sn session \
    --op PublicPartyLeave \
    --namespace $AB_NAMESPACE \
    --partyId 'kM582ZoW' \
    > test.out 2>&1
eval_tap $? 32 'PublicPartyLeave' test.out

#- 33 PublicPartyReject
$CLI_EXE \
    --sn session \
    --op PublicPartyReject \
    --namespace $AB_NAMESPACE \
    --partyId 'mTNlliU9' \
    > test.out 2>&1
eval_tap $? 33 'PublicPartyReject' test.out

#- 34 PublicPartyKick
$CLI_EXE \
    --sn session \
    --op PublicPartyKick \
    --namespace $AB_NAMESPACE \
    --partyId 'JpaVgCys' \
    --userId 'wXKxOht0' \
    > test.out 2>&1
eval_tap $? 34 'PublicPartyKick' test.out

#- 35 PublicCreateParty
# body param: body
echo '{"attributes": {"eu8U9hue": {}, "o7Yu5GLh": {}, "kGl4x83Q": {}}, "configurationName": "pVPAzS41", "inactiveTimeout": 76, "inviteTimeout": 24, "joinability": "wTaW47eM", "maxPlayers": 74, "members": [{"ID": "kWPvz6ZZ", "PlatformID": "b8he3Nt6", "PlatformUserID": "aIb0QjKV"}, {"ID": "QTXnjeiO", "PlatformID": "hbJyUcd1", "PlatformUserID": "oXLpjQN2"}, {"ID": "wiHE6QAg", "PlatformID": "wEUE78TF", "PlatformUserID": "UwT2ipE9"}], "minPlayers": 70, "textChat": true, "type": "T9YLUB3S"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicCreateParty \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'PublicCreateParty' test.out

#- 36 PublicQueryMyGameSessions
$CLI_EXE \
    --sn session \
    --op PublicQueryMyGameSessions \
    --namespace $AB_NAMESPACE \
    --order 'ccFcfHp7' \
    --orderBy 'kKVyflkn' \
    --status 'KyNixMzF' \
    > test.out 2>&1
eval_tap $? 36 'PublicQueryMyGameSessions' test.out

#- 37 PublicQueryMyParties
$CLI_EXE \
    --sn session \
    --op PublicQueryMyParties \
    --namespace $AB_NAMESPACE \
    --order 'tb1pv1fm' \
    --orderBy 'pMgsSqHT' \
    --status 'IPAgH4yo' \
    > test.out 2>&1
eval_tap $? 37 'PublicQueryMyParties' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE