#!/usr/bin/env bash

# Copyright (c) 2021 AccelByte Inc. All Rights Reserved.
# This is licensed software from AccelByte Inc, for limitations
# and restrictions contact your company contract manager.

# This code is generated by tool. DO NOT EDIT.

# Meta:
# - random seed: 512
# - template file: cli-test.j2

# Instructions:
# - Run the Justice SDK Mock Server first before running this script.

export AB_BASE_URL="http://127.0.0.1:8080"
export AB_CLIENT_ID="admin"
export AB_CLIENT_SECRET="admin"
export AB_NAMESPACE="test"
export AB_APP_NAME="UnitTest"

EXIT_CODE=0

eval_tap() {
  if [ $1 -eq 0 ]; then
    echo "ok $2 - $3"
  else
    EXIT_CODE=1
    echo "not ok $2 - $3"
    sed 's/^/# /g' $4
  fi
  rm -f $4
}

CLI_EXE="AccelByte.Sdk.Sample.Cli"
CLI_TOKEN_FILE="$(dirname "$(which $CLI_EXE)")/token.json"
TEMP_JSON_INPUT="input_json.json"
TEMP_FILE_UPLOAD="file_upload.bin"

echo "TAP version 13"
echo "1..37"

#- 1 Login
$CLI_EXE --op login --lt user --user user --pass user > test.out 2>&1
eval_tap $? 1 'Login' test.out

if [ $EXIT_CODE -ne 0 ]; then
  echo "Bail out! Login failed."
  exit $EXIT_CODE
fi

# echo "foo" > "$CLI_TOKEN_FILE"

#- 2 GetHealthcheckInfo
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfo \
    > test.out 2>&1
eval_tap $? 2 'GetHealthcheckInfo' test.out

#- 3 GetHealthcheckInfoV1
$CLI_EXE \
    --sn session \
    --op GetHealthcheckInfoV1 \
    > test.out 2>&1
eval_tap $? 3 'GetHealthcheckInfoV1' test.out

#- 4 AdminCreateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "ynd53fcT", "deployment": "WmN4a7KE", "inactiveTimeout": 81, "inviteTimeout": 76, "joinability": "O70TujGw", "maxPlayers": 98, "minPlayers": 58, "name": "S1780kxF", "requestedRegions": ["yIe2S9T0", "RLzU8B0k", "OtJen5BT"], "textChat": true, "type": "xTrrRkKV"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminCreateConfigurationTemplateV1 \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 4 'AdminCreateConfigurationTemplateV1' test.out

#- 5 AdminGetAllConfigurationTemplatesV1
$CLI_EXE \
    --sn session \
    --op AdminGetAllConfigurationTemplatesV1 \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 5 'AdminGetAllConfigurationTemplatesV1' test.out

#- 6 AdminGetConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminGetConfigurationTemplateV1 \
    --name 'CaiaGkEk' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 6 'AdminGetConfigurationTemplateV1' test.out

#- 7 AdminUpdateConfigurationTemplateV1
# body param: body
echo '{"clientVersion": "7AJcvsCG", "deployment": "OIaCKwwa", "inactiveTimeout": 31, "inviteTimeout": 53, "joinability": "cYaTO1f8", "maxPlayers": 44, "minPlayers": 35, "name": "MQfQn3We", "requestedRegions": ["xgeC5kJ2", "czA1ucaI", "hLMukj3q"], "textChat": true, "type": "BMSnn6dR"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op AdminUpdateConfigurationTemplateV1 \
    --name 'Y1YMKHTz' \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 7 'AdminUpdateConfigurationTemplateV1' test.out

#- 8 AdminDeleteConfigurationTemplateV1
$CLI_EXE \
    --sn session \
    --op AdminDeleteConfigurationTemplateV1 \
    --name 'jhhCle7v' \
    --namespace $AB_NAMESPACE \
    > test.out 2>&1
eval_tap $? 8 'AdminDeleteConfigurationTemplateV1' test.out

#- 9 AdminQueryGameSessions
$CLI_EXE \
    --sn session \
    --op AdminQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --configurationName '3Cei9kJx' \
    --dsPodName 'i8XY9Cq7' \
    --fromTime 'KkrjyLVa' \
    --gameMode 'TVazrHdE' \
    --joinability 'PdD6NYBz' \
    --limit '71' \
    --matchPool 'psOlkPDB' \
    --memberID 'MPk4O5oH' \
    --offset '97' \
    --order 'fPrUF5IS' \
    --orderBy 'mIYW2bGw' \
    --sessionID 'g3aTbDSD' \
    --status 'Pjl6jKtb' \
    --toTime 'zKnaDAGN' \
    > test.out 2>&1
eval_tap $? 9 'AdminQueryGameSessions' test.out

#- 10 AdminUpdateGameSessionMember
$CLI_EXE \
    --sn session \
    --op AdminUpdateGameSessionMember \
    --memberId 'VGrUnoYC' \
    --namespace $AB_NAMESPACE \
    --sessionId 'ynUPXKr8' \
    --statusType 'DdsVxMDX' \
    > test.out 2>&1
eval_tap $? 10 'AdminUpdateGameSessionMember' test.out

#- 11 AdminQueryParties
$CLI_EXE \
    --sn session \
    --op AdminQueryParties \
    --namespace $AB_NAMESPACE \
    --joinability 'pGCtSGQa' \
    --key 'ted1zbCr' \
    --leaderID 'VOklmaGR' \
    --limit '11' \
    --memberID 'dK8fYmbA' \
    --memberStatus 'fQnk4Y6O' \
    --offset '1' \
    --order 'KHxjvDwu' \
    --orderBy 'qVB7Rael' \
    --value '0vf3mimP' \
    > test.out 2>&1
eval_tap $? 11 'AdminQueryParties' test.out

#- 12 CreateGameSession
# body param: body
echo '{"attributes": {"ICLwbqUq": {}, "oHUyLYb3": {}, "vZPKLsd1": {}}, "backfillTicketID": "s9Mvrryc", "clientVersion": "OSAAN0wc", "configurationName": "U3SqCTTj", "deployment": "k7xcwzx9", "inactiveTimeout": 26, "inviteTimeout": 57, "joinability": "bB1GqFEM", "matchPool": "tpf0KABA", "maxPlayers": 44, "minPlayers": 34, "requestedRegions": ["37Iyqy72", "AsDbAcFN", "lDiPNRCU"], "serverName": "ts8d6TeW", "teams": [{"UserIDs": ["tfmJE4Vc", "jO6Ao1Vt", "yXLJovAJ"]}, {"UserIDs": ["YveK7ZZI", "PBTBeyrR", "lG6cScxp"]}, {"UserIDs": ["pIHd7GwM", "OLunGITY", "AVap3ZON"]}], "textChat": true, "ticketIDs": ["ntqZAu09", "nbpIbnvq", "QiKOxptU"], "type": "CeoZIw2b"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op CreateGameSession \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 12 'CreateGameSession' test.out

#- 13 PublicQueryGameSessions
# body param: body
echo '{"BiRFW6ok": {}, "sLnZqDYD": {}, "7JMpsLip": {}}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicQueryGameSessions \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 13 'PublicQueryGameSessions' test.out

#- 14 GetGameSessionByPodName
$CLI_EXE \
    --sn session \
    --op GetGameSessionByPodName \
    --namespace $AB_NAMESPACE \
    --podName 'upWWYXXN' \
    > test.out 2>&1
eval_tap $? 14 'GetGameSessionByPodName' test.out

#- 15 GetGameSession
$CLI_EXE \
    --sn session \
    --op GetGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'aztBv5ON' \
    > test.out 2>&1
eval_tap $? 15 'GetGameSession' test.out

#- 16 UpdateGameSession
# body param: body
echo '{"attributes": {"DezAvkTh": {}, "EmlN8laU": {}, "yBn1D8DW": {}}, "backfillTicketID": "kH6vSrWB", "clientVersion": "ivCY9CeJ", "deployment": "CS7KtQIA", "inactiveTimeout": 34, "inviteTimeout": 15, "joinability": "ZhwlHlV4", "matchPool": "FPFSGzEx", "maxPlayers": 88, "minPlayers": 52, "requestedRegions": ["BfDAtcMa", "CDrfZpsm", "93HUoxQu"], "teams": [{"UserIDs": ["TnoAUVtD", "FeDf7J1m", "tW0ZkaUj"]}, {"UserIDs": ["2gEtRjlC", "x45OEMdk", "1CA0g7e0"]}, {"UserIDs": ["eAXB2UR3", "3yGgchRR", "PLjg4bpy"]}], "ticketIDs": ["YmM87lFU", "J18Wgr2L", "HmzIHArZ"], "type": "0qugZkmE", "version": 95}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op UpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'DbSR2GiY' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 16 'UpdateGameSession' test.out

#- 17 DeleteGameSession
$CLI_EXE \
    --sn session \
    --op DeleteGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'Bu6g42k9' \
    > test.out 2>&1
eval_tap $? 17 'DeleteGameSession' test.out

#- 18 PatchUpdateGameSession
# body param: body
echo '{"attributes": {"Bcvt7jeq": {}, "bYhS4FA8": {}, "Hlo0X1I0": {}}, "backfillTicketID": "37UyphCV", "clientVersion": "3joaNXol", "deployment": "JUoZ7Icv", "inactiveTimeout": 48, "inviteTimeout": 29, "joinability": "uT3aRJn7", "matchPool": "hnZnEtxn", "maxPlayers": 25, "minPlayers": 3, "requestedRegions": ["8jxhsG1H", "fI0eSikP", "SOA0qr1Q"], "teams": [{"UserIDs": ["N6lzLohD", "pX5ckBpa", "KeyFcWrn"]}, {"UserIDs": ["k3jbeDrW", "X2EiFyPm", "gHMGR6cI"]}, {"UserIDs": ["TsRO0Mng", "FtszczHu", "W2R9WT4Z"]}], "ticketIDs": ["YyOpNqKE", "TSAKQxL9", "kJ8lJDtV"], "type": "yHJNXriI", "version": 26}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PatchUpdateGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'AFST91Oi' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 18 'PatchUpdateGameSession' test.out

#- 19 PublicGameSessionInvite
# body param: body
echo '{"userID": "YwzPsuZW"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicGameSessionInvite \
    --namespace $AB_NAMESPACE \
    --sessionId 'vyfEjyOe' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 19 'PublicGameSessionInvite' test.out

#- 20 JoinGameSession
$CLI_EXE \
    --sn session \
    --op JoinGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'U7Tv6Tsn' \
    > test.out 2>&1
eval_tap $? 20 'JoinGameSession' test.out

#- 21 LeaveGameSession
$CLI_EXE \
    --sn session \
    --op LeaveGameSession \
    --namespace $AB_NAMESPACE \
    --sessionId 'dHGGakbi' \
    > test.out 2>&1
eval_tap $? 21 'LeaveGameSession' test.out

#- 22 PublicGameSessionReject
$CLI_EXE \
    --sn session \
    --op PublicGameSessionReject \
    --namespace $AB_NAMESPACE \
    --sessionId '9zMMAtQU' \
    > test.out 2>&1
eval_tap $? 22 'PublicGameSessionReject' test.out

#- 23 PublicPartyJoinCode
# body param: body
echo '{"code": "xIOQdiy5"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyJoinCode \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 23 'PublicPartyJoinCode' test.out

#- 24 PublicGetParty
$CLI_EXE \
    --sn session \
    --op PublicGetParty \
    --namespace $AB_NAMESPACE \
    --partyId 'RoPbtvpY' \
    > test.out 2>&1
eval_tap $? 24 'PublicGetParty' test.out

#- 25 PublicUpdateParty
# body param: body
echo '{"attributes": {"fPE7gMhA": {}, "Fx4brsnX": {}, "qvKLepne": {}}, "inactiveTimeout": 59, "inviteTimeout": 33, "joinability": "zG9dY7a2", "maxPlayers": 48, "minPlayers": 83, "type": "XpBTF6LY", "version": 68}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'FpbI4LZH' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 25 'PublicUpdateParty' test.out

#- 26 PublicPatchUpdateParty
# body param: body
echo '{"attributes": {"hLO6ykAm": {}, "RJ2pXCDz": {}, "gULDIDQV": {}}, "inactiveTimeout": 64, "inviteTimeout": 30, "joinability": "6Ac1QNTv", "maxPlayers": 4, "minPlayers": 71, "type": "aiARv0TY", "version": 29}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPatchUpdateParty \
    --namespace $AB_NAMESPACE \
    --partyId 'cz7LUg0b' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 26 'PublicPatchUpdateParty' test.out

#- 27 PublicGeneratePartyCode
$CLI_EXE \
    --sn session \
    --op PublicGeneratePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId '4btVS9Un' \
    > test.out 2>&1
eval_tap $? 27 'PublicGeneratePartyCode' test.out

#- 28 PublicRevokePartyCode
$CLI_EXE \
    --sn session \
    --op PublicRevokePartyCode \
    --namespace $AB_NAMESPACE \
    --partyId 'jBa4NQue' \
    > test.out 2>&1
eval_tap $? 28 'PublicRevokePartyCode' test.out

#- 29 PublicPartyInvite
# body param: body
echo '{"userID": "loa2ZWWW"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPartyInvite \
    --namespace $AB_NAMESPACE \
    --partyId 'OBOGWowH' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 29 'PublicPartyInvite' test.out

#- 30 PublicPromotePartyLeader
# body param: body
echo '{"leaderID": "0evbDhSc"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicPromotePartyLeader \
    --namespace $AB_NAMESPACE \
    --partyId 'ktMex3ip' \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 30 'PublicPromotePartyLeader' test.out

#- 31 PublicPartyJoin
$CLI_EXE \
    --sn session \
    --op PublicPartyJoin \
    --namespace $AB_NAMESPACE \
    --partyId '1TtOnZeT' \
    > test.out 2>&1
eval_tap $? 31 'PublicPartyJoin' test.out

#- 32 PublicPartyLeave
$CLI_EXE \
    --sn session \
    --op PublicPartyLeave \
    --namespace $AB_NAMESPACE \
    --partyId 'DeyTG3CF' \
    > test.out 2>&1
eval_tap $? 32 'PublicPartyLeave' test.out

#- 33 PublicPartyReject
$CLI_EXE \
    --sn session \
    --op PublicPartyReject \
    --namespace $AB_NAMESPACE \
    --partyId 'qO4bypEp' \
    > test.out 2>&1
eval_tap $? 33 'PublicPartyReject' test.out

#- 34 PublicPartyKick
$CLI_EXE \
    --sn session \
    --op PublicPartyKick \
    --namespace $AB_NAMESPACE \
    --partyId '89OyhJiz' \
    --userId 'sjOY5hop' \
    > test.out 2>&1
eval_tap $? 34 'PublicPartyKick' test.out

#- 35 PublicCreateParty
# body param: body
echo '{"attributes": {"q8n4m57u": {}, "VJfSbMUf": {}, "iZQ7p1Mf": {}}, "configurationName": "N4J4zKQf", "inactiveTimeout": 26, "inviteTimeout": 74, "joinability": "hsfb2sWD", "maxPlayers": 87, "members": [{"ID": "m7Nycir8", "PlatformID": "QoeDiBXQ", "PlatformUserID": "Oz3KB0Ov"}, {"ID": "QDSWf8LQ", "PlatformID": "k0XBOmF7", "PlatformUserID": "2GzB9aJT"}, {"ID": "uVTaGEcq", "PlatformID": "qM1zL3D9", "PlatformUserID": "5jfML9QP"}], "minPlayers": 100, "textChat": true, "type": "Xed2hSES"}' > $TEMP_JSON_INPUT
$CLI_EXE \
    --sn session \
    --op PublicCreateParty \
    --namespace $AB_NAMESPACE \
    --reqfile $TEMP_JSON_INPUT \
    > test.out 2>&1
eval_tap $? 35 'PublicCreateParty' test.out

#- 36 PublicQueryMyGameSessions
$CLI_EXE \
    --sn session \
    --op PublicQueryMyGameSessions \
    --namespace $AB_NAMESPACE \
    --order '4QdpJ4CZ' \
    --orderBy 'flydvwFM' \
    --status 'XsUUmd9b' \
    > test.out 2>&1
eval_tap $? 36 'PublicQueryMyGameSessions' test.out

#- 37 PublicQueryMyParties
$CLI_EXE \
    --sn session \
    --op PublicQueryMyParties \
    --namespace $AB_NAMESPACE \
    --order 'SE02BN7Y' \
    --orderBy 'paPiCt27' \
    --status 'qs5MSQ9Y' \
    > test.out 2>&1
eval_tap $? 37 'PublicQueryMyParties' test.out


# remove artifacts
rm -f "$CLI_TOKEN_FILE"
rm -f "$TEMP_JSON_INPUT"
rm -f "$TEMP_FILE_UPLOAD"

exit $EXIT_CODE